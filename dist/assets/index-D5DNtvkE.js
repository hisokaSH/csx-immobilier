function df(t,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var In=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ds(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),r}var uf={exports:{}},Ea={},pf={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ns=Symbol.for("react.element"),by=Symbol.for("react.portal"),jy=Symbol.for("react.fragment"),wy=Symbol.for("react.strict_mode"),Sy=Symbol.for("react.profiler"),ky=Symbol.for("react.provider"),_y=Symbol.for("react.context"),Cy=Symbol.for("react.forward_ref"),zy=Symbol.for("react.suspense"),Ry=Symbol.for("react.memo"),Ey=Symbol.for("react.lazy"),Nu=Symbol.iterator;function Ty(t){return t===null||typeof t!="object"?null:(t=Nu&&t[Nu]||t["@@iterator"],typeof t=="function"?t:null)}var hf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ff=Object.assign,gf={};function bi(t,e,r){this.props=t,this.context=e,this.refs=gf,this.updater=r||hf}bi.prototype.isReactComponent={};bi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xf(){}xf.prototype=bi.prototype;function mc(t,e,r){this.props=t,this.context=e,this.refs=gf,this.updater=r||hf}var yc=mc.prototype=new xf;yc.constructor=mc;ff(yc,bi.prototype);yc.isPureReactComponent=!0;var Mu=Array.isArray,mf=Object.prototype.hasOwnProperty,vc={current:null},yf={key:!0,ref:!0,__self:!0,__source:!0};function vf(t,e,r){var i,s={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)mf.call(e,i)&&!yf.hasOwnProperty(i)&&(s[i]=e[i]);var d=arguments.length-2;if(d===1)s.children=r;else if(1<d){for(var l=Array(d),c=0;c<d;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(i in d=t.defaultProps,d)s[i]===void 0&&(s[i]=d[i]);return{$$typeof:Ns,type:t,key:o,ref:a,props:s,_owner:vc.current}}function Iy(t,e){return{$$typeof:Ns,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ns}function Py(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Bu=/\/+/g;function rl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Py(""+t.key):e.toString(36)}function _o(t,e,r,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ns:case by:a=!0}}if(a)return a=t,s=s(a),t=i===""?"."+rl(a,0):i,Mu(s)?(r="",t!=null&&(r=t.replace(Bu,"$&/")+"/"),_o(s,e,r,"",function(c){return c})):s!=null&&(bc(s)&&(s=Iy(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Bu,"$&/")+"/")+t)),e.push(s)),1;if(a=0,i=i===""?".":i+":",Mu(t))for(var d=0;d<t.length;d++){o=t[d];var l=i+rl(o,d);a+=_o(o,e,r,l,s)}else if(l=Ty(t),typeof l=="function")for(t=l.call(t),d=0;!(o=t.next()).done;)o=o.value,l=i+rl(o,d++),a+=_o(o,e,r,l,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Gs(t,e,r){if(t==null)return t;var i=[],s=0;return _o(t,i,"","",function(o){return e.call(r,o,s++)}),i}function Ay(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ye={current:null},Co={transition:null},Oy={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:Co,ReactCurrentOwner:vc};function bf(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Gs,forEach:function(t,e,r){Gs(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Gs(t,function(){e++}),e},toArray:function(t){return Gs(t,function(e){return e})||[]},only:function(t){if(!bc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=bi;ee.Fragment=jy;ee.Profiler=Sy;ee.PureComponent=mc;ee.StrictMode=wy;ee.Suspense=zy;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oy;ee.act=bf;ee.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=ff({},t.props),s=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=vc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(l in e)mf.call(e,l)&&!yf.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&d!==void 0?d[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){d=Array(l);for(var c=0;c<l;c++)d[c]=arguments[c+2];i.children=d}return{$$typeof:Ns,type:t.type,key:s,ref:o,props:i,_owner:a}};ee.createContext=function(t){return t={$$typeof:_y,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ky,_context:t},t.Consumer=t};ee.createElement=vf;ee.createFactory=function(t){var e=vf.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:Cy,render:t}};ee.isValidElement=bc;ee.lazy=function(t){return{$$typeof:Ey,_payload:{_status:-1,_result:t},_init:Ay}};ee.memo=function(t,e){return{$$typeof:Ry,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Co.transition;Co.transition={};try{t()}finally{Co.transition=e}};ee.unstable_act=bf;ee.useCallback=function(t,e){return Ye.current.useCallback(t,e)};ee.useContext=function(t){return Ye.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return Ye.current.useDeferredValue(t)};ee.useEffect=function(t,e){return Ye.current.useEffect(t,e)};ee.useId=function(){return Ye.current.useId()};ee.useImperativeHandle=function(t,e,r){return Ye.current.useImperativeHandle(t,e,r)};ee.useInsertionEffect=function(t,e){return Ye.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return Ye.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return Ye.current.useMemo(t,e)};ee.useReducer=function(t,e,r){return Ye.current.useReducer(t,e,r)};ee.useRef=function(t){return Ye.current.useRef(t)};ee.useState=function(t){return Ye.current.useState(t)};ee.useSyncExternalStore=function(t,e,r){return Ye.current.useSyncExternalStore(t,e,r)};ee.useTransition=function(){return Ye.current.useTransition()};ee.version="18.3.1";pf.exports=ee;var w=pf.exports;const Ta=cf(w),Ly=df({__proto__:null,default:Ta},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy=w,Ny=Symbol.for("react.element"),My=Symbol.for("react.fragment"),By=Object.prototype.hasOwnProperty,$y=Dy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fy={key:!0,ref:!0,__self:!0,__source:!0};function jf(t,e,r){var i,s={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)By.call(e,i)&&!Fy.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:Ny,type:t,key:o,ref:a,props:s,_owner:$y.current}}Ea.Fragment=My;Ea.jsx=jf;Ea.jsxs=jf;uf.exports=Ea;var n=uf.exports,Kl={},wf={exports:{}},yt={},Sf={exports:{}},kf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(S,D){var M=S.length;S.push(D);e:for(;0<M;){var C=M-1>>>1,F=S[C];if(0<s(F,D))S[C]=D,S[M]=F,M=C;else break e}}function r(S){return S.length===0?null:S[0]}function i(S){if(S.length===0)return null;var D=S[0],M=S.pop();if(M!==D){S[0]=M;e:for(var C=0,F=S.length,L=F>>>1;C<L;){var X=2*(C+1)-1,Le=S[X],Z=X+1,Ze=S[Z];if(0>s(Le,M))Z<F&&0>s(Ze,Le)?(S[C]=Ze,S[Z]=M,C=Z):(S[C]=Le,S[X]=M,C=X);else if(Z<F&&0>s(Ze,M))S[C]=Ze,S[Z]=M,C=Z;else break e}}return D}function s(S,D){var M=S.sortIndex-D.sortIndex;return M!==0?M:S.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,d=a.now();t.unstable_now=function(){return a.now()-d}}var l=[],c=[],u=1,h=null,p=3,f=!1,x=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(S){for(var D=r(c);D!==null;){if(D.callback===null)i(c);else if(D.startTime<=S)i(c),D.sortIndex=D.expirationTime,e(l,D);else break;D=r(c)}}function j(S){if(y=!1,b(S),!x)if(r(l)!==null)x=!0,q(R);else{var D=r(c);D!==null&&z(j,D.startTime-S)}}function R(S,D){x=!1,y&&(y=!1,g(P),P=-1),f=!0;var M=p;try{for(b(D),h=r(l);h!==null&&(!(h.expirationTime>D)||S&&!A());){var C=h.callback;if(typeof C=="function"){h.callback=null,p=h.priorityLevel;var F=C(h.expirationTime<=D);D=t.unstable_now(),typeof F=="function"?h.callback=F:h===r(l)&&i(l),b(D)}else i(l);h=r(l)}if(h!==null)var L=!0;else{var X=r(c);X!==null&&z(j,X.startTime-D),L=!1}return L}finally{h=null,p=M,f=!1}}var T=!1,k=null,P=-1,I=5,E=-1;function A(){return!(t.unstable_now()-E<I)}function O(){if(k!==null){var S=t.unstable_now();E=S;var D=!0;try{D=k(!0,S)}finally{D?W():(T=!1,k=null)}}else T=!1}var W;if(typeof m=="function")W=function(){m(O)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,N=_.port2;_.port1.onmessage=O,W=function(){N.postMessage(null)}}else W=function(){v(O,0)};function q(S){k=S,T||(T=!0,W())}function z(S,D){P=v(function(){S(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(S){S.callback=null},t.unstable_continueExecution=function(){x||f||(x=!0,q(R))},t.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<S?Math.floor(1e3/S):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(S){switch(p){case 1:case 2:case 3:var D=3;break;default:D=p}var M=p;p=D;try{return S()}finally{p=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(S,D){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var M=p;p=S;try{return D()}finally{p=M}},t.unstable_scheduleCallback=function(S,D,M){var C=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?C+M:C):M=C,S){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=M+F,S={id:u++,callback:D,priorityLevel:S,startTime:M,expirationTime:F,sortIndex:-1},M>C?(S.sortIndex=M,e(c,S),r(l)===null&&S===r(c)&&(y?(g(P),P=-1):y=!0,z(j,M-C))):(S.sortIndex=F,e(l,S),x||f||(x=!0,q(R))),S},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(S){var D=p;return function(){var M=p;p=D;try{return S.apply(this,arguments)}finally{p=M}}}})(kf);Sf.exports=kf;var Wy=Sf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy=w,mt=Wy;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _f=new Set,ds={};function Cn(t,e){di(t,e),di(t+"Capture",e)}function di(t,e){for(ds[t]=e,t=0;t<e.length;t++)_f.add(e[t])}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jl=Object.prototype.hasOwnProperty,qy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$u={},Fu={};function Vy(t){return Jl.call(Fu,t)?!0:Jl.call($u,t)?!1:qy.test(t)?Fu[t]=!0:($u[t]=!0,!1)}function Hy(t,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Gy(t,e,r,i){if(e===null||typeof e>"u"||Hy(t,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xe(t,e,r,i,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$e[t]=new Xe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$e[e]=new Xe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$e[t]=new Xe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$e[t]=new Xe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$e[t]=new Xe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$e[t]=new Xe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$e[t]=new Xe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$e[t]=new Xe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$e[t]=new Xe(t,5,!1,t.toLowerCase(),null,!1,!1)});var jc=/[\-:]([a-z])/g;function wc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jc,wc);$e[e]=new Xe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jc,wc);$e[e]=new Xe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jc,wc);$e[e]=new Xe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$e[t]=new Xe(t,1,!1,t.toLowerCase(),null,!1,!1)});$e.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$e[t]=new Xe(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sc(t,e,r,i){var s=$e.hasOwnProperty(e)?$e[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Gy(e,r,s,i)&&(r=null),i||s===null?Vy(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?t.setAttributeNS(i,e,r):t.setAttribute(e,r))))}var fr=Uy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ks=Symbol.for("react.element"),Wn=Symbol.for("react.portal"),Un=Symbol.for("react.fragment"),kc=Symbol.for("react.strict_mode"),Ql=Symbol.for("react.profiler"),Cf=Symbol.for("react.provider"),zf=Symbol.for("react.context"),_c=Symbol.for("react.forward_ref"),Yl=Symbol.for("react.suspense"),Xl=Symbol.for("react.suspense_list"),Cc=Symbol.for("react.memo"),wr=Symbol.for("react.lazy"),Rf=Symbol.for("react.offscreen"),Wu=Symbol.iterator;function Ti(t){return t===null||typeof t!="object"?null:(t=Wu&&t[Wu]||t["@@iterator"],typeof t=="function"?t:null)}var ye=Object.assign,nl;function Ui(t){if(nl===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);nl=e&&e[1]||""}return`
`+nl+t}var il=!1;function sl(t,e){if(!t||il)return"";il=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=i.stack.split(`
`),a=s.length-1,d=o.length-1;1<=a&&0<=d&&s[a]!==o[d];)d--;for(;1<=a&&0<=d;a--,d--)if(s[a]!==o[d]){if(a!==1||d!==1)do if(a--,d--,0>d||s[a]!==o[d]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=d);break}}}finally{il=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ui(t):""}function Ky(t){switch(t.tag){case 5:return Ui(t.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 2:case 15:return t=sl(t.type,!1),t;case 11:return t=sl(t.type.render,!1),t;case 1:return t=sl(t.type,!0),t;default:return""}}function Zl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Un:return"Fragment";case Wn:return"Portal";case Ql:return"Profiler";case kc:return"StrictMode";case Yl:return"Suspense";case Xl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zf:return(t.displayName||"Context")+".Consumer";case Cf:return(t._context.displayName||"Context")+".Provider";case _c:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cc:return e=t.displayName||null,e!==null?e:Zl(t.type)||"Memo";case wr:e=t._payload,t=t._init;try{return Zl(t(e))}catch{}}return null}function Jy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zl(e);case 8:return e===kc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ef(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Qy(t){var e=Ef(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Js(t){t._valueTracker||(t._valueTracker=Qy(t))}function Tf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return t&&(i=Ef(t)?t.checked?"true":"false":t.value),t=i,t!==r?(e.setValue(t),!0):!1}function Wo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ed(t,e){var r=e.checked;return ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Uu(t,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=Fr(e.value!=null?e.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function If(t,e){e=e.checked,e!=null&&Sc(t,"checked",e,!1)}function td(t,e){If(t,e);var r=Fr(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rd(t,e.type,r):e.hasOwnProperty("defaultValue")&&rd(t,e.type,Fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qu(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function rd(t,e,r){(e!=="number"||Wo(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var qi=Array.isArray;function ei(t,e,r,i){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&i&&(t[r].defaultSelected=!0)}else{for(r=""+Fr(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function nd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vu(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(U(92));if(qi(r)){if(1<r.length)throw Error(U(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Fr(r)}}function Pf(t,e){var r=Fr(e.value),i=Fr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function Hu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Af(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function id(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Af(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qs,Of=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qs=Qs||document.createElement("div"),Qs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cs(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yy=["Webkit","ms","Moz","O"];Object.keys(Yi).forEach(function(t){Yy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yi[e]=Yi[t]})});function Lf(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Yi.hasOwnProperty(t)&&Yi[t]?(""+e).trim():e+"px"}function Df(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=Lf(r,e[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,s):t[r]=s}}var Xy=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sd(t,e){if(e){if(Xy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function od(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ad=null;function zc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ld=null,ti=null,ri=null;function Gu(t){if(t=$s(t)){if(typeof ld!="function")throw Error(U(280));var e=t.stateNode;e&&(e=La(e),ld(t.stateNode,t.type,e))}}function Nf(t){ti?ri?ri.push(t):ri=[t]:ti=t}function Mf(){if(ti){var t=ti,e=ri;if(ri=ti=null,Gu(t),e)for(t=0;t<e.length;t++)Gu(e[t])}}function Bf(t,e){return t(e)}function $f(){}var ol=!1;function Ff(t,e,r){if(ol)return t(e,r);ol=!0;try{return Bf(t,e,r)}finally{ol=!1,(ti!==null||ri!==null)&&($f(),Mf())}}function us(t,e){var r=t.stateNode;if(r===null)return null;var i=La(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(U(231,e,typeof r));return r}var dd=!1;if(dr)try{var Ii={};Object.defineProperty(Ii,"passive",{get:function(){dd=!0}}),window.addEventListener("test",Ii,Ii),window.removeEventListener("test",Ii,Ii)}catch{dd=!1}function Zy(t,e,r,i,s,o,a,d,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var Xi=!1,Uo=null,qo=!1,cd=null,e0={onError:function(t){Xi=!0,Uo=t}};function t0(t,e,r,i,s,o,a,d,l){Xi=!1,Uo=null,Zy.apply(e0,arguments)}function r0(t,e,r,i,s,o,a,d,l){if(t0.apply(this,arguments),Xi){if(Xi){var c=Uo;Xi=!1,Uo=null}else throw Error(U(198));qo||(qo=!0,cd=c)}}function zn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Wf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ku(t){if(zn(t)!==t)throw Error(U(188))}function n0(t){var e=t.alternate;if(!e){if(e=zn(t),e===null)throw Error(U(188));return e!==t?null:t}for(var r=t,i=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Ku(s),t;if(o===i)return Ku(s),e;o=o.sibling}throw Error(U(188))}if(r.return!==i.return)r=s,i=o;else{for(var a=!1,d=s.child;d;){if(d===r){a=!0,r=s,i=o;break}if(d===i){a=!0,i=s,r=o;break}d=d.sibling}if(!a){for(d=o.child;d;){if(d===r){a=!0,r=o,i=s;break}if(d===i){a=!0,i=o,r=s;break}d=d.sibling}if(!a)throw Error(U(189))}}if(r.alternate!==i)throw Error(U(190))}if(r.tag!==3)throw Error(U(188));return r.stateNode.current===r?t:e}function Uf(t){return t=n0(t),t!==null?qf(t):null}function qf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qf(t);if(e!==null)return e;t=t.sibling}return null}var Vf=mt.unstable_scheduleCallback,Ju=mt.unstable_cancelCallback,i0=mt.unstable_shouldYield,s0=mt.unstable_requestPaint,be=mt.unstable_now,o0=mt.unstable_getCurrentPriorityLevel,Rc=mt.unstable_ImmediatePriority,Hf=mt.unstable_UserBlockingPriority,Vo=mt.unstable_NormalPriority,a0=mt.unstable_LowPriority,Gf=mt.unstable_IdlePriority,Ia=null,Zt=null;function l0(t){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Ia,t,void 0,(t.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:u0,d0=Math.log,c0=Math.LN2;function u0(t){return t>>>=0,t===0?32:31-(d0(t)/c0|0)|0}var Ys=64,Xs=4194304;function Vi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ho(t,e){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,a=r&268435455;if(a!==0){var d=a&~s;d!==0?i=Vi(d):(o&=a,o!==0&&(i=Vi(o)))}else a=r&~s,a!==0?i=Vi(a):o!==0&&(i=Vi(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)r=31-Mt(e),s=1<<r,i|=t[r],e&=~s;return i}function p0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h0(t,e){for(var r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Mt(o),d=1<<a,l=s[a];l===-1?(!(d&r)||d&i)&&(s[a]=p0(d,e)):l<=e&&(t.expiredLanes|=d),o&=~d}}function ud(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kf(){var t=Ys;return Ys<<=1,!(Ys&4194240)&&(Ys=64),t}function al(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ms(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mt(e),t[e]=r}function f0(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Mt(r),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,r&=~o}}function Ec(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var i=31-Mt(r),s=1<<i;s&e|t[i]&e&&(t[i]|=e),r&=~s}}var se=0;function Jf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Qf,Tc,Yf,Xf,Zf,pd=!1,Zs=[],Ir=null,Pr=null,Ar=null,ps=new Map,hs=new Map,kr=[],g0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qu(t,e){switch(t){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":ps.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(e.pointerId)}}function Pi(t,e,r,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=$s(e),e!==null&&Tc(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function x0(t,e,r,i,s){switch(e){case"focusin":return Ir=Pi(Ir,t,e,r,i,s),!0;case"dragenter":return Pr=Pi(Pr,t,e,r,i,s),!0;case"mouseover":return Ar=Pi(Ar,t,e,r,i,s),!0;case"pointerover":var o=s.pointerId;return ps.set(o,Pi(ps.get(o)||null,t,e,r,i,s)),!0;case"gotpointercapture":return o=s.pointerId,hs.set(o,Pi(hs.get(o)||null,t,e,r,i,s)),!0}return!1}function eg(t){var e=cn(t.target);if(e!==null){var r=zn(e);if(r!==null){if(e=r.tag,e===13){if(e=Wf(r),e!==null){t.blockedOn=e,Zf(t.priority,function(){Yf(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=hd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);ad=i,r.target.dispatchEvent(i),ad=null}else return e=$s(r),e!==null&&Tc(e),t.blockedOn=r,!1;e.shift()}return!0}function Yu(t,e,r){zo(t)&&r.delete(e)}function m0(){pd=!1,Ir!==null&&zo(Ir)&&(Ir=null),Pr!==null&&zo(Pr)&&(Pr=null),Ar!==null&&zo(Ar)&&(Ar=null),ps.forEach(Yu),hs.forEach(Yu)}function Ai(t,e){t.blockedOn===e&&(t.blockedOn=null,pd||(pd=!0,mt.unstable_scheduleCallback(mt.unstable_NormalPriority,m0)))}function fs(t){function e(s){return Ai(s,t)}if(0<Zs.length){Ai(Zs[0],t);for(var r=1;r<Zs.length;r++){var i=Zs[r];i.blockedOn===t&&(i.blockedOn=null)}}for(Ir!==null&&Ai(Ir,t),Pr!==null&&Ai(Pr,t),Ar!==null&&Ai(Ar,t),ps.forEach(e),hs.forEach(e),r=0;r<kr.length;r++)i=kr[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<kr.length&&(r=kr[0],r.blockedOn===null);)eg(r),r.blockedOn===null&&kr.shift()}var ni=fr.ReactCurrentBatchConfig,Go=!0;function y0(t,e,r,i){var s=se,o=ni.transition;ni.transition=null;try{se=1,Ic(t,e,r,i)}finally{se=s,ni.transition=o}}function v0(t,e,r,i){var s=se,o=ni.transition;ni.transition=null;try{se=4,Ic(t,e,r,i)}finally{se=s,ni.transition=o}}function Ic(t,e,r,i){if(Go){var s=hd(t,e,r,i);if(s===null)ml(t,e,i,Ko,r),Qu(t,i);else if(x0(s,t,e,r,i))i.stopPropagation();else if(Qu(t,i),e&4&&-1<g0.indexOf(t)){for(;s!==null;){var o=$s(s);if(o!==null&&Qf(o),o=hd(t,e,r,i),o===null&&ml(t,e,i,Ko,r),o===s)break;s=o}s!==null&&i.stopPropagation()}else ml(t,e,i,null,r)}}var Ko=null;function hd(t,e,r,i){if(Ko=null,t=zc(i),t=cn(t),t!==null)if(e=zn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Wf(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ko=t,null}function tg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o0()){case Rc:return 1;case Hf:return 4;case Vo:case a0:return 16;case Gf:return 536870912;default:return 16}default:return 16}}var Rr=null,Pc=null,Ro=null;function rg(){if(Ro)return Ro;var t,e=Pc,r=e.length,i,s="value"in Rr?Rr.value:Rr.textContent,o=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(i=1;i<=a&&e[r-i]===s[o-i];i++);return Ro=s.slice(t,1<i?1-i:void 0)}function Eo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function eo(){return!0}function Xu(){return!1}function vt(t){function e(r,i,s,o,a){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(r=t[d],this[d]=r?r(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?eo:Xu,this.isPropagationStopped=Xu,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=eo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=eo)},persist:function(){},isPersistent:eo}),e}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ac=vt(ji),Bs=ye({},ji,{view:0,detail:0}),b0=vt(Bs),ll,dl,Oi,Pa=ye({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oi&&(Oi&&t.type==="mousemove"?(ll=t.screenX-Oi.screenX,dl=t.screenY-Oi.screenY):dl=ll=0,Oi=t),ll)},movementY:function(t){return"movementY"in t?t.movementY:dl}}),Zu=vt(Pa),j0=ye({},Pa,{dataTransfer:0}),w0=vt(j0),S0=ye({},Bs,{relatedTarget:0}),cl=vt(S0),k0=ye({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),_0=vt(k0),C0=ye({},ji,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),z0=vt(C0),R0=ye({},ji,{data:0}),ep=vt(R0),E0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=I0[t])?!!e[t]:!1}function Oc(){return P0}var A0=ye({},Bs,{key:function(t){if(t.key){var e=E0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Eo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?T0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oc,charCode:function(t){return t.type==="keypress"?Eo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Eo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),O0=vt(A0),L0=ye({},Pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tp=vt(L0),D0=ye({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oc}),N0=vt(D0),M0=ye({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),B0=vt(M0),$0=ye({},Pa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),F0=vt($0),W0=[9,13,27,32],Lc=dr&&"CompositionEvent"in window,Zi=null;dr&&"documentMode"in document&&(Zi=document.documentMode);var U0=dr&&"TextEvent"in window&&!Zi,ng=dr&&(!Lc||Zi&&8<Zi&&11>=Zi),rp=" ",np=!1;function ig(t,e){switch(t){case"keyup":return W0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qn=!1;function q0(t,e){switch(t){case"compositionend":return sg(e);case"keypress":return e.which!==32?null:(np=!0,rp);case"textInput":return t=e.data,t===rp&&np?null:t;default:return null}}function V0(t,e){if(qn)return t==="compositionend"||!Lc&&ig(t,e)?(t=rg(),Ro=Pc=Rr=null,qn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ng&&e.locale!=="ko"?null:e.data;default:return null}}var H0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ip(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!H0[t.type]:e==="textarea"}function og(t,e,r,i){Nf(i),e=Jo(e,"onChange"),0<e.length&&(r=new Ac("onChange","change",null,r,i),t.push({event:r,listeners:e}))}var es=null,gs=null;function G0(t){mg(t,0)}function Aa(t){var e=Gn(t);if(Tf(e))return t}function K0(t,e){if(t==="change")return e}var ag=!1;if(dr){var ul;if(dr){var pl="oninput"in document;if(!pl){var sp=document.createElement("div");sp.setAttribute("oninput","return;"),pl=typeof sp.oninput=="function"}ul=pl}else ul=!1;ag=ul&&(!document.documentMode||9<document.documentMode)}function op(){es&&(es.detachEvent("onpropertychange",lg),gs=es=null)}function lg(t){if(t.propertyName==="value"&&Aa(gs)){var e=[];og(e,gs,t,zc(t)),Ff(G0,e)}}function J0(t,e,r){t==="focusin"?(op(),es=e,gs=r,es.attachEvent("onpropertychange",lg)):t==="focusout"&&op()}function Q0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Aa(gs)}function Y0(t,e){if(t==="click")return Aa(e)}function X0(t,e){if(t==="input"||t==="change")return Aa(e)}function Z0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ft=typeof Object.is=="function"?Object.is:Z0;function xs(t,e){if(Ft(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!Jl.call(e,s)||!Ft(t[s],e[s]))return!1}return!0}function ap(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lp(t,e){var r=ap(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ap(r)}}function dg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cg(){for(var t=window,e=Wo();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Wo(t.document)}return e}function Dc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function e1(t){var e=cg(),r=t.focusedElem,i=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&dg(r.ownerDocument.documentElement,r)){if(i!==null&&Dc(r)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=lp(r,o);var a=lp(r,i);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var t1=dr&&"documentMode"in document&&11>=document.documentMode,Vn=null,fd=null,ts=null,gd=!1;function dp(t,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;gd||Vn==null||Vn!==Wo(i)||(i=Vn,"selectionStart"in i&&Dc(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ts&&xs(ts,i)||(ts=i,i=Jo(fd,"onSelect"),0<i.length&&(e=new Ac("onSelect","select",null,e,r),t.push({event:e,listeners:i}),e.target=Vn)))}function to(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Hn={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionend:to("Transition","TransitionEnd")},hl={},ug={};dr&&(ug=document.createElement("div").style,"AnimationEvent"in window||(delete Hn.animationend.animation,delete Hn.animationiteration.animation,delete Hn.animationstart.animation),"TransitionEvent"in window||delete Hn.transitionend.transition);function Oa(t){if(hl[t])return hl[t];if(!Hn[t])return t;var e=Hn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in ug)return hl[t]=e[r];return t}var pg=Oa("animationend"),hg=Oa("animationiteration"),fg=Oa("animationstart"),gg=Oa("transitionend"),xg=new Map,cp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qr(t,e){xg.set(t,e),Cn(e,[t])}for(var fl=0;fl<cp.length;fl++){var gl=cp[fl],r1=gl.toLowerCase(),n1=gl[0].toUpperCase()+gl.slice(1);qr(r1,"on"+n1)}qr(pg,"onAnimationEnd");qr(hg,"onAnimationIteration");qr(fg,"onAnimationStart");qr("dblclick","onDoubleClick");qr("focusin","onFocus");qr("focusout","onBlur");qr(gg,"onTransitionEnd");di("onMouseEnter",["mouseout","mouseover"]);di("onMouseLeave",["mouseout","mouseover"]);di("onPointerEnter",["pointerout","pointerover"]);di("onPointerLeave",["pointerout","pointerover"]);Cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hi));function up(t,e,r){var i=t.type||"unknown-event";t.currentTarget=r,r0(i,e,void 0,t),t.currentTarget=null}function mg(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var d=i[a],l=d.instance,c=d.currentTarget;if(d=d.listener,l!==o&&s.isPropagationStopped())break e;up(s,d,c),o=l}else for(a=0;a<i.length;a++){if(d=i[a],l=d.instance,c=d.currentTarget,d=d.listener,l!==o&&s.isPropagationStopped())break e;up(s,d,c),o=l}}}if(qo)throw t=cd,qo=!1,cd=null,t}function ue(t,e){var r=e[bd];r===void 0&&(r=e[bd]=new Set);var i=t+"__bubble";r.has(i)||(yg(e,t,2,!1),r.add(i))}function xl(t,e,r){var i=0;e&&(i|=4),yg(r,t,i,e)}var ro="_reactListening"+Math.random().toString(36).slice(2);function ms(t){if(!t[ro]){t[ro]=!0,_f.forEach(function(r){r!=="selectionchange"&&(i1.has(r)||xl(r,!1,t),xl(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ro]||(e[ro]=!0,xl("selectionchange",!1,e))}}function yg(t,e,r,i){switch(tg(e)){case 1:var s=y0;break;case 4:s=v0;break;default:s=Ic}r=s.bind(null,e,r,t),s=void 0,!dd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function ml(t,e,r,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var d=i.stateNode.containerInfo;if(d===s||d.nodeType===8&&d.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;d!==null;){if(a=cn(d),a===null)return;if(l=a.tag,l===5||l===6){i=o=a;continue e}d=d.parentNode}}i=i.return}Ff(function(){var c=o,u=zc(r),h=[];e:{var p=xg.get(t);if(p!==void 0){var f=Ac,x=t;switch(t){case"keypress":if(Eo(r)===0)break e;case"keydown":case"keyup":f=O0;break;case"focusin":x="focus",f=cl;break;case"focusout":x="blur",f=cl;break;case"beforeblur":case"afterblur":f=cl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Zu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=w0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=N0;break;case pg:case hg:case fg:f=_0;break;case gg:f=B0;break;case"scroll":f=b0;break;case"wheel":f=F0;break;case"copy":case"cut":case"paste":f=z0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=tp}var y=(e&4)!==0,v=!y&&t==="scroll",g=y?p!==null?p+"Capture":null:p;y=[];for(var m=c,b;m!==null;){b=m;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,g!==null&&(j=us(m,g),j!=null&&y.push(ys(m,j,b)))),v)break;m=m.return}0<y.length&&(p=new f(p,x,null,r,u),h.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&r!==ad&&(x=r.relatedTarget||r.fromElement)&&(cn(x)||x[cr]))break e;if((f||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,f?(x=r.relatedTarget||r.toElement,f=c,x=x?cn(x):null,x!==null&&(v=zn(x),x!==v||x.tag!==5&&x.tag!==6)&&(x=null)):(f=null,x=c),f!==x)){if(y=Zu,j="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(y=tp,j="onPointerLeave",g="onPointerEnter",m="pointer"),v=f==null?p:Gn(f),b=x==null?p:Gn(x),p=new y(j,m+"leave",f,r,u),p.target=v,p.relatedTarget=b,j=null,cn(u)===c&&(y=new y(g,m+"enter",x,r,u),y.target=b,y.relatedTarget=v,j=y),v=j,f&&x)t:{for(y=f,g=x,m=0,b=y;b;b=Pn(b))m++;for(b=0,j=g;j;j=Pn(j))b++;for(;0<m-b;)y=Pn(y),m--;for(;0<b-m;)g=Pn(g),b--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=Pn(y),g=Pn(g)}y=null}else y=null;f!==null&&pp(h,p,f,y,!1),x!==null&&v!==null&&pp(h,v,x,y,!0)}}e:{if(p=c?Gn(c):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var R=K0;else if(ip(p))if(ag)R=X0;else{R=Q0;var T=J0}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=Y0);if(R&&(R=R(t,c))){og(h,R,r,u);break e}T&&T(t,p,c),t==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&rd(p,"number",p.value)}switch(T=c?Gn(c):window,t){case"focusin":(ip(T)||T.contentEditable==="true")&&(Vn=T,fd=c,ts=null);break;case"focusout":ts=fd=Vn=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,dp(h,r,u);break;case"selectionchange":if(t1)break;case"keydown":case"keyup":dp(h,r,u)}var k;if(Lc)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else qn?ig(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(ng&&r.locale!=="ko"&&(qn||P!=="onCompositionStart"?P==="onCompositionEnd"&&qn&&(k=rg()):(Rr=u,Pc="value"in Rr?Rr.value:Rr.textContent,qn=!0)),T=Jo(c,P),0<T.length&&(P=new ep(P,t,null,r,u),h.push({event:P,listeners:T}),k?P.data=k:(k=sg(r),k!==null&&(P.data=k)))),(k=U0?q0(t,r):V0(t,r))&&(c=Jo(c,"onBeforeInput"),0<c.length&&(u=new ep("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:c}),u.data=k))}mg(h,e)})}function ys(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Jo(t,e){for(var r=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=us(t,r),o!=null&&i.unshift(ys(t,o,s)),o=us(t,e),o!=null&&i.push(ys(t,o,s))),t=t.return}return i}function Pn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pp(t,e,r,i,s){for(var o=e._reactName,a=[];r!==null&&r!==i;){var d=r,l=d.alternate,c=d.stateNode;if(l!==null&&l===i)break;d.tag===5&&c!==null&&(d=c,s?(l=us(r,o),l!=null&&a.unshift(ys(r,l,d))):s||(l=us(r,o),l!=null&&a.push(ys(r,l,d)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var s1=/\r\n?/g,o1=/\u0000|\uFFFD/g;function hp(t){return(typeof t=="string"?t:""+t).replace(s1,`
`).replace(o1,"")}function no(t,e,r){if(e=hp(e),hp(t)!==e&&r)throw Error(U(425))}function Qo(){}var xd=null,md=null;function yd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vd=typeof setTimeout=="function"?setTimeout:void 0,a1=typeof clearTimeout=="function"?clearTimeout:void 0,fp=typeof Promise=="function"?Promise:void 0,l1=typeof queueMicrotask=="function"?queueMicrotask:typeof fp<"u"?function(t){return fp.resolve(null).then(t).catch(d1)}:vd;function d1(t){setTimeout(function(){throw t})}function yl(t,e){var r=e,i=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){t.removeChild(s),fs(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);fs(e)}function Or(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var wi=Math.random().toString(36).slice(2),Qt="__reactFiber$"+wi,vs="__reactProps$"+wi,cr="__reactContainer$"+wi,bd="__reactEvents$"+wi,c1="__reactListeners$"+wi,u1="__reactHandles$"+wi;function cn(t){var e=t[Qt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[cr]||r[Qt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=gp(t);t!==null;){if(r=t[Qt])return r;t=gp(t)}return e}t=r,r=t.parentNode}return null}function $s(t){return t=t[Qt]||t[cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function La(t){return t[vs]||null}var jd=[],Kn=-1;function Vr(t){return{current:t}}function pe(t){0>Kn||(t.current=jd[Kn],jd[Kn]=null,Kn--)}function ce(t,e){Kn++,jd[Kn]=t.current,t.current=e}var Wr={},Ge=Vr(Wr),at=Vr(!1),mn=Wr;function ci(t,e){var r=t.type.contextTypes;if(!r)return Wr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function lt(t){return t=t.childContextTypes,t!=null}function Yo(){pe(at),pe(Ge)}function xp(t,e,r){if(Ge.current!==Wr)throw Error(U(168));ce(Ge,e),ce(at,r)}function vg(t,e,r){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(U(108,Jy(t)||"Unknown",s));return ye({},r,i)}function Xo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wr,mn=Ge.current,ce(Ge,t),ce(at,at.current),!0}function mp(t,e,r){var i=t.stateNode;if(!i)throw Error(U(169));r?(t=vg(t,e,mn),i.__reactInternalMemoizedMergedChildContext=t,pe(at),pe(Ge),ce(Ge,t)):pe(at),ce(at,r)}var sr=null,Da=!1,vl=!1;function bg(t){sr===null?sr=[t]:sr.push(t)}function p1(t){Da=!0,bg(t)}function Hr(){if(!vl&&sr!==null){vl=!0;var t=0,e=se;try{var r=sr;for(se=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}sr=null,Da=!1}catch(s){throw sr!==null&&(sr=sr.slice(t+1)),Vf(Rc,Hr),s}finally{se=e,vl=!1}}return null}var Jn=[],Qn=0,Zo=null,ea=0,jt=[],wt=0,yn=null,or=1,ar="";function rn(t,e){Jn[Qn++]=ea,Jn[Qn++]=Zo,Zo=t,ea=e}function jg(t,e,r){jt[wt++]=or,jt[wt++]=ar,jt[wt++]=yn,yn=t;var i=or;t=ar;var s=32-Mt(i)-1;i&=~(1<<s),r+=1;var o=32-Mt(e)+s;if(30<o){var a=s-s%5;o=(i&(1<<a)-1).toString(32),i>>=a,s-=a,or=1<<32-Mt(e)+s|r<<s|i,ar=o+t}else or=1<<o|r<<s|i,ar=t}function Nc(t){t.return!==null&&(rn(t,1),jg(t,1,0))}function Mc(t){for(;t===Zo;)Zo=Jn[--Qn],Jn[Qn]=null,ea=Jn[--Qn],Jn[Qn]=null;for(;t===yn;)yn=jt[--wt],jt[wt]=null,ar=jt[--wt],jt[wt]=null,or=jt[--wt],jt[wt]=null}var gt=null,ft=null,fe=!1,Dt=null;function wg(t,e){var r=St(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function yp(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gt=t,ft=Or(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gt=t,ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=yn!==null?{id:or,overflow:ar}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=St(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,gt=t,ft=null,!0):!1;default:return!1}}function wd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sd(t){if(fe){var e=ft;if(e){var r=e;if(!yp(t,e)){if(wd(t))throw Error(U(418));e=Or(r.nextSibling);var i=gt;e&&yp(t,e)?wg(i,r):(t.flags=t.flags&-4097|2,fe=!1,gt=t)}}else{if(wd(t))throw Error(U(418));t.flags=t.flags&-4097|2,fe=!1,gt=t}}}function vp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gt=t}function io(t){if(t!==gt)return!1;if(!fe)return vp(t),fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yd(t.type,t.memoizedProps)),e&&(e=ft)){if(wd(t))throw Sg(),Error(U(418));for(;e;)wg(t,e),e=Or(e.nextSibling)}if(vp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ft=Or(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ft=null}}else ft=gt?Or(t.stateNode.nextSibling):null;return!0}function Sg(){for(var t=ft;t;)t=Or(t.nextSibling)}function ui(){ft=gt=null,fe=!1}function Bc(t){Dt===null?Dt=[t]:Dt.push(t)}var h1=fr.ReactCurrentBatchConfig;function Li(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(U(309));var i=r.stateNode}if(!i)throw Error(U(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var d=s.refs;a===null?delete d[o]:d[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(U(284));if(!r._owner)throw Error(U(290,t))}return t}function so(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bp(t){var e=t._init;return e(t._payload)}function kg(t){function e(g,m){if(t){var b=g.deletions;b===null?(g.deletions=[m],g.flags|=16):b.push(m)}}function r(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function i(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=Mr(g,m),g.index=0,g.sibling=null,g}function o(g,m,b){return g.index=b,t?(b=g.alternate,b!==null?(b=b.index,b<m?(g.flags|=2,m):b):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return t&&g.alternate===null&&(g.flags|=2),g}function d(g,m,b,j){return m===null||m.tag!==6?(m=Cl(b,g.mode,j),m.return=g,m):(m=s(m,b),m.return=g,m)}function l(g,m,b,j){var R=b.type;return R===Un?u(g,m,b.props.children,j,b.key):m!==null&&(m.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===wr&&bp(R)===m.type)?(j=s(m,b.props),j.ref=Li(g,m,b),j.return=g,j):(j=Do(b.type,b.key,b.props,null,g.mode,j),j.ref=Li(g,m,b),j.return=g,j)}function c(g,m,b,j){return m===null||m.tag!==4||m.stateNode.containerInfo!==b.containerInfo||m.stateNode.implementation!==b.implementation?(m=zl(b,g.mode,j),m.return=g,m):(m=s(m,b.children||[]),m.return=g,m)}function u(g,m,b,j,R){return m===null||m.tag!==7?(m=gn(b,g.mode,j,R),m.return=g,m):(m=s(m,b),m.return=g,m)}function h(g,m,b){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Cl(""+m,g.mode,b),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ks:return b=Do(m.type,m.key,m.props,null,g.mode,b),b.ref=Li(g,null,m),b.return=g,b;case Wn:return m=zl(m,g.mode,b),m.return=g,m;case wr:var j=m._init;return h(g,j(m._payload),b)}if(qi(m)||Ti(m))return m=gn(m,g.mode,b,null),m.return=g,m;so(g,m)}return null}function p(g,m,b,j){var R=m!==null?m.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return R!==null?null:d(g,m,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ks:return b.key===R?l(g,m,b,j):null;case Wn:return b.key===R?c(g,m,b,j):null;case wr:return R=b._init,p(g,m,R(b._payload),j)}if(qi(b)||Ti(b))return R!==null?null:u(g,m,b,j,null);so(g,b)}return null}function f(g,m,b,j,R){if(typeof j=="string"&&j!==""||typeof j=="number")return g=g.get(b)||null,d(m,g,""+j,R);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ks:return g=g.get(j.key===null?b:j.key)||null,l(m,g,j,R);case Wn:return g=g.get(j.key===null?b:j.key)||null,c(m,g,j,R);case wr:var T=j._init;return f(g,m,b,T(j._payload),R)}if(qi(j)||Ti(j))return g=g.get(b)||null,u(m,g,j,R,null);so(m,j)}return null}function x(g,m,b,j){for(var R=null,T=null,k=m,P=m=0,I=null;k!==null&&P<b.length;P++){k.index>P?(I=k,k=null):I=k.sibling;var E=p(g,k,b[P],j);if(E===null){k===null&&(k=I);break}t&&k&&E.alternate===null&&e(g,k),m=o(E,m,P),T===null?R=E:T.sibling=E,T=E,k=I}if(P===b.length)return r(g,k),fe&&rn(g,P),R;if(k===null){for(;P<b.length;P++)k=h(g,b[P],j),k!==null&&(m=o(k,m,P),T===null?R=k:T.sibling=k,T=k);return fe&&rn(g,P),R}for(k=i(g,k);P<b.length;P++)I=f(k,g,P,b[P],j),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?P:I.key),m=o(I,m,P),T===null?R=I:T.sibling=I,T=I);return t&&k.forEach(function(A){return e(g,A)}),fe&&rn(g,P),R}function y(g,m,b,j){var R=Ti(b);if(typeof R!="function")throw Error(U(150));if(b=R.call(b),b==null)throw Error(U(151));for(var T=R=null,k=m,P=m=0,I=null,E=b.next();k!==null&&!E.done;P++,E=b.next()){k.index>P?(I=k,k=null):I=k.sibling;var A=p(g,k,E.value,j);if(A===null){k===null&&(k=I);break}t&&k&&A.alternate===null&&e(g,k),m=o(A,m,P),T===null?R=A:T.sibling=A,T=A,k=I}if(E.done)return r(g,k),fe&&rn(g,P),R;if(k===null){for(;!E.done;P++,E=b.next())E=h(g,E.value,j),E!==null&&(m=o(E,m,P),T===null?R=E:T.sibling=E,T=E);return fe&&rn(g,P),R}for(k=i(g,k);!E.done;P++,E=b.next())E=f(k,g,P,E.value,j),E!==null&&(t&&E.alternate!==null&&k.delete(E.key===null?P:E.key),m=o(E,m,P),T===null?R=E:T.sibling=E,T=E);return t&&k.forEach(function(O){return e(g,O)}),fe&&rn(g,P),R}function v(g,m,b,j){if(typeof b=="object"&&b!==null&&b.type===Un&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ks:e:{for(var R=b.key,T=m;T!==null;){if(T.key===R){if(R=b.type,R===Un){if(T.tag===7){r(g,T.sibling),m=s(T,b.props.children),m.return=g,g=m;break e}}else if(T.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===wr&&bp(R)===T.type){r(g,T.sibling),m=s(T,b.props),m.ref=Li(g,T,b),m.return=g,g=m;break e}r(g,T);break}else e(g,T);T=T.sibling}b.type===Un?(m=gn(b.props.children,g.mode,j,b.key),m.return=g,g=m):(j=Do(b.type,b.key,b.props,null,g.mode,j),j.ref=Li(g,m,b),j.return=g,g=j)}return a(g);case Wn:e:{for(T=b.key;m!==null;){if(m.key===T)if(m.tag===4&&m.stateNode.containerInfo===b.containerInfo&&m.stateNode.implementation===b.implementation){r(g,m.sibling),m=s(m,b.children||[]),m.return=g,g=m;break e}else{r(g,m);break}else e(g,m);m=m.sibling}m=zl(b,g.mode,j),m.return=g,g=m}return a(g);case wr:return T=b._init,v(g,m,T(b._payload),j)}if(qi(b))return x(g,m,b,j);if(Ti(b))return y(g,m,b,j);so(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,m!==null&&m.tag===6?(r(g,m.sibling),m=s(m,b),m.return=g,g=m):(r(g,m),m=Cl(b,g.mode,j),m.return=g,g=m),a(g)):r(g,m)}return v}var pi=kg(!0),_g=kg(!1),ta=Vr(null),ra=null,Yn=null,$c=null;function Fc(){$c=Yn=ra=null}function Wc(t){var e=ta.current;pe(ta),t._currentValue=e}function kd(t,e,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===r)break;t=t.return}}function ii(t,e){ra=t,$c=Yn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(st=!0),t.firstContext=null)}function Ct(t){var e=t._currentValue;if($c!==t)if(t={context:t,memoizedValue:e,next:null},Yn===null){if(ra===null)throw Error(U(308));Yn=t,ra.dependencies={lanes:0,firstContext:t}}else Yn=Yn.next=t;return e}var un=null;function Uc(t){un===null?un=[t]:un.push(t)}function Cg(t,e,r,i){var s=e.interleaved;return s===null?(r.next=r,Uc(e)):(r.next=s.next,s.next=r),e.interleaved=r,ur(t,i)}function ur(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Sr=!1;function qc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function lr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ie&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,ur(t,r)}return s=i.interleaved,s===null?(e.next=e,Uc(i)):(e.next=s.next,s.next=e),i.interleaved=e,ur(t,r)}function To(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,Ec(t,r)}}function jp(t,e){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function na(t,e,r,i){var s=t.updateQueue;Sr=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,d=s.shared.pending;if(d!==null){s.shared.pending=null;var l=d,c=l.next;l.next=null,a===null?o=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,d=u.lastBaseUpdate,d!==a&&(d===null?u.firstBaseUpdate=c:d.next=c,u.lastBaseUpdate=l))}if(o!==null){var h=s.baseState;a=0,u=c=l=null,d=o;do{var p=d.lane,f=d.eventTime;if((i&p)===p){u!==null&&(u=u.next={eventTime:f,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var x=t,y=d;switch(p=e,f=r,y.tag){case 1:if(x=y.payload,typeof x=="function"){h=x.call(f,h,p);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,p=typeof x=="function"?x.call(f,h,p):x,p==null)break e;h=ye({},h,p);break e;case 2:Sr=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[d]:p.push(d))}else f={eventTime:f,lane:p,tag:d.tag,payload:d.payload,callback:d.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,a|=p;if(d=d.next,d===null){if(d=s.shared.pending,d===null)break;p=d,d=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);bn|=a,t.lanes=a,t.memoizedState=h}}function wp(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(U(191,s));s.call(i)}}}var Fs={},er=Vr(Fs),bs=Vr(Fs),js=Vr(Fs);function pn(t){if(t===Fs)throw Error(U(174));return t}function Vc(t,e){switch(ce(js,e),ce(bs,t),ce(er,Fs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:id(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=id(e,t)}pe(er),ce(er,e)}function hi(){pe(er),pe(bs),pe(js)}function Rg(t){pn(js.current);var e=pn(er.current),r=id(e,t.type);e!==r&&(ce(bs,t),ce(er,r))}function Hc(t){bs.current===t&&(pe(er),pe(bs))}var xe=Vr(0);function ia(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bl=[];function Gc(){for(var t=0;t<bl.length;t++)bl[t]._workInProgressVersionPrimary=null;bl.length=0}var Io=fr.ReactCurrentDispatcher,jl=fr.ReactCurrentBatchConfig,vn=0,me=null,Ee=null,Pe=null,sa=!1,rs=!1,ws=0,f1=0;function We(){throw Error(U(321))}function Kc(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ft(t[r],e[r]))return!1;return!0}function Jc(t,e,r,i,s,o){if(vn=o,me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Io.current=t===null||t.memoizedState===null?y1:v1,t=r(i,s),rs){o=0;do{if(rs=!1,ws=0,25<=o)throw Error(U(301));o+=1,Pe=Ee=null,e.updateQueue=null,Io.current=b1,t=r(i,s)}while(rs)}if(Io.current=oa,e=Ee!==null&&Ee.next!==null,vn=0,Pe=Ee=me=null,sa=!1,e)throw Error(U(300));return t}function Qc(){var t=ws!==0;return ws=0,t}function Ht(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?me.memoizedState=Pe=t:Pe=Pe.next=t,Pe}function zt(){if(Ee===null){var t=me.alternate;t=t!==null?t.memoizedState:null}else t=Ee.next;var e=Pe===null?me.memoizedState:Pe.next;if(e!==null)Pe=e,Ee=t;else{if(t===null)throw Error(U(310));Ee=t,t={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Pe===null?me.memoizedState=Pe=t:Pe=Pe.next=t}return Pe}function Ss(t,e){return typeof e=="function"?e(t):e}function wl(t){var e=zt(),r=e.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=t;var i=Ee,s=i.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}i.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,i=i.baseState;var d=a=null,l=null,c=o;do{var u=c.lane;if((vn&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(d=l=h,a=i):l=l.next=h,me.lanes|=u,bn|=u}c=c.next}while(c!==null&&c!==o);l===null?a=i:l.next=d,Ft(i,e.memoizedState)||(st=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=l,r.lastRenderedState=i}if(t=r.interleaved,t!==null){s=t;do o=s.lane,me.lanes|=o,bn|=o,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Sl(t){var e=zt(),r=e.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=t;var i=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=t(o,a.action),a=a.next;while(a!==s);Ft(o,e.memoizedState)||(st=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,i]}function Eg(){}function Tg(t,e){var r=me,i=zt(),s=e(),o=!Ft(i.memoizedState,s);if(o&&(i.memoizedState=s,st=!0),i=i.queue,Yc(Ag.bind(null,r,i,t),[t]),i.getSnapshot!==e||o||Pe!==null&&Pe.memoizedState.tag&1){if(r.flags|=2048,ks(9,Pg.bind(null,r,i,s,e),void 0,null),Ae===null)throw Error(U(349));vn&30||Ig(r,e,s)}return s}function Ig(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Pg(t,e,r,i){e.value=r,e.getSnapshot=i,Og(e)&&Lg(t)}function Ag(t,e,r){return r(function(){Og(e)&&Lg(t)})}function Og(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ft(t,r)}catch{return!0}}function Lg(t){var e=ur(t,1);e!==null&&Bt(e,t,1,-1)}function Sp(t){var e=Ht();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:t},e.queue=t,t=t.dispatch=m1.bind(null,me,t),[e.memoizedState,t]}function ks(t,e,r,i){return t={tag:t,create:e,destroy:r,deps:i,next:null},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,e.lastEffect=t)),t}function Dg(){return zt().memoizedState}function Po(t,e,r,i){var s=Ht();me.flags|=t,s.memoizedState=ks(1|e,r,void 0,i===void 0?null:i)}function Na(t,e,r,i){var s=zt();i=i===void 0?null:i;var o=void 0;if(Ee!==null){var a=Ee.memoizedState;if(o=a.destroy,i!==null&&Kc(i,a.deps)){s.memoizedState=ks(e,r,o,i);return}}me.flags|=t,s.memoizedState=ks(1|e,r,o,i)}function kp(t,e){return Po(8390656,8,t,e)}function Yc(t,e){return Na(2048,8,t,e)}function Ng(t,e){return Na(4,2,t,e)}function Mg(t,e){return Na(4,4,t,e)}function Bg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $g(t,e,r){return r=r!=null?r.concat([t]):null,Na(4,4,Bg.bind(null,e,t),r)}function Xc(){}function Fg(t,e){var r=zt();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Kc(e,i[1])?i[0]:(r.memoizedState=[t,e],t)}function Wg(t,e){var r=zt();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Kc(e,i[1])?i[0]:(t=t(),r.memoizedState=[t,e],t)}function Ug(t,e,r){return vn&21?(Ft(r,e)||(r=Kf(),me.lanes|=r,bn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,st=!0),t.memoizedState=r)}function g1(t,e){var r=se;se=r!==0&&4>r?r:4,t(!0);var i=jl.transition;jl.transition={};try{t(!1),e()}finally{se=r,jl.transition=i}}function qg(){return zt().memoizedState}function x1(t,e,r){var i=Nr(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Vg(t))Hg(e,r);else if(r=Cg(t,e,r,i),r!==null){var s=Qe();Bt(r,t,i,s),Gg(r,e,i)}}function m1(t,e,r){var i=Nr(t),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Vg(t))Hg(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,d=o(a,r);if(s.hasEagerState=!0,s.eagerState=d,Ft(d,a)){var l=e.interleaved;l===null?(s.next=s,Uc(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=Cg(t,e,s,i),r!==null&&(s=Qe(),Bt(r,t,i,s),Gg(r,e,i))}}function Vg(t){var e=t.alternate;return t===me||e!==null&&e===me}function Hg(t,e){rs=sa=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Gg(t,e,r){if(r&4194240){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,Ec(t,r)}}var oa={readContext:Ct,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},y1={readContext:Ct,useCallback:function(t,e){return Ht().memoizedState=[t,e===void 0?null:e],t},useContext:Ct,useEffect:kp,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Po(4194308,4,Bg.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Po(4194308,4,t,e)},useInsertionEffect:function(t,e){return Po(4,2,t,e)},useMemo:function(t,e){var r=Ht();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var i=Ht();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=x1.bind(null,me,t),[i.memoizedState,t]},useRef:function(t){var e=Ht();return t={current:t},e.memoizedState=t},useState:Sp,useDebugValue:Xc,useDeferredValue:function(t){return Ht().memoizedState=t},useTransition:function(){var t=Sp(!1),e=t[0];return t=g1.bind(null,t[1]),Ht().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var i=me,s=Ht();if(fe){if(r===void 0)throw Error(U(407));r=r()}else{if(r=e(),Ae===null)throw Error(U(349));vn&30||Ig(i,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,kp(Ag.bind(null,i,o,t),[t]),i.flags|=2048,ks(9,Pg.bind(null,i,o,r,e),void 0,null),r},useId:function(){var t=Ht(),e=Ae.identifierPrefix;if(fe){var r=ar,i=or;r=(i&~(1<<32-Mt(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=ws++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=f1++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},v1={readContext:Ct,useCallback:Fg,useContext:Ct,useEffect:Yc,useImperativeHandle:$g,useInsertionEffect:Ng,useLayoutEffect:Mg,useMemo:Wg,useReducer:wl,useRef:Dg,useState:function(){return wl(Ss)},useDebugValue:Xc,useDeferredValue:function(t){var e=zt();return Ug(e,Ee.memoizedState,t)},useTransition:function(){var t=wl(Ss)[0],e=zt().memoizedState;return[t,e]},useMutableSource:Eg,useSyncExternalStore:Tg,useId:qg,unstable_isNewReconciler:!1},b1={readContext:Ct,useCallback:Fg,useContext:Ct,useEffect:Yc,useImperativeHandle:$g,useInsertionEffect:Ng,useLayoutEffect:Mg,useMemo:Wg,useReducer:Sl,useRef:Dg,useState:function(){return Sl(Ss)},useDebugValue:Xc,useDeferredValue:function(t){var e=zt();return Ee===null?e.memoizedState=t:Ug(e,Ee.memoizedState,t)},useTransition:function(){var t=Sl(Ss)[0],e=zt().memoizedState;return[t,e]},useMutableSource:Eg,useSyncExternalStore:Tg,useId:qg,unstable_isNewReconciler:!1};function Pt(t,e){if(t&&t.defaultProps){e=ye({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function _d(t,e,r,i){e=t.memoizedState,r=r(i,e),r=r==null?e:ye({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ma={isMounted:function(t){return(t=t._reactInternals)?zn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var i=Qe(),s=Nr(t),o=lr(i,s);o.payload=e,r!=null&&(o.callback=r),e=Lr(t,o,s),e!==null&&(Bt(e,t,s,i),To(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var i=Qe(),s=Nr(t),o=lr(i,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Lr(t,o,s),e!==null&&(Bt(e,t,s,i),To(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Qe(),i=Nr(t),s=lr(r,i);s.tag=2,e!=null&&(s.callback=e),e=Lr(t,s,i),e!==null&&(Bt(e,t,i,r),To(e,t,i))}};function _p(t,e,r,i,s,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!xs(r,i)||!xs(s,o):!0}function Kg(t,e,r){var i=!1,s=Wr,o=e.contextType;return typeof o=="object"&&o!==null?o=Ct(o):(s=lt(e)?mn:Ge.current,i=e.contextTypes,o=(i=i!=null)?ci(t,s):Wr),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ma,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function Cp(t,e,r,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==t&&Ma.enqueueReplaceState(e,e.state,null)}function Cd(t,e,r,i){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},qc(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Ct(o):(o=lt(e)?mn:Ge.current,s.context=ci(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(_d(t,e,o,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ma.enqueueReplaceState(s,s.state,null),na(t,r,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function fi(t,e){try{var r="",i=e;do r+=Ky(i),i=i.return;while(i);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function kl(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function zd(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var j1=typeof WeakMap=="function"?WeakMap:Map;function Jg(t,e,r){r=lr(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){la||(la=!0,Nd=i),zd(t,e)},r}function Qg(t,e,r){r=lr(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){zd(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){zd(t,e),typeof i!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function zp(t,e,r){var i=t.pingCache;if(i===null){i=t.pingCache=new j1;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),t=L1.bind(null,t,e,r),e.then(t,t))}function Rp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ep(t,e,r,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=lr(-1,1),e.tag=2,Lr(r,e,1))),r.lanes|=1),t)}var w1=fr.ReactCurrentOwner,st=!1;function Je(t,e,r,i){e.child=t===null?_g(e,null,r,i):pi(e,t.child,r,i)}function Tp(t,e,r,i,s){r=r.render;var o=e.ref;return ii(e,s),i=Jc(t,e,r,i,o,s),r=Qc(),t!==null&&!st?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pr(t,e,s)):(fe&&r&&Nc(e),e.flags|=1,Je(t,e,i,s),e.child)}function Ip(t,e,r,i,s){if(t===null){var o=r.type;return typeof o=="function"&&!ou(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,Yg(t,e,o,i,s)):(t=Do(r.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:xs,r(a,i)&&t.ref===e.ref)return pr(t,e,s)}return e.flags|=1,t=Mr(o,i),t.ref=e.ref,t.return=e,e.child=t}function Yg(t,e,r,i,s){if(t!==null){var o=t.memoizedProps;if(xs(o,i)&&t.ref===e.ref)if(st=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(st=!0);else return e.lanes=t.lanes,pr(t,e,s)}return Rd(t,e,r,i,s)}function Xg(t,e,r){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(Zn,pt),pt|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ce(Zn,pt),pt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:r,ce(Zn,pt),pt|=i}else o!==null?(i=o.baseLanes|r,e.memoizedState=null):i=r,ce(Zn,pt),pt|=i;return Je(t,e,s,r),e.child}function Zg(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Rd(t,e,r,i,s){var o=lt(r)?mn:Ge.current;return o=ci(e,o),ii(e,s),r=Jc(t,e,r,i,o,s),i=Qc(),t!==null&&!st?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pr(t,e,s)):(fe&&i&&Nc(e),e.flags|=1,Je(t,e,r,s),e.child)}function Pp(t,e,r,i,s){if(lt(r)){var o=!0;Xo(e)}else o=!1;if(ii(e,s),e.stateNode===null)Ao(t,e),Kg(e,r,i),Cd(e,r,i,s),i=!0;else if(t===null){var a=e.stateNode,d=e.memoizedProps;a.props=d;var l=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Ct(c):(c=lt(r)?mn:Ge.current,c=ci(e,c));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(d!==i||l!==c)&&Cp(e,a,i,c),Sr=!1;var p=e.memoizedState;a.state=p,na(e,i,a,s),l=e.memoizedState,d!==i||p!==l||at.current||Sr?(typeof u=="function"&&(_d(e,r,u,i),l=e.memoizedState),(d=Sr||_p(e,r,d,i,p,l,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=d):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,zg(t,e),d=e.memoizedProps,c=e.type===e.elementType?d:Pt(e.type,d),a.props=c,h=e.pendingProps,p=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ct(l):(l=lt(r)?mn:Ge.current,l=ci(e,l));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(d!==h||p!==l)&&Cp(e,a,i,l),Sr=!1,p=e.memoizedState,a.state=p,na(e,i,a,s);var x=e.memoizedState;d!==h||p!==x||at.current||Sr?(typeof f=="function"&&(_d(e,r,f,i),x=e.memoizedState),(c=Sr||_p(e,r,c,i,p,x,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,x,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,x,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||d===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=x),a.props=i,a.state=x,a.context=l,i=c):(typeof a.componentDidUpdate!="function"||d===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return Ed(t,e,r,i,o,s)}function Ed(t,e,r,i,s,o){Zg(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&mp(e,r,!1),pr(t,e,o);i=e.stateNode,w1.current=e;var d=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=pi(e,t.child,null,o),e.child=pi(e,null,d,o)):Je(t,e,d,o),e.memoizedState=i.state,s&&mp(e,r,!0),e.child}function ex(t){var e=t.stateNode;e.pendingContext?xp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xp(t,e.context,!1),Vc(t,e.containerInfo)}function Ap(t,e,r,i,s){return ui(),Bc(s),e.flags|=256,Je(t,e,r,i),e.child}var Td={dehydrated:null,treeContext:null,retryLane:0};function Id(t){return{baseLanes:t,cachePool:null,transitions:null}}function tx(t,e,r){var i=e.pendingProps,s=xe.current,o=!1,a=(e.flags&128)!==0,d;if((d=a)||(d=t!==null&&t.memoizedState===null?!1:(s&2)!==0),d?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ce(xe,s&1),t===null)return Sd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Fa(a,i,0,null),t=gn(t,i,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Id(r),e.memoizedState=Td,t):Zc(e,a));if(s=t.memoizedState,s!==null&&(d=s.dehydrated,d!==null))return S1(t,e,a,i,d,s,r);if(o){o=i.fallback,a=e.mode,s=t.child,d=s.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Mr(s,l),i.subtreeFlags=s.subtreeFlags&14680064),d!==null?o=Mr(d,o):(o=gn(o,a,r,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Id(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~r,e.memoizedState=Td,i}return o=t.child,t=o.sibling,i=Mr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function Zc(t,e){return e=Fa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oo(t,e,r,i){return i!==null&&Bc(i),pi(e,t.child,null,r),t=Zc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function S1(t,e,r,i,s,o,a){if(r)return e.flags&256?(e.flags&=-257,i=kl(Error(U(422))),oo(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=Fa({mode:"visible",children:i.children},s,0,null),o=gn(o,s,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&pi(e,t.child,null,a),e.child.memoizedState=Id(a),e.memoizedState=Td,o);if(!(e.mode&1))return oo(t,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var d=i.dgst;return i=d,o=Error(U(419)),i=kl(o,i,void 0),oo(t,e,a,i)}if(d=(a&t.childLanes)!==0,st||d){if(i=Ae,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,ur(t,s),Bt(i,t,s,-1))}return su(),i=kl(Error(U(421))),oo(t,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=D1.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,ft=Or(s.nextSibling),gt=e,fe=!0,Dt=null,t!==null&&(jt[wt++]=or,jt[wt++]=ar,jt[wt++]=yn,or=t.id,ar=t.overflow,yn=e),e=Zc(e,i.children),e.flags|=4096,e)}function Op(t,e,r){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),kd(t.return,e,r)}function _l(t,e,r,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=s)}function rx(t,e,r){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Je(t,e,i.children,r),i=xe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Op(t,r,e);else if(t.tag===19)Op(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ce(xe,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&ia(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),_l(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ia(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}_l(e,!0,r,null,o);break;case"together":_l(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ao(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),bn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,r=Mr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Mr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function k1(t,e,r){switch(e.tag){case 3:ex(e),ui();break;case 5:Rg(e);break;case 1:lt(e.type)&&Xo(e);break;case 4:Vc(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ce(ta,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ce(xe,xe.current&1),e.flags|=128,null):r&e.child.childLanes?tx(t,e,r):(ce(xe,xe.current&1),t=pr(t,e,r),t!==null?t.sibling:null);ce(xe,xe.current&1);break;case 19:if(i=(r&e.childLanes)!==0,t.flags&128){if(i)return rx(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ce(xe,xe.current),i)break;return null;case 22:case 23:return e.lanes=0,Xg(t,e,r)}return pr(t,e,r)}var nx,Pd,ix,sx;nx=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Pd=function(){};ix=function(t,e,r,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,pn(er.current);var o=null;switch(r){case"input":s=ed(t,s),i=ed(t,i),o=[];break;case"select":s=ye({},s,{value:void 0}),i=ye({},i,{value:void 0}),o=[];break;case"textarea":s=nd(t,s),i=nd(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Qo)}sd(r,i);var a;r=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var d=s[c];for(a in d)d.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ds.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var l=i[c];if(d=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==d&&(l!=null||d!=null))if(c==="style")if(d){for(a in d)!d.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&d[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(o||(o=[]),o.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,d=d?d.__html:void 0,l!=null&&d!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ds.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ue("scroll",t),o||d===l||(o=[])):(o=o||[]).push(c,l))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};sx=function(t,e,r,i){r!==i&&(e.flags|=4)};function Di(t,e){if(!fe)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ue(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=r,e}function _1(t,e,r){var i=e.pendingProps;switch(Mc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(e),null;case 1:return lt(e.type)&&Yo(),Ue(e),null;case 3:return i=e.stateNode,hi(),pe(at),pe(Ge),Gc(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(io(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dt!==null&&($d(Dt),Dt=null))),Pd(t,e),Ue(e),null;case 5:Hc(e);var s=pn(js.current);if(r=e.type,t!==null&&e.stateNode!=null)ix(t,e,r,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(U(166));return Ue(e),null}if(t=pn(er.current),io(e)){i=e.stateNode,r=e.type;var o=e.memoizedProps;switch(i[Qt]=e,i[vs]=o,t=(e.mode&1)!==0,r){case"dialog":ue("cancel",i),ue("close",i);break;case"iframe":case"object":case"embed":ue("load",i);break;case"video":case"audio":for(s=0;s<Hi.length;s++)ue(Hi[s],i);break;case"source":ue("error",i);break;case"img":case"image":case"link":ue("error",i),ue("load",i);break;case"details":ue("toggle",i);break;case"input":Uu(i,o),ue("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},ue("invalid",i);break;case"textarea":Vu(i,o),ue("invalid",i)}sd(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var d=o[a];a==="children"?typeof d=="string"?i.textContent!==d&&(o.suppressHydrationWarning!==!0&&no(i.textContent,d,t),s=["children",d]):typeof d=="number"&&i.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&no(i.textContent,d,t),s=["children",""+d]):ds.hasOwnProperty(a)&&d!=null&&a==="onScroll"&&ue("scroll",i)}switch(r){case"input":Js(i),qu(i,o,!0);break;case"textarea":Js(i),Hu(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Qo)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Af(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(r,{is:i.is}):(t=a.createElement(r),r==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,r),t[Qt]=e,t[vs]=i,nx(t,e,!1,!1),e.stateNode=t;e:{switch(a=od(r,i),r){case"dialog":ue("cancel",t),ue("close",t),s=i;break;case"iframe":case"object":case"embed":ue("load",t),s=i;break;case"video":case"audio":for(s=0;s<Hi.length;s++)ue(Hi[s],t);s=i;break;case"source":ue("error",t),s=i;break;case"img":case"image":case"link":ue("error",t),ue("load",t),s=i;break;case"details":ue("toggle",t),s=i;break;case"input":Uu(t,i),s=ed(t,i),ue("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=ye({},i,{value:void 0}),ue("invalid",t);break;case"textarea":Vu(t,i),s=nd(t,i),ue("invalid",t);break;default:s=i}sd(r,s),d=s;for(o in d)if(d.hasOwnProperty(o)){var l=d[o];o==="style"?Df(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Of(t,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&cs(t,l):typeof l=="number"&&cs(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ds.hasOwnProperty(o)?l!=null&&o==="onScroll"&&ue("scroll",t):l!=null&&Sc(t,o,l,a))}switch(r){case"input":Js(t),qu(t,i,!1);break;case"textarea":Js(t),Hu(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Fr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?ei(t,!!i.multiple,o,!1):i.defaultValue!=null&&ei(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Qo)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ue(e),null;case 6:if(t&&e.stateNode!=null)sx(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(r=pn(js.current),pn(er.current),io(e)){if(i=e.stateNode,r=e.memoizedProps,i[Qt]=e,(o=i.nodeValue!==r)&&(t=gt,t!==null))switch(t.tag){case 3:no(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&no(i.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Qt]=e,e.stateNode=i}return Ue(e),null;case 13:if(pe(xe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fe&&ft!==null&&e.mode&1&&!(e.flags&128))Sg(),ui(),e.flags|=98560,o=!1;else if(o=io(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(U(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(U(317));o[Qt]=e}else ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ue(e),o=!1}else Dt!==null&&($d(Dt),Dt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?Te===0&&(Te=3):su())),e.updateQueue!==null&&(e.flags|=4),Ue(e),null);case 4:return hi(),Pd(t,e),t===null&&ms(e.stateNode.containerInfo),Ue(e),null;case 10:return Wc(e.type._context),Ue(e),null;case 17:return lt(e.type)&&Yo(),Ue(e),null;case 19:if(pe(xe),o=e.memoizedState,o===null)return Ue(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Di(o,!1);else{if(Te!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ia(t),a!==null){for(e.flags|=128,Di(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)o=r,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ce(xe,xe.current&1|2),e.child}t=t.sibling}o.tail!==null&&be()>gi&&(e.flags|=128,i=!0,Di(o,!1),e.lanes=4194304)}else{if(!i)if(t=ia(a),t!==null){if(e.flags|=128,i=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Di(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!fe)return Ue(e),null}else 2*be()-o.renderingStartTime>gi&&r!==1073741824&&(e.flags|=128,i=!0,Di(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=be(),e.sibling=null,r=xe.current,ce(xe,i?r&1|2:r&1),e):(Ue(e),null);case 22:case 23:return iu(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?pt&1073741824&&(Ue(e),e.subtreeFlags&6&&(e.flags|=8192)):Ue(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function C1(t,e){switch(Mc(e),e.tag){case 1:return lt(e.type)&&Yo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hi(),pe(at),pe(Ge),Gc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hc(e),null;case 13:if(pe(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pe(xe),null;case 4:return hi(),null;case 10:return Wc(e.type._context),null;case 22:case 23:return iu(),null;case 24:return null;default:return null}}var ao=!1,qe=!1,z1=typeof WeakSet=="function"?WeakSet:Set,V=null;function Xn(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){ve(t,e,i)}else r.current=null}function Ad(t,e,r){try{r()}catch(i){ve(t,e,i)}}var Lp=!1;function R1(t,e){if(xd=Go,t=cg(),Dc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,d=-1,l=-1,c=0,u=0,h=t,p=null;t:for(;;){for(var f;h!==r||s!==0&&h.nodeType!==3||(d=a+s),h!==o||i!==0&&h.nodeType!==3||(l=a+i),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===t)break t;if(p===r&&++c===s&&(d=a),p===o&&++u===i&&(l=a),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}r=d===-1||l===-1?null:{start:d,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(md={focusedElem:t,selectionRange:r},Go=!1,V=e;V!==null;)if(e=V,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,V=t;else for(;V!==null;){e=V;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,v=x.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:Pt(e.type,y),v);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(j){ve(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,V=t;break}V=e.return}return x=Lp,Lp=!1,x}function ns(t,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Ad(e,r,o)}s=s.next}while(s!==i)}}function Ba(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function Od(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function ox(t){var e=t.alternate;e!==null&&(t.alternate=null,ox(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qt],delete e[vs],delete e[bd],delete e[c1],delete e[u1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ax(t){return t.tag===5||t.tag===3||t.tag===4}function Dp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ax(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ld(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Qo));else if(i!==4&&(t=t.child,t!==null))for(Ld(t,e,r),t=t.sibling;t!==null;)Ld(t,e,r),t=t.sibling}function Dd(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Dd(t,e,r),t=t.sibling;t!==null;)Dd(t,e,r),t=t.sibling}var Me=null,Ot=!1;function br(t,e,r){for(r=r.child;r!==null;)lx(t,e,r),r=r.sibling}function lx(t,e,r){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Ia,r)}catch{}switch(r.tag){case 5:qe||Xn(r,e);case 6:var i=Me,s=Ot;Me=null,br(t,e,r),Me=i,Ot=s,Me!==null&&(Ot?(t=Me,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Me.removeChild(r.stateNode));break;case 18:Me!==null&&(Ot?(t=Me,r=r.stateNode,t.nodeType===8?yl(t.parentNode,r):t.nodeType===1&&yl(t,r),fs(t)):yl(Me,r.stateNode));break;case 4:i=Me,s=Ot,Me=r.stateNode.containerInfo,Ot=!0,br(t,e,r),Me=i,Ot=s;break;case 0:case 11:case 14:case 15:if(!qe&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Ad(r,e,a),s=s.next}while(s!==i)}br(t,e,r);break;case 1:if(!qe&&(Xn(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(d){ve(r,e,d)}br(t,e,r);break;case 21:br(t,e,r);break;case 22:r.mode&1?(qe=(i=qe)||r.memoizedState!==null,br(t,e,r),qe=i):br(t,e,r);break;default:br(t,e,r)}}function Np(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new z1),e.forEach(function(i){var s=N1.bind(null,t,i);r.has(i)||(r.add(i),i.then(s,s))})}}function Tt(t,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var o=t,a=e,d=a;e:for(;d!==null;){switch(d.tag){case 5:Me=d.stateNode,Ot=!1;break e;case 3:Me=d.stateNode.containerInfo,Ot=!0;break e;case 4:Me=d.stateNode.containerInfo,Ot=!0;break e}d=d.return}if(Me===null)throw Error(U(160));lx(o,a,s),Me=null,Ot=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ve(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dx(e,t),e=e.sibling}function dx(t,e){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tt(e,t),qt(t),i&4){try{ns(3,t,t.return),Ba(3,t)}catch(y){ve(t,t.return,y)}try{ns(5,t,t.return)}catch(y){ve(t,t.return,y)}}break;case 1:Tt(e,t),qt(t),i&512&&r!==null&&Xn(r,r.return);break;case 5:if(Tt(e,t),qt(t),i&512&&r!==null&&Xn(r,r.return),t.flags&32){var s=t.stateNode;try{cs(s,"")}catch(y){ve(t,t.return,y)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,a=r!==null?r.memoizedProps:o,d=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&If(s,o),od(d,a);var c=od(d,o);for(a=0;a<l.length;a+=2){var u=l[a],h=l[a+1];u==="style"?Df(s,h):u==="dangerouslySetInnerHTML"?Of(s,h):u==="children"?cs(s,h):Sc(s,u,h,c)}switch(d){case"input":td(s,o);break;case"textarea":Pf(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?ei(s,!!o.multiple,f,!1):p!==!!o.multiple&&(o.defaultValue!=null?ei(s,!!o.multiple,o.defaultValue,!0):ei(s,!!o.multiple,o.multiple?[]:"",!1))}s[vs]=o}catch(y){ve(t,t.return,y)}}break;case 6:if(Tt(e,t),qt(t),i&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(y){ve(t,t.return,y)}}break;case 3:if(Tt(e,t),qt(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{fs(e.containerInfo)}catch(y){ve(t,t.return,y)}break;case 4:Tt(e,t),qt(t);break;case 13:Tt(e,t),qt(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(ru=be())),i&4&&Np(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(qe=(c=qe)||u,Tt(e,t),qe=c):Tt(e,t),qt(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(V=t,u=t.child;u!==null;){for(h=V=u;V!==null;){switch(p=V,f=p.child,p.tag){case 0:case 11:case 14:case 15:ns(4,p,p.return);break;case 1:Xn(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){i=p,r=p.return;try{e=i,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(y){ve(i,r,y)}}break;case 5:Xn(p,p.return);break;case 22:if(p.memoizedState!==null){Bp(h);continue}}f!==null?(f.return=p,V=f):Bp(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,d.style.display=Lf("display",a))}catch(y){ve(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){ve(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Tt(e,t),qt(t),i&4&&Np(t);break;case 21:break;default:Tt(e,t),qt(t)}}function qt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(ax(r)){var i=r;break e}r=r.return}throw Error(U(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(cs(s,""),i.flags&=-33);var o=Dp(t);Dd(t,o,s);break;case 3:case 4:var a=i.stateNode.containerInfo,d=Dp(t);Ld(t,d,a);break;default:throw Error(U(161))}}catch(l){ve(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function E1(t,e,r){V=t,cx(t)}function cx(t,e,r){for(var i=(t.mode&1)!==0;V!==null;){var s=V,o=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||ao;if(!a){var d=s.alternate,l=d!==null&&d.memoizedState!==null||qe;d=ao;var c=qe;if(ao=a,(qe=l)&&!c)for(V=s;V!==null;)a=V,l=a.child,a.tag===22&&a.memoizedState!==null?$p(s):l!==null?(l.return=a,V=l):$p(s);for(;o!==null;)V=o,cx(o),o=o.sibling;V=s,ao=d,qe=c}Mp(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,V=o):Mp(t)}}function Mp(t){for(;V!==null;){var e=V;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qe||Ba(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!qe)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Pt(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&wp(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}wp(e,a,r)}break;case 5:var d=e.stateNode;if(r===null&&e.flags&4){r=d;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&fs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}qe||e.flags&512&&Od(e)}catch(p){ve(e,e.return,p)}}if(e===t){V=null;break}if(r=e.sibling,r!==null){r.return=e.return,V=r;break}V=e.return}}function Bp(t){for(;V!==null;){var e=V;if(e===t){V=null;break}var r=e.sibling;if(r!==null){r.return=e.return,V=r;break}V=e.return}}function $p(t){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ba(4,e)}catch(l){ve(e,r,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){ve(e,s,l)}}var o=e.return;try{Od(e)}catch(l){ve(e,o,l)}break;case 5:var a=e.return;try{Od(e)}catch(l){ve(e,a,l)}}}catch(l){ve(e,e.return,l)}if(e===t){V=null;break}var d=e.sibling;if(d!==null){d.return=e.return,V=d;break}V=e.return}}var T1=Math.ceil,aa=fr.ReactCurrentDispatcher,eu=fr.ReactCurrentOwner,_t=fr.ReactCurrentBatchConfig,ie=0,Ae=null,ze=null,Be=0,pt=0,Zn=Vr(0),Te=0,_s=null,bn=0,$a=0,tu=0,is=null,rt=null,ru=0,gi=1/0,ir=null,la=!1,Nd=null,Dr=null,lo=!1,Er=null,da=0,ss=0,Md=null,Oo=-1,Lo=0;function Qe(){return ie&6?be():Oo!==-1?Oo:Oo=be()}function Nr(t){return t.mode&1?ie&2&&Be!==0?Be&-Be:h1.transition!==null?(Lo===0&&(Lo=Kf()),Lo):(t=se,t!==0||(t=window.event,t=t===void 0?16:tg(t.type)),t):1}function Bt(t,e,r,i){if(50<ss)throw ss=0,Md=null,Error(U(185));Ms(t,r,i),(!(ie&2)||t!==Ae)&&(t===Ae&&(!(ie&2)&&($a|=r),Te===4&&_r(t,Be)),dt(t,i),r===1&&ie===0&&!(e.mode&1)&&(gi=be()+500,Da&&Hr()))}function dt(t,e){var r=t.callbackNode;h0(t,e);var i=Ho(t,t===Ae?Be:0);if(i===0)r!==null&&Ju(r),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(r!=null&&Ju(r),e===1)t.tag===0?p1(Fp.bind(null,t)):bg(Fp.bind(null,t)),l1(function(){!(ie&6)&&Hr()}),r=null;else{switch(Jf(i)){case 1:r=Rc;break;case 4:r=Hf;break;case 16:r=Vo;break;case 536870912:r=Gf;break;default:r=Vo}r=yx(r,ux.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function ux(t,e){if(Oo=-1,Lo=0,ie&6)throw Error(U(327));var r=t.callbackNode;if(si()&&t.callbackNode!==r)return null;var i=Ho(t,t===Ae?Be:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ca(t,i);else{e=i;var s=ie;ie|=2;var o=hx();(Ae!==t||Be!==e)&&(ir=null,gi=be()+500,fn(t,e));do try{A1();break}catch(d){px(t,d)}while(!0);Fc(),aa.current=o,ie=s,ze!==null?e=0:(Ae=null,Be=0,e=Te)}if(e!==0){if(e===2&&(s=ud(t),s!==0&&(i=s,e=Bd(t,s))),e===1)throw r=_s,fn(t,0),_r(t,i),dt(t,be()),r;if(e===6)_r(t,i);else{if(s=t.current.alternate,!(i&30)&&!I1(s)&&(e=ca(t,i),e===2&&(o=ud(t),o!==0&&(i=o,e=Bd(t,o))),e===1))throw r=_s,fn(t,0),_r(t,i),dt(t,be()),r;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(U(345));case 2:nn(t,rt,ir);break;case 3:if(_r(t,i),(i&130023424)===i&&(e=ru+500-be(),10<e)){if(Ho(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Qe(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=vd(nn.bind(null,t,rt,ir),e);break}nn(t,rt,ir);break;case 4:if(_r(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var a=31-Mt(i);o=1<<a,a=e[a],a>s&&(s=a),i&=~o}if(i=s,i=be()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*T1(i/1960))-i,10<i){t.timeoutHandle=vd(nn.bind(null,t,rt,ir),i);break}nn(t,rt,ir);break;case 5:nn(t,rt,ir);break;default:throw Error(U(329))}}}return dt(t,be()),t.callbackNode===r?ux.bind(null,t):null}function Bd(t,e){var r=is;return t.current.memoizedState.isDehydrated&&(fn(t,e).flags|=256),t=ca(t,e),t!==2&&(e=rt,rt=r,e!==null&&$d(e)),t}function $d(t){rt===null?rt=t:rt.push.apply(rt,t)}function I1(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],o=s.getSnapshot;s=s.value;try{if(!Ft(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _r(t,e){for(e&=~tu,e&=~$a,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Mt(e),i=1<<r;t[r]=-1,e&=~i}}function Fp(t){if(ie&6)throw Error(U(327));si();var e=Ho(t,0);if(!(e&1))return dt(t,be()),null;var r=ca(t,e);if(t.tag!==0&&r===2){var i=ud(t);i!==0&&(e=i,r=Bd(t,i))}if(r===1)throw r=_s,fn(t,0),_r(t,e),dt(t,be()),r;if(r===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,nn(t,rt,ir),dt(t,be()),null}function nu(t,e){var r=ie;ie|=1;try{return t(e)}finally{ie=r,ie===0&&(gi=be()+500,Da&&Hr())}}function jn(t){Er!==null&&Er.tag===0&&!(ie&6)&&si();var e=ie;ie|=1;var r=_t.transition,i=se;try{if(_t.transition=null,se=1,t)return t()}finally{se=i,_t.transition=r,ie=e,!(ie&6)&&Hr()}}function iu(){pt=Zn.current,pe(Zn)}function fn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,a1(r)),ze!==null)for(r=ze.return;r!==null;){var i=r;switch(Mc(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Yo();break;case 3:hi(),pe(at),pe(Ge),Gc();break;case 5:Hc(i);break;case 4:hi();break;case 13:pe(xe);break;case 19:pe(xe);break;case 10:Wc(i.type._context);break;case 22:case 23:iu()}r=r.return}if(Ae=t,ze=t=Mr(t.current,null),Be=pt=e,Te=0,_s=null,tu=$a=bn=0,rt=is=null,un!==null){for(e=0;e<un.length;e++)if(r=un[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,i.next=a}r.pending=i}un=null}return t}function px(t,e){do{var r=ze;try{if(Fc(),Io.current=oa,sa){for(var i=me.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}sa=!1}if(vn=0,Pe=Ee=me=null,rs=!1,ws=0,eu.current=null,r===null||r.return===null){Te=1,_s=e,ze=null;break}e:{var o=t,a=r.return,d=r,l=e;if(e=Be,d.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=d,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Rp(a);if(f!==null){f.flags&=-257,Ep(f,a,d,o,e),f.mode&1&&zp(o,c,e),e=f,l=c;var x=e.updateQueue;if(x===null){var y=new Set;y.add(l),e.updateQueue=y}else x.add(l);break e}else{if(!(e&1)){zp(o,c,e),su();break e}l=Error(U(426))}}else if(fe&&d.mode&1){var v=Rp(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Ep(v,a,d,o,e),Bc(fi(l,d));break e}}o=l=fi(l,d),Te!==4&&(Te=2),is===null?is=[o]:is.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=Jg(o,l,e);jp(o,g);break e;case 1:d=l;var m=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Dr===null||!Dr.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var j=Qg(o,d,e);jp(o,j);break e}}o=o.return}while(o!==null)}gx(r)}catch(R){e=R,ze===r&&r!==null&&(ze=r=r.return);continue}break}while(!0)}function hx(){var t=aa.current;return aa.current=oa,t===null?oa:t}function su(){(Te===0||Te===3||Te===2)&&(Te=4),Ae===null||!(bn&268435455)&&!($a&268435455)||_r(Ae,Be)}function ca(t,e){var r=ie;ie|=2;var i=hx();(Ae!==t||Be!==e)&&(ir=null,fn(t,e));do try{P1();break}catch(s){px(t,s)}while(!0);if(Fc(),ie=r,aa.current=i,ze!==null)throw Error(U(261));return Ae=null,Be=0,Te}function P1(){for(;ze!==null;)fx(ze)}function A1(){for(;ze!==null&&!i0();)fx(ze)}function fx(t){var e=mx(t.alternate,t,pt);t.memoizedProps=t.pendingProps,e===null?gx(t):ze=e,eu.current=null}function gx(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=C1(r,e),r!==null){r.flags&=32767,ze=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Te=6,ze=null;return}}else if(r=_1(r,e,pt),r!==null){ze=r;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);Te===0&&(Te=5)}function nn(t,e,r){var i=se,s=_t.transition;try{_t.transition=null,se=1,O1(t,e,r,i)}finally{_t.transition=s,se=i}return null}function O1(t,e,r,i){do si();while(Er!==null);if(ie&6)throw Error(U(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(f0(t,o),t===Ae&&(ze=Ae=null,Be=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||lo||(lo=!0,yx(Vo,function(){return si(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=_t.transition,_t.transition=null;var a=se;se=1;var d=ie;ie|=4,eu.current=null,R1(t,r),dx(r,t),e1(md),Go=!!xd,md=xd=null,t.current=r,E1(r),s0(),ie=d,se=a,_t.transition=o}else t.current=r;if(lo&&(lo=!1,Er=t,da=s),o=t.pendingLanes,o===0&&(Dr=null),l0(r.stateNode),dt(t,be()),e!==null)for(i=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(la)throw la=!1,t=Nd,Nd=null,t;return da&1&&t.tag!==0&&si(),o=t.pendingLanes,o&1?t===Md?ss++:(ss=0,Md=t):ss=0,Hr(),null}function si(){if(Er!==null){var t=Jf(da),e=_t.transition,r=se;try{if(_t.transition=null,se=16>t?16:t,Er===null)var i=!1;else{if(t=Er,Er=null,da=0,ie&6)throw Error(U(331));var s=ie;for(ie|=4,V=t.current;V!==null;){var o=V,a=o.child;if(V.flags&16){var d=o.deletions;if(d!==null){for(var l=0;l<d.length;l++){var c=d[l];for(V=c;V!==null;){var u=V;switch(u.tag){case 0:case 11:case 15:ns(8,u,o)}var h=u.child;if(h!==null)h.return=u,V=h;else for(;V!==null;){u=V;var p=u.sibling,f=u.return;if(ox(u),u===c){V=null;break}if(p!==null){p.return=f,V=p;break}V=f}}}var x=o.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}V=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,V=a;else e:for(;V!==null;){if(o=V,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,V=g;break e}V=o.return}}var m=t.current;for(V=m;V!==null;){a=V;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,V=b;else e:for(a=m;V!==null;){if(d=V,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Ba(9,d)}}catch(R){ve(d,d.return,R)}if(d===a){V=null;break e}var j=d.sibling;if(j!==null){j.return=d.return,V=j;break e}V=d.return}}if(ie=s,Hr(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Ia,t)}catch{}i=!0}return i}finally{se=r,_t.transition=e}}return!1}function Wp(t,e,r){e=fi(r,e),e=Jg(t,e,1),t=Lr(t,e,1),e=Qe(),t!==null&&(Ms(t,1,e),dt(t,e))}function ve(t,e,r){if(t.tag===3)Wp(t,t,r);else for(;e!==null;){if(e.tag===3){Wp(e,t,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Dr===null||!Dr.has(i))){t=fi(r,t),t=Qg(e,t,1),e=Lr(e,t,1),t=Qe(),e!==null&&(Ms(e,1,t),dt(e,t));break}}e=e.return}}function L1(t,e,r){var i=t.pingCache;i!==null&&i.delete(e),e=Qe(),t.pingedLanes|=t.suspendedLanes&r,Ae===t&&(Be&r)===r&&(Te===4||Te===3&&(Be&130023424)===Be&&500>be()-ru?fn(t,0):tu|=r),dt(t,e)}function xx(t,e){e===0&&(t.mode&1?(e=Xs,Xs<<=1,!(Xs&130023424)&&(Xs=4194304)):e=1);var r=Qe();t=ur(t,e),t!==null&&(Ms(t,e,r),dt(t,r))}function D1(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),xx(t,r)}function N1(t,e){var r=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(e),xx(t,r)}var mx;mx=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||at.current)st=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return st=!1,k1(t,e,r);st=!!(t.flags&131072)}else st=!1,fe&&e.flags&1048576&&jg(e,ea,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ao(t,e),t=e.pendingProps;var s=ci(e,Ge.current);ii(e,r),s=Jc(null,e,i,t,s,r);var o=Qc();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lt(i)?(o=!0,Xo(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,qc(e),s.updater=Ma,e.stateNode=s,s._reactInternals=e,Cd(e,i,t,r),e=Ed(null,e,i,!0,o,r)):(e.tag=0,fe&&o&&Nc(e),Je(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(Ao(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=B1(i),t=Pt(i,t),s){case 0:e=Rd(null,e,i,t,r);break e;case 1:e=Pp(null,e,i,t,r);break e;case 11:e=Tp(null,e,i,t,r);break e;case 14:e=Ip(null,e,i,Pt(i.type,t),r);break e}throw Error(U(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Pt(i,s),Rd(t,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Pt(i,s),Pp(t,e,i,s,r);case 3:e:{if(ex(e),t===null)throw Error(U(387));i=e.pendingProps,o=e.memoizedState,s=o.element,zg(t,e),na(e,i,null,r);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=fi(Error(U(423)),e),e=Ap(t,e,i,r,s);break e}else if(i!==s){s=fi(Error(U(424)),e),e=Ap(t,e,i,r,s);break e}else for(ft=Or(e.stateNode.containerInfo.firstChild),gt=e,fe=!0,Dt=null,r=_g(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ui(),i===s){e=pr(t,e,r);break e}Je(t,e,i,r)}e=e.child}return e;case 5:return Rg(e),t===null&&Sd(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,a=s.children,yd(i,s)?a=null:o!==null&&yd(i,o)&&(e.flags|=32),Zg(t,e),Je(t,e,a,r),e.child;case 6:return t===null&&Sd(e),null;case 13:return tx(t,e,r);case 4:return Vc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=pi(e,null,i,r):Je(t,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Pt(i,s),Tp(t,e,i,s,r);case 7:return Je(t,e,e.pendingProps,r),e.child;case 8:return Je(t,e,e.pendingProps.children,r),e.child;case 12:return Je(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,ce(ta,i._currentValue),i._currentValue=a,o!==null)if(Ft(o.value,a)){if(o.children===s.children&&!at.current){e=pr(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var d=o.dependencies;if(d!==null){a=o.child;for(var l=d.firstContext;l!==null;){if(l.context===i){if(o.tag===1){l=lr(-1,r&-r),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),kd(o.return,r,e),d.lanes|=r;break}l=l.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(U(341));a.lanes|=r,d=a.alternate,d!==null&&(d.lanes|=r),kd(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Je(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,ii(e,r),s=Ct(s),i=i(s),e.flags|=1,Je(t,e,i,r),e.child;case 14:return i=e.type,s=Pt(i,e.pendingProps),s=Pt(i.type,s),Ip(t,e,i,s,r);case 15:return Yg(t,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Pt(i,s),Ao(t,e),e.tag=1,lt(i)?(t=!0,Xo(e)):t=!1,ii(e,r),Kg(e,i,s),Cd(e,i,s,r),Ed(null,e,i,!0,t,r);case 19:return rx(t,e,r);case 22:return Xg(t,e,r)}throw Error(U(156,e.tag))};function yx(t,e){return Vf(t,e)}function M1(t,e,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(t,e,r,i){return new M1(t,e,r,i)}function ou(t){return t=t.prototype,!(!t||!t.isReactComponent)}function B1(t){if(typeof t=="function")return ou(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_c)return 11;if(t===Cc)return 14}return 2}function Mr(t,e){var r=t.alternate;return r===null?(r=St(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Do(t,e,r,i,s,o){var a=2;if(i=t,typeof t=="function")ou(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Un:return gn(r.children,s,o,e);case kc:a=8,s|=8;break;case Ql:return t=St(12,r,e,s|2),t.elementType=Ql,t.lanes=o,t;case Yl:return t=St(13,r,e,s),t.elementType=Yl,t.lanes=o,t;case Xl:return t=St(19,r,e,s),t.elementType=Xl,t.lanes=o,t;case Rf:return Fa(r,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cf:a=10;break e;case zf:a=9;break e;case _c:a=11;break e;case Cc:a=14;break e;case wr:a=16,i=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=St(a,r,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function gn(t,e,r,i){return t=St(7,t,i,e),t.lanes=r,t}function Fa(t,e,r,i){return t=St(22,t,i,e),t.elementType=Rf,t.lanes=r,t.stateNode={isHidden:!1},t}function Cl(t,e,r){return t=St(6,t,null,e),t.lanes=r,t}function zl(t,e,r){return e=St(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $1(t,e,r,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=al(0),this.expirationTimes=al(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=al(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function au(t,e,r,i,s,o,a,d,l){return t=new $1(t,e,r,d,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=St(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},qc(o),t}function F1(t,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wn,key:i==null?null:""+i,children:t,containerInfo:e,implementation:r}}function vx(t){if(!t)return Wr;t=t._reactInternals;e:{if(zn(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var r=t.type;if(lt(r))return vg(t,r,e)}return e}function bx(t,e,r,i,s,o,a,d,l){return t=au(r,i,!0,t,s,o,a,d,l),t.context=vx(null),r=t.current,i=Qe(),s=Nr(r),o=lr(i,s),o.callback=e??null,Lr(r,o,s),t.current.lanes=s,Ms(t,s,i),dt(t,i),t}function Wa(t,e,r,i){var s=e.current,o=Qe(),a=Nr(s);return r=vx(r),e.context===null?e.context=r:e.pendingContext=r,e=lr(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Lr(s,e,a),t!==null&&(Bt(t,s,a,o),To(t,s,a)),a}function ua(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Up(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function lu(t,e){Up(t,e),(t=t.alternate)&&Up(t,e)}function W1(){return null}var jx=typeof reportError=="function"?reportError:function(t){console.error(t)};function du(t){this._internalRoot=t}Ua.prototype.render=du.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Wa(t,e,null,null)};Ua.prototype.unmount=du.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jn(function(){Wa(null,t,null,null)}),e[cr]=null}};function Ua(t){this._internalRoot=t}Ua.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xf();t={blockedOn:null,target:t,priority:e};for(var r=0;r<kr.length&&e!==0&&e<kr[r].priority;r++);kr.splice(r,0,t),r===0&&eg(t)}};function cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qp(){}function U1(t,e,r,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var c=ua(a);o.call(c)}}var a=bx(e,i,t,0,null,!1,!1,"",qp);return t._reactRootContainer=a,t[cr]=a.current,ms(t.nodeType===8?t.parentNode:t),jn(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var d=i;i=function(){var c=ua(l);d.call(c)}}var l=au(t,0,!1,null,null,!1,!1,"",qp);return t._reactRootContainer=l,t[cr]=l.current,ms(t.nodeType===8?t.parentNode:t),jn(function(){Wa(e,l,r,i)}),l}function Va(t,e,r,i,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var d=s;s=function(){var l=ua(a);d.call(l)}}Wa(e,a,t,s)}else a=U1(r,e,t,s,i);return ua(a)}Qf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Vi(e.pendingLanes);r!==0&&(Ec(e,r|1),dt(e,be()),!(ie&6)&&(gi=be()+500,Hr()))}break;case 13:jn(function(){var i=ur(t,1);if(i!==null){var s=Qe();Bt(i,t,1,s)}}),lu(t,1)}};Tc=function(t){if(t.tag===13){var e=ur(t,134217728);if(e!==null){var r=Qe();Bt(e,t,134217728,r)}lu(t,134217728)}};Yf=function(t){if(t.tag===13){var e=Nr(t),r=ur(t,e);if(r!==null){var i=Qe();Bt(r,t,e,i)}lu(t,e)}};Xf=function(){return se};Zf=function(t,e){var r=se;try{return se=t,e()}finally{se=r}};ld=function(t,e,r){switch(e){case"input":if(td(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==t&&i.form===t.form){var s=La(i);if(!s)throw Error(U(90));Tf(i),td(i,s)}}}break;case"textarea":Pf(t,r);break;case"select":e=r.value,e!=null&&ei(t,!!r.multiple,e,!1)}};Bf=nu;$f=jn;var q1={usingClientEntryPoint:!1,Events:[$s,Gn,La,Nf,Mf,nu]},Ni={findFiberByHostInstance:cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V1={bundleType:Ni.bundleType,version:Ni.version,rendererPackageName:Ni.rendererPackageName,rendererConfig:Ni.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Uf(t),t===null?null:t.stateNode},findFiberByHostInstance:Ni.findFiberByHostInstance||W1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var co=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!co.isDisabled&&co.supportsFiber)try{Ia=co.inject(V1),Zt=co}catch{}}yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q1;yt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cu(e))throw Error(U(200));return F1(t,e,null,r)};yt.createRoot=function(t,e){if(!cu(t))throw Error(U(299));var r=!1,i="",s=jx;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=au(t,1,!1,null,null,r,!1,i,s),t[cr]=e.current,ms(t.nodeType===8?t.parentNode:t),new du(e)};yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Uf(e),t=t===null?null:t.stateNode,t};yt.flushSync=function(t){return jn(t)};yt.hydrate=function(t,e,r){if(!qa(e))throw Error(U(200));return Va(null,t,e,!0,r)};yt.hydrateRoot=function(t,e,r){if(!cu(t))throw Error(U(405));var i=r!=null&&r.hydratedSources||null,s=!1,o="",a=jx;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=bx(e,null,t,1,r??null,s,!1,o,a),t[cr]=e.current,ms(t),i)for(t=0;t<i.length;t++)r=i[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Ua(e)};yt.render=function(t,e,r){if(!qa(e))throw Error(U(200));return Va(null,t,e,!1,r)};yt.unmountComponentAtNode=function(t){if(!qa(t))throw Error(U(40));return t._reactRootContainer?(jn(function(){Va(null,null,t,!1,function(){t._reactRootContainer=null,t[cr]=null})}),!0):!1};yt.unstable_batchedUpdates=nu;yt.unstable_renderSubtreeIntoContainer=function(t,e,r,i){if(!qa(r))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Va(t,e,r,!1,i)};yt.version="18.3.1-next-f1338f8080-20240426";function wx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wx)}catch(t){console.error(t)}}wx(),wf.exports=yt;var H1=wf.exports,Vp=H1;Kl.createRoot=Vp.createRoot,Kl.hydrateRoot=Vp.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cs(){return Cs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Cs.apply(this,arguments)}var Tr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Tr||(Tr={}));const Hp="popstate";function G1(t){t===void 0&&(t={});function e(i,s){let{pathname:o,search:a,hash:d}=i.location;return Fd("",{pathname:o,search:a,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(i,s){return typeof s=="string"?s:pa(s)}return J1(e,r,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function uu(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function K1(){return Math.random().toString(36).substr(2,8)}function Gp(t,e){return{usr:t.state,key:t.key,idx:e}}function Fd(t,e,r,i){return r===void 0&&(r=null),Cs({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Si(e):e,{state:r,key:e&&e.key||i||K1()})}function pa(t){let{pathname:e="/",search:r="",hash:i=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Si(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function J1(t,e,r,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,d=Tr.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(Cs({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function h(){d=Tr.Pop;let v=u(),g=v==null?null:v-c;c=v,l&&l({action:d,location:y.location,delta:g})}function p(v,g){d=Tr.Push;let m=Fd(y.location,v,g);c=u()+1;let b=Gp(m,c),j=y.createHref(m);try{a.pushState(b,"",j)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(j)}o&&l&&l({action:d,location:y.location,delta:1})}function f(v,g){d=Tr.Replace;let m=Fd(y.location,v,g);c=u();let b=Gp(m,c),j=y.createHref(m);a.replaceState(b,"",j),o&&l&&l({action:d,location:y.location,delta:0})}function x(v){let g=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof v=="string"?v:pa(v);return m=m.replace(/ $/,"%20"),je(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let y={get action(){return d},get location(){return t(s,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Hp,h),l=v,()=>{s.removeEventListener(Hp,h),l=null}},createHref(v){return e(s,v)},createURL:x,encodeLocation(v){let g=x(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:f,go(v){return a.go(v)}};return y}var Kp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Kp||(Kp={}));function Q1(t,e,r){return r===void 0&&(r="/"),Y1(t,e,r)}function Y1(t,e,r,i){let s=typeof e=="string"?Si(e):e,o=pu(s.pathname||"/",r);if(o==null)return null;let a=Sx(t);X1(a);let d=null;for(let l=0;d==null&&l<a.length;++l){let c=cv(o);d=av(a[l],c)}return d}function Sx(t,e,r,i){e===void 0&&(e=[]),r===void 0&&(r=[]),i===void 0&&(i="");let s=(o,a,d)=>{let l={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(je(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Br([i,l.relativePath]),u=r.concat(l);o.children&&o.children.length>0&&(je(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Sx(o.children,e,u,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:sv(c,o.index),routesMeta:u})};return t.forEach((o,a)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))s(o,a);else for(let l of kx(o.path))s(o,a,l)}),e}function kx(t){let e=t.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let a=kx(i.join("/")),d=[];return d.push(...a.map(l=>l===""?o:[o,l].join("/"))),s&&d.push(...a),d.map(l=>t.startsWith("/")&&l===""?"/":l)}function X1(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:ov(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const Z1=/^:[\w-]+$/,ev=3,tv=2,rv=1,nv=10,iv=-2,Jp=t=>t==="*";function sv(t,e){let r=t.split("/"),i=r.length;return r.some(Jp)&&(i+=iv),e&&(i+=tv),r.filter(s=>!Jp(s)).reduce((s,o)=>s+(Z1.test(o)?ev:o===""?rv:nv),i)}function ov(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function av(t,e,r){let{routesMeta:i}=t,s={},o="/",a=[];for(let d=0;d<i.length;++d){let l=i[d],c=d===i.length-1,u=o==="/"?e:e.slice(o.length)||"/",h=lv({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Br([o,h.pathname]),pathnameBase:gv(Br([o,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(o=Br([o,h.pathnameBase]))}return a}function lv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=dv(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:i.reduce((c,u,h)=>{let{paramName:p,isOptional:f}=u;if(p==="*"){let y=d[h]||"";a=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const x=d[h];return f&&!x?c[p]=void 0:c[p]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:t}}function dv(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),uu(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,d,l)=>(i.push({paramName:d,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function cv(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return uu(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function pu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}const uv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pv=t=>uv.test(t);function hv(t,e){e===void 0&&(e="/");let{pathname:r,search:i="",hash:s=""}=typeof t=="string"?Si(t):t,o;if(r)if(pv(r))o=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),uu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?o=Qp(r.substring(1),"/"):o=Qp(r,e)}else o=e;return{pathname:o,search:xv(i),hash:mv(s)}}function Qp(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Rl(t,e,r,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fv(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function hu(t,e){let r=fv(t);return e?r.map((i,s)=>s===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function fu(t,e,r,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=Si(t):(s=Cs({},t),je(!s.pathname||!s.pathname.includes("?"),Rl("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),Rl("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),Rl("#","search","hash",s)));let o=t===""||s.pathname==="",a=o?"/":s.pathname,d;if(a==null)d=r;else{let h=e.length-1;if(!i&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}d=h>=0?e[h]:"/"}let l=hv(s,d),c=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Br=t=>t.join("/").replace(/\/\/+/g,"/"),gv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mv=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _x=["post","put","patch","delete"];new Set(_x);const vv=["get",..._x];new Set(vv);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zs(){return zs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},zs.apply(this,arguments)}const gu=w.createContext(null),bv=w.createContext(null),Gr=w.createContext(null),Ha=w.createContext(null),gr=w.createContext({outlet:null,matches:[],isDataRoute:!1}),Cx=w.createContext(null);function jv(t,e){let{relative:r}=e===void 0?{}:e;ki()||je(!1);let{basename:i,navigator:s}=w.useContext(Gr),{hash:o,pathname:a,search:d}=Ex(t,{relative:r}),l=a;return i!=="/"&&(l=a==="/"?i:Br([i,a])),s.createHref({pathname:l,search:d,hash:o})}function ki(){return w.useContext(Ha)!=null}function Kr(){return ki()||je(!1),w.useContext(Ha).location}function zx(t){w.useContext(Gr).static||w.useLayoutEffect(t)}function _i(){let{isDataRoute:t}=w.useContext(gr);return t?Ov():wv()}function wv(){ki()||je(!1);let t=w.useContext(gu),{basename:e,future:r,navigator:i}=w.useContext(Gr),{matches:s}=w.useContext(gr),{pathname:o}=Kr(),a=JSON.stringify(hu(s,r.v7_relativeSplatPath)),d=w.useRef(!1);return zx(()=>{d.current=!0}),w.useCallback(function(c,u){if(u===void 0&&(u={}),!d.current)return;if(typeof c=="number"){i.go(c);return}let h=fu(c,JSON.parse(a),o,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Br([e,h.pathname])),(u.replace?i.replace:i.push)(h,u.state,u)},[e,i,a,o,t])}function Rx(){let{matches:t}=w.useContext(gr),e=t[t.length-1];return e?e.params:{}}function Ex(t,e){let{relative:r}=e===void 0?{}:e,{future:i}=w.useContext(Gr),{matches:s}=w.useContext(gr),{pathname:o}=Kr(),a=JSON.stringify(hu(s,i.v7_relativeSplatPath));return w.useMemo(()=>fu(t,JSON.parse(a),o,r==="path"),[t,a,o,r])}function Sv(t,e){return kv(t,e)}function kv(t,e,r,i){ki()||je(!1);let{navigator:s}=w.useContext(Gr),{matches:o}=w.useContext(gr),a=o[o.length-1],d=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=Kr(),u;if(e){var h;let v=typeof e=="string"?Si(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||je(!1),u=v}else u=c;let p=u.pathname||"/",f=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=Q1(t,{pathname:f}),y=Ev(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},d,v.params),pathname:Br([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Br([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,r,i);return e&&y?w.createElement(Ha.Provider,{value:{location:zs({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Tr.Pop}},y):y}function _v(){let t=Av(),e=yv(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),r?w.createElement("pre",{style:s},r):null,null)}const Cv=w.createElement(_v,null);class zv extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?w.createElement(gr.Provider,{value:this.props.routeContext},w.createElement(Cx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rv(t){let{routeContext:e,match:r,children:i}=t,s=w.useContext(gu);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(gr.Provider,{value:e},i)}function Ev(t,e,r,i){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),i===void 0&&(i=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,d=(s=r)==null?void 0:s.errors;if(d!=null){let u=a.findIndex(h=>h.route.id&&(d==null?void 0:d[h.route.id])!==void 0);u>=0||je(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(r&&i&&i.v7_partialHydration)for(let u=0;u<a.length;u++){let h=a[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:p,errors:f}=r,x=h.route.loader&&p[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||x){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,h,p)=>{let f,x=!1,y=null,v=null;r&&(f=d&&h.route.id?d[h.route.id]:void 0,y=h.route.errorElement||Cv,l&&(c<0&&p===0?(Lv("route-fallback"),x=!0,v=null):c===p&&(x=!0,v=h.route.hydrateFallbackElement||null)));let g=e.concat(a.slice(0,p+1)),m=()=>{let b;return f?b=y:x?b=v:h.route.Component?b=w.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=u,w.createElement(Rv,{match:h,routeContext:{outlet:u,matches:g,isDataRoute:r!=null},children:b})};return r&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?w.createElement(zv,{location:r.location,revalidation:r.revalidation,component:y,error:f,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var Tx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Tx||{}),Ix=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ix||{});function Tv(t){let e=w.useContext(gu);return e||je(!1),e}function Iv(t){let e=w.useContext(bv);return e||je(!1),e}function Pv(t){let e=w.useContext(gr);return e||je(!1),e}function Px(t){let e=Pv(),r=e.matches[e.matches.length-1];return r.route.id||je(!1),r.route.id}function Av(){var t;let e=w.useContext(Cx),r=Iv(),i=Px();return e!==void 0?e:(t=r.errors)==null?void 0:t[i]}function Ov(){let{router:t}=Tv(Tx.UseNavigateStable),e=Px(Ix.UseNavigateStable),r=w.useRef(!1);return zx(()=>{r.current=!0}),w.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zs({fromRouteId:e},o)))},[t,e])}const Yp={};function Lv(t,e,r){Yp[t]||(Yp[t]=!0)}function Dv(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function xu(t){let{to:e,replace:r,state:i,relative:s}=t;ki()||je(!1);let{future:o,static:a}=w.useContext(Gr),{matches:d}=w.useContext(gr),{pathname:l}=Kr(),c=_i(),u=fu(e,hu(d,o.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(u);return w.useEffect(()=>c(JSON.parse(h),{replace:r,state:i,relative:s}),[c,h,s,r,i]),null}function ne(t){je(!1)}function Nv(t){let{basename:e="/",children:r=null,location:i,navigationType:s=Tr.Pop,navigator:o,static:a=!1,future:d}=t;ki()&&je(!1);let l=e.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:l,navigator:o,static:a,future:zs({v7_relativeSplatPath:!1},d)}),[l,d,o,a]);typeof i=="string"&&(i=Si(i));let{pathname:u="/",search:h="",hash:p="",state:f=null,key:x="default"}=i,y=w.useMemo(()=>{let v=pu(u,l);return v==null?null:{location:{pathname:v,search:h,hash:p,state:f,key:x},navigationType:s}},[l,u,h,p,f,x,s]);return y==null?null:w.createElement(Gr.Provider,{value:c},w.createElement(Ha.Provider,{children:r,value:y}))}function Mv(t){let{children:e,location:r}=t;return Sv(Wd(e),r)}new Promise(()=>{});function Wd(t,e){e===void 0&&(e=[]);let r=[];return w.Children.forEach(t,(i,s)=>{if(!w.isValidElement(i))return;let o=[...e,s];if(i.type===w.Fragment){r.push.apply(r,Wd(i.props.children,o));return}i.type!==ne&&je(!1),!i.props.index||!i.props.children||je(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Wd(i.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ud(){return Ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ud.apply(this,arguments)}function Bv(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function $v(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Fv(t,e){return t.button===0&&(!e||e==="_self")&&!$v(t)}const Wv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Uv="6";try{window.__reactRouterVersion=Uv}catch{}const qv="startTransition",Xp=Ly[qv];function Vv(t){let{basename:e,children:r,future:i,window:s}=t,o=w.useRef();o.current==null&&(o.current=G1({window:s,v5Compat:!0}));let a=o.current,[d,l]=w.useState({action:a.action,location:a.location}),{v7_startTransition:c}=i||{},u=w.useCallback(h=>{c&&Xp?Xp(()=>l(h)):l(h)},[l,c]);return w.useLayoutEffect(()=>a.listen(u),[a,u]),w.useEffect(()=>Dv(i),[i]),w.createElement(Nv,{basename:e,children:r,location:d.location,navigationType:d.action,navigator:a,future:i})}const Hv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Gv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,te=w.forwardRef(function(e,r){let{onClick:i,relative:s,reloadDocument:o,replace:a,state:d,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,p=Bv(e,Wv),{basename:f}=w.useContext(Gr),x,y=!1;if(typeof c=="string"&&Gv.test(c)&&(x=c,Hv))try{let b=new URL(window.location.href),j=c.startsWith("//")?new URL(b.protocol+c):new URL(c),R=pu(j.pathname,f);j.origin===b.origin&&R!=null?c=R+j.search+j.hash:y=!0}catch{}let v=jv(c,{relative:s}),g=Kv(c,{replace:a,state:d,target:l,preventScrollReset:u,relative:s,viewTransition:h});function m(b){i&&i(b),b.defaultPrevented||g(b)}return w.createElement("a",Ud({},p,{href:x||v,onClick:y||o?i:m,ref:r,target:l}))});var Zp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Zp||(Zp={}));var eh;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(eh||(eh={}));function Kv(t,e){let{target:r,replace:i,state:s,preventScrollReset:o,relative:a,viewTransition:d}=e===void 0?{}:e,l=_i(),c=Kr(),u=Ex(t,{relative:a});return w.useCallback(h=>{if(Fv(h,r)){h.preventDefault();let p=i!==void 0?i:pa(c)===pa(u);l(t,{replace:p,state:s,preventScrollReset:o,relative:a,viewTransition:d})}},[c,l,u,i,s,r,t,o,a,d])}var mu={},ha={},qd=function(t,e){return qd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},qd(t,e)};function Ax(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");qd(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var fa=function(){return fa=Object.assign||function(e){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},fa.apply(this,arguments)};function Ci(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function Ox(t,e,r,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,i);else for(var d=t.length-1;d>=0;d--)(a=t[d])&&(o=(s<3?a(o):s>3?a(e,r,o):a(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function Lx(t,e){return function(r,i){e(r,i,t)}}function Dx(t,e,r,i,s,o){function a(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var d=i.kind,l=d==="getter"?"get":d==="setter"?"set":"value",c=!e&&t?i.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),h,p=!1,f=r.length-1;f>=0;f--){var x={};for(var y in i)x[y]=y==="access"?{}:i[y];for(var y in i.access)x.access[y]=i.access[y];x.addInitializer=function(g){if(p)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(g||null))};var v=(0,r[f])(d==="accessor"?{get:u.get,set:u.set}:u[l],x);if(d==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(h=a(v.get))&&(u.get=h),(h=a(v.set))&&(u.set=h),(h=a(v.init))&&s.unshift(h)}else(h=a(v))&&(d==="field"?s.unshift(h):u[l]=h)}c&&Object.defineProperty(c,i.name,u),p=!0}function Nx(t,e,r){for(var i=arguments.length>2,s=0;s<e.length;s++)r=i?e[s].call(t,r):e[s].call(t);return i?r:void 0}function Mx(t){return typeof t=="symbol"?t:"".concat(t)}function Bx(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function $x(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function H(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function d(u){try{c(i.next(u))}catch(h){a(h)}}function l(u){try{c(i.throw(u))}catch(h){a(h)}}function c(u){u.done?o(u.value):s(u.value).then(d,l)}c((i=i.apply(t,e||[])).next())})}function Fx(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,s,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=d(0),a.throw=d(1),a.return=d(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function d(c){return function(u){return l([c,u])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(r=0)),r;)try{if(i=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],s=0}finally{i=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Ga=Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]};function Wx(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ga(e,t,r)}function ga(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yu(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),s,o=[],a;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)o.push(s.value)}catch(d){a={error:d}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}function Ux(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(yu(arguments[e]));return t}function qx(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,d=o.length;a<d;a++,s++)i[s]=o[a];return i}function Vx(t,e,r){if(r||arguments.length===2)for(var i=0,s=e.length,o;i<s;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}function xi(t){return this instanceof xi?(this.v=t,this):new xi(t)}function Hx(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(f){return function(x){return Promise.resolve(x).then(f,h)}}function d(f,x){i[f]&&(s[f]=function(y){return new Promise(function(v,g){o.push([f,y,v,g])>1||l(f,y)})},x&&(s[f]=x(s[f])))}function l(f,x){try{c(i[f](x))}catch(y){p(o[0][3],y)}}function c(f){f.value instanceof xi?Promise.resolve(f.value.v).then(u,h):p(o[0][2],f)}function u(f){l("next",f)}function h(f){l("throw",f)}function p(f,x){f(x),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Gx(t){var e,r;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,o){e[s]=t[s]?function(a){return(r=!r)?{value:xi(t[s](a)),done:!1}:o?o(a):a}:o}}function Kx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof ga=="function"?ga(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(o){r[o]=t[o]&&function(a){return new Promise(function(d,l){a=t[o](a),s(d,l,a.done,a.value)})}}function s(o,a,d,l){Promise.resolve(l).then(function(c){o({value:c,done:d})},a)}}function Jx(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Jv=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Vd=function(t){return Vd=Object.getOwnPropertyNames||function(e){var r=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[r.length]=i);return r},Vd(t)};function Qx(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Vd(t),i=0;i<r.length;i++)r[i]!=="default"&&Ga(e,t,r[i]);return Jv(e,t),e}function Yx(t){return t&&t.__esModule?t:{default:t}}function Xx(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)}function Zx(t,e,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function em(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function tm(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var i,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=e[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=e[Symbol.dispose],r&&(s=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:i,async:r})}else r&&t.stack.push({async:!0});return e}var Qv=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var i=new Error(r);return i.name="SuppressedError",i.error=t,i.suppressed=e,i};function rm(t){function e(o){t.error=t.hasError?new Qv(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,i=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&i===1)return i=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(o).then(s,function(a){return e(a),s()})}else i|=1}catch(a){e(a)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function nm(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,i,s,o,a){return i?e?".jsx":".js":s&&(!o||!a)?r:s+o+"."+a.toLowerCase()+"js"}):t}const Yv={__extends:Ax,__assign:fa,__rest:Ci,__decorate:Ox,__param:Lx,__esDecorate:Dx,__runInitializers:Nx,__propKey:Mx,__setFunctionName:Bx,__metadata:$x,__awaiter:H,__generator:Fx,__createBinding:Ga,__exportStar:Wx,__values:ga,__read:yu,__spread:Ux,__spreadArrays:qx,__spreadArray:Vx,__await:xi,__asyncGenerator:Hx,__asyncDelegator:Gx,__asyncValues:Kx,__makeTemplateObject:Jx,__importStar:Qx,__importDefault:Yx,__classPrivateFieldGet:Xx,__classPrivateFieldSet:Zx,__classPrivateFieldIn:em,__addDisposableResource:tm,__disposeResources:rm,__rewriteRelativeImportExtension:nm},Xv=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:tm,get __assign(){return fa},__asyncDelegator:Gx,__asyncGenerator:Hx,__asyncValues:Kx,__await:xi,__awaiter:H,__classPrivateFieldGet:Xx,__classPrivateFieldIn:em,__classPrivateFieldSet:Zx,__createBinding:Ga,__decorate:Ox,__disposeResources:rm,__esDecorate:Dx,__exportStar:Wx,__extends:Ax,__generator:Fx,__importDefault:Yx,__importStar:Qx,__makeTemplateObject:Jx,__metadata:$x,__param:Lx,__propKey:Mx,__read:yu,__rest:Ci,__rewriteRelativeImportExtension:nm,__runInitializers:Nx,__setFunctionName:Bx,__spread:Ux,__spreadArray:Vx,__spreadArrays:qx,__values:ga,default:Yv},Symbol.toStringTag,{value:"Module"})),Zv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let Ka=class extends Error{constructor(e,r="FunctionsError",i){super(e),this.name=r,this.context=i}},im=class extends Ka{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Hd=class extends Ka{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Gd=class extends Ka{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var xa;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(xa||(xa={}));class eb{constructor(e,{headers:r={},customFetch:i,region:s=xa.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=Zv(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return H(this,arguments,void 0,function*(r,i={}){var s;let o,a;try{const{headers:d,method:l,body:c,signal:u,timeout:h}=i;let p={},{region:f}=i;f||(f=this.region);const x=new URL(`${this.url}/${r}`);f&&f!=="any"&&(p["x-region"]=f,x.searchParams.set("forceFunctionRegion",f));let y;c&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(p["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(p["Content-Type"]="application/json",y=JSON.stringify(c)):y=c;let v=u;h&&(a=new AbortController,o=setTimeout(()=>a.abort(),h),u?(v=a.signal,u.addEventListener("abort",()=>a.abort())):v=a.signal);const g=yield this.fetch(x.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),d),body:y,signal:v}).catch(R=>{throw new im(R)}),m=g.headers.get("x-relay-error");if(m&&m==="true")throw new Hd(g);if(!g.ok)throw new Gd(g);let b=((s=g.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return b==="application/json"?j=yield g.json():b==="application/octet-stream"||b==="application/pdf"?j=yield g.blob():b==="text/event-stream"?j=g:b==="multipart/form-data"?j=yield g.formData():j=yield g.text(),{data:j,error:null,response:g}}catch(d){return{data:null,error:d,response:d instanceof Gd||d instanceof Hd?d.context:void 0}}finally{o&&clearTimeout(o)}})}}const tb=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return xa},FunctionsClient:eb,FunctionsError:Ka,FunctionsFetchError:im,FunctionsHttpError:Gd,FunctionsRelayError:Hd},Symbol.toStringTag,{value:"Module"})),sm=Ds(tb);var Ve={};const zi=Ds(Xv);var uo={},po={},ho={},fo={},go={},xo={},th;function om(){if(th)return xo;th=1,Object.defineProperty(xo,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return xo.default=t,xo}var rh;function am(){if(rh)return go;rh=1,Object.defineProperty(go,"__esModule",{value:!0});const e=zi.__importDefault(om());let r=class{constructor(s){var o,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(o=s.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=new Headers(this.headers),this.headers.set(s,o),this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let d=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,u,h,p;let f=null,x=null,y=null,v=l.status,g=l.statusText;if(l.ok){if(this.method!=="HEAD"){const R=await l.text();R===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?x=R:x=JSON.parse(R))}const b=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),j=(h=l.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");b&&j&&j.length>1&&(y=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(f={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,y=null,v=406,g="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const b=await l.text();try{f=JSON.parse(b),Array.isArray(f)&&l.status===404&&(x=[],f=null,v=200,g="OK")}catch{l.status===404&&b===""?(v=204,g="No Content"):f={message:b}}if(f&&this.isMaybeSingle&&(!((p=f==null?void 0:f.details)===null||p===void 0)&&p.includes("0 rows"))&&(f=null,v=200,g="OK"),f&&this.shouldThrowOnError)throw new e.default(f)}return{error:f,data:x,count:y,status:v,statusText:g}});return this.shouldThrowOnError||(d=d.catch(l=>{var c,u,h,p,f,x;let y="";const v=l==null?void 0:l.cause;if(v){const g=(c=v==null?void 0:v.message)!==null&&c!==void 0?c:"",m=(u=v==null?void 0:v.code)!==null&&u!==void 0?u:"";y=`${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"FetchError"}: ${l==null?void 0:l.message}`,y+=`

Caused by: ${(p=v==null?void 0:v.name)!==null&&p!==void 0?p:"Error"}: ${g}`,m&&(y+=` (${m})`),v!=null&&v.stack&&(y+=`
${v.stack}`)}else y=(f=l==null?void 0:l.stack)!==null&&f!==void 0?f:"";return{error:{message:`${(x=l==null?void 0:l.name)!==null&&x!==void 0?x:"FetchError"}: ${l==null?void 0:l.message}`,details:y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(s,o)}returns(){return this}overrideTypes(){return this}};return go.default=r,go}var nh;function lm(){if(nh)return fo;nh=1,Object.defineProperty(fo,"__esModule",{value:!0});const e=zi.__importDefault(am());let r=class extends e.default{select(s){let o=!1;const a=(s??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:o=!0,nullsFirst:a,foreignTable:d,referencedTable:l=d}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${s}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:a=o}={}){const d=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(d,`${s}`),this}range(s,o,{foreignTable:a,referencedTable:d=a}={}){const l=typeof d>"u"?"offset":`${d}.offset`,c=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:o=!1,settings:a=!1,buffers:d=!1,wal:l=!1,format:c="text"}={}){var u;const h=[s?"analyze":null,o?"verbose":null,a?"settings":null,d?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${p}"; options=${h};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};return fo.default=r,fo}var ih;function vu(){if(ih)return ho;ih=1,Object.defineProperty(ho,"__esModule",{value:!0});const e=zi.__importDefault(lm()),r=new RegExp("[,()]");let i=class extends e.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}regexMatch(o,a){return this.url.searchParams.append(o,`match.${a}`),this}regexIMatch(o,a){return this.url.searchParams.append(o,`imatch.${a}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}isDistinct(o,a){return this.url.searchParams.append(o,`isdistinct.${a}`),this}in(o,a){const d=Array.from(new Set(a)).map(l=>typeof l=="string"&&r.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:d,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${c}fts${u}.${a}`),this}match(o){return Object.entries(o).forEach(([a,d])=>{this.url.searchParams.append(a,`eq.${d}`)}),this}not(o,a,d){return this.url.searchParams.append(o,`not.${a}.${d}`),this}or(o,{foreignTable:a,referencedTable:d=a}={}){const l=d?`${d}.or`:"or";return this.url.searchParams.append(l,`(${o})`),this}filter(o,a,d){return this.url.searchParams.append(o,`${a}.${d}`),this}};return ho.default=i,ho}var sh;function dm(){if(sh)return po;sh=1,Object.defineProperty(po,"__esModule",{value:!0});const e=zi.__importDefault(vu());let r=class{constructor(s,{headers:o={},schema:a,fetch:d}){this.url=s,this.headers=new Headers(o),this.schema=a,this.fetch=d}select(s,o){const{head:a=!1,count:d}=o??{},l=a?"HEAD":"GET";let c=!1;const u=(s??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",u),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:o,defaultToNull:a=!0}={}){var d;const l="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(s,{onConflict:o,ignoreDuplicates:a=!1,count:d,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),d&&this.headers.append("Prefer",`count=${d}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((p,f)=>p.concat(Object.keys(f)),[]);if(h.length>0){const p=[...new Set(h)].map(f=>`"${f}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(s,{count:o}={}){var a;const d="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var o;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};return po.default=r,po}var oh;function rb(){if(oh)return uo;oh=1,Object.defineProperty(uo,"__esModule",{value:!0});const t=zi,e=t.__importDefault(dm()),r=t.__importDefault(vu());let i=class cm{constructor(o,{headers:a={},schema:d,fetch:l}={}){this.url=o,this.headers=new Headers(a),this.schemaName=d,this.fetch=l}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new cm(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:d=!1,get:l=!1,count:c}={}){var u;let h;const p=new URL(`${this.url}/rpc/${o}`);let f;d||l?(h=d?"HEAD":"GET",Object.entries(a).filter(([y,v])=>v!==void 0).map(([y,v])=>[y,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([y,v])=>{p.searchParams.append(y,v)})):(h="POST",f=a);const x=new Headers(this.headers);return c&&x.set("Prefer",`count=${c}`),new r.default({method:h,url:p,headers:x,schema:this.schemaName,body:f,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};return uo.default=i,uo}Object.defineProperty(Ve,"__esModule",{value:!0});Ve.PostgrestError=Ve.PostgrestBuilder=Ve.PostgrestTransformBuilder=Ve.PostgrestFilterBuilder=Ve.PostgrestQueryBuilder=Ve.PostgrestClient=void 0;const Ri=zi,um=Ri.__importDefault(rb());Ve.PostgrestClient=um.default;const pm=Ri.__importDefault(dm());Ve.PostgrestQueryBuilder=pm.default;const hm=Ri.__importDefault(vu());Ve.PostgrestFilterBuilder=hm.default;const fm=Ri.__importDefault(lm());Ve.PostgrestTransformBuilder=fm.default;const gm=Ri.__importDefault(am());Ve.PostgrestBuilder=gm.default;const xm=Ri.__importDefault(om());Ve.PostgrestError=xm.default;Ve.default={PostgrestClient:um.default,PostgrestQueryBuilder:pm.default,PostgrestFilterBuilder:hm.default,PostgrestTransformBuilder:fm.default,PostgrestBuilder:gm.default,PostgrestError:xm.default};class mm{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const i=this.getWebSocketConstructor();return new i(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const nb="2.87.1",ib=`realtime-js/${nb}`,ym="1.0.0",sb="2.0.0",ah=ym,Kd=1e4,ob=1e3,ab=100;var ln;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ln||(ln={}));var _e;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(_e||(_e={}));var Lt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Lt||(Lt={}));var Jd;(function(t){t.websocket="websocket"})(Jd||(Jd={}));var dn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(dn||(dn={}));class lb{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,i;const s=(i=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var r,i;const s=(i=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,r,i){var s,o;const a=e.topic,d=(s=e.ref)!==null&&s!==void 0?s:"",l=(o=e.join_ref)!==null&&o!==void 0?o:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+d.length+a.length+c.length+h.length,f=new ArrayBuffer(this.HEADER_LENGTH+p);let x=new DataView(f),y=0;x.setUint8(y++,this.KINDS.userBroadcastPush),x.setUint8(y++,l.length),x.setUint8(y++,d.length),x.setUint8(y++,a.length),x.setUint8(y++,c.length),x.setUint8(y++,h.length),x.setUint8(y++,r),Array.from(l,g=>x.setUint8(y++,g.charCodeAt(0))),Array.from(d,g=>x.setUint8(y++,g.charCodeAt(0))),Array.from(a,g=>x.setUint8(y++,g.charCodeAt(0))),Array.from(c,g=>x.setUint8(y++,g.charCodeAt(0))),Array.from(h,g=>x.setUint8(y++,g.charCodeAt(0)));var v=new Uint8Array(f.byteLength+i.byteLength);return v.set(new Uint8Array(f),0),v.set(new Uint8Array(i),f.byteLength),v.buffer}decode(e,r){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return r(i)}if(typeof e=="string"){const i=JSON.parse(e),[s,o,a,d,l]=i;return r({join_ref:s,ref:o,topic:a,event:d,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),i=r.getUint8(0),s=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodeUserBroadcast(e,r,i){const s=r.getUint8(1),o=r.getUint8(2),a=r.getUint8(3),d=r.getUint8(4);let l=this.HEADER_LENGTH+4;const c=i.decode(e.slice(l,l+s));l=l+s;const u=i.decode(e.slice(l,l+o));l=l+o;const h=i.decode(e.slice(l,l+a));l=l+a;const p=e.slice(l,e.byteLength),f=d===this.JSON_ENCODING?JSON.parse(i.decode(p)):p,x={type:this.BROADCAST_EVENT,event:u,payload:f};return a>0&&(x.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>r.includes(i)))}}class vm{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var de;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(de||(de={}));const lh=(t,e,r={})=>{var i;const s=(i=r.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=db(a,t,e,s),o),{}):{}},db=(t,e,r,i)=>{const s=e.find(d=>d.name===t),o=s==null?void 0:s.type,a=r[t];return o&&!i.includes(o)?bm(o,a):Qd(a)},bm=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return hb(e,r)}switch(t){case de.bool:return cb(e);case de.float4:case de.float8:case de.int2:case de.int4:case de.int8:case de.numeric:case de.oid:return ub(e);case de.json:case de.jsonb:return pb(e);case de.timestamp:return fb(e);case de.abstime:case de.date:case de.daterange:case de.int4range:case de.int8range:case de.money:case de.reltime:case de.text:case de.time:case de.timestamptz:case de.timetz:case de.tsrange:case de.tstzrange:return Qd(e);default:return Qd(e)}},Qd=t=>t,cb=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ub=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},pb=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},hb=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,i=t[r];if(t[0]==="{"&&i==="}"){let o;const a=t.slice(1,r);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(d=>bm(e,d))}return t},fb=t=>typeof t=="string"?t.replace(" ","T"):t,jm=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class El{constructor(e,r,i={},s=Kd){this.channel=e,this.event=r,this.payload=i,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var i;return this._hasReceived(e)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Yd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Yd||(Yd={}));let wm=class No{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},s=>{const{onJoin:o,onLeave:a,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=No.syncState(this.state,s,o,a),this.pendingDiffs.forEach(l=>{this.state=No.syncDiff(this.state,l,o,a)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},s=>{const{onJoin:o,onLeave:a,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=No.syncDiff(this.state,s,o,a),d())}),this.onJoin((s,o,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:a})}),this.onLeave((s,o,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,i,s){const o=this.cloneDeep(e),a=this.transformState(r),d={},l={};return this.map(o,(c,u)=>{a[c]||(l[c]=u)}),this.map(a,(c,u)=>{const h=o[c];if(h){const p=u.map(v=>v.presence_ref),f=h.map(v=>v.presence_ref),x=u.filter(v=>f.indexOf(v.presence_ref)<0),y=h.filter(v=>p.indexOf(v.presence_ref)<0);x.length>0&&(d[c]=x),y.length>0&&(l[c]=y)}else d[c]=u}),this.syncDiff(o,{joins:d,leaves:l},i,s)}static syncDiff(e,r,i,s){const{joins:o,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),s||(s=()=>{}),this.map(o,(d,l)=>{var c;const u=(c=e[d])!==null&&c!==void 0?c:[];if(e[d]=this.cloneDeep(l),u.length>0){const h=e[d].map(f=>f.presence_ref),p=u.filter(f=>h.indexOf(f.presence_ref)<0);e[d].unshift(...p)}i(d,u,l)}),this.map(a,(d,l)=>{let c=e[d];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[d]=c,s(d,c,l),c.length===0&&delete e[d]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(i=>r(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,i)=>{const s=e[i];return"metas"in s?r[i]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[i]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Xd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Xd||(Xd={}));var oi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(oi||(oi={}));var Gt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Gt||(Gt={}));const gb=_e;let Sm=class Gi{constructor(e,r={config:{}},i){var s,o;if(this.topic=e,this.params=r,this.socket=i,this.bindings={},this.state=_e.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new El(this,Lt.join,this.params,this.timeout),this.rejoinTimer=new vm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_e.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_e.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Lt.reply,{},(a,d)=>{this._trigger(this._replyEventName(d),a)}),this.presence=new wm(this),this.broadcastEndpointURL=jm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var i,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==_e.closed){const{config:{broadcast:a,presence:d,private:l}}=this.params,c=(s=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[oi.PRESENCE]&&this.bindings[oi.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},p={broadcast:a,presence:Object.assign(Object.assign({},d),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(Gt.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(Gt.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){e==null||e(Gt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,v=(x=y==null?void 0:y.length)!==null&&x!==void 0?x:0,g=[];for(let m=0;m<v;m++){const b=y[m],{filter:{event:j,schema:R,table:T,filter:k}}=b,P=f&&f[m];if(P&&P.event===j&&Gi.isFilterValueEqual(P.schema,R)&&Gi.isFilterValueEqual(P.table,T)&&Gi.isFilterValueEqual(P.filter,k))g.push(Object.assign(Object.assign({},b),{id:P.id}));else{this.unsubscribe(),this.state=_e.errored,e==null||e(Gt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Gt.SUBSCRIBED);return}}).receive("error",f=>{this.state=_e.errored,e==null||e(Gt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Gt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,i){return this.state===_e.joined&&e===oi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,i)}async httpSend(e,r,i={}){var s;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=i.timeout)!==null&&s!==void 0?s:this.timeout);if(d.status===202)return{success:!0};let l=d.statusText;try{const c=await d.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var i,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,d,l;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(d=(a=this.params)===null||a===void 0?void 0:a.config)===null||d===void 0?void 0:d.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=_e.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Lt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(s=>{i=new El(this,Lt.leave,{},e),i.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=_e.closed,this.bindings={}}async _fetchWithTimeout(e,r,i){const s=new AbortController,o=setTimeout(()=>s.abort(),i),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),a}_push(e,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new El(this,e,r,i);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ab){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,i){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,i){var s,o;const a=e.toLocaleLowerCase(),{close:d,error:l,leave:c,join:u}=Lt;if(i&&[d,l,c,u].indexOf(a)>=0&&i!==this._joinRef())return;let p=this._onMessage(a,r,i);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var x,y,v;return((x=f.filter)===null||x===void 0?void 0:x.event)==="*"||((v=(y=f.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===a}).map(f=>f.callback(p,i)):(o=this.bindings[a])===null||o===void 0||o.filter(f=>{var x,y,v,g,m,b;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const j=f.id,R=(x=f.filter)===null||x===void 0?void 0:x.event;return j&&((y=r.ids)===null||y===void 0?void 0:y.includes(j))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const j=(m=(g=f==null?void 0:f.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return j==="*"||j===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof p=="object"&&"ids"in p){const x=p.data,{schema:y,table:v,commit_timestamp:g,type:m,errors:b}=x;p=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:g,eventType:m,new:{},old:{},errors:b}),this._getPayloadRecords(x))}f.callback(p,i)})}_isClosed(){return this.state===_e.closed}_isJoined(){return this.state===_e.joined}_isJoining(){return this.state===_e.joining}_isLeaving(){return this.state===_e.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,i){const s=e.toLocaleLowerCase(),o={type:s,filter:r,callback:i};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,r){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&Gi.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const i in e)if(e[i]!==r[i])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Lt.close,{},e)}_onError(e){this._on(Lt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_e.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=lh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=lh(e.columns,e.old_record)),r}};const Tl=()=>{},mo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},xb=[1e3,2e3,5e3,1e4],mb=1e4,yb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let vb=class{constructor(e,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kd,this.transport=null,this.heartbeatIntervalMs=mo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Tl,this.ref=0,this.reconnectTimer=null,this.vsn=ah,this.logger=Tl,this.conn=null,this.sendBuffer=[],this.serializer=new lb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...o)=>s(...o):(...o)=>fetch(...o),!(!((i=r==null?void 0:r.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Jd.websocket}`,this.httpEndpoint=jm(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=mm.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,i){this.logger(e,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case ln.connecting:return dn.Connecting;case ln.open:return dn.Open;case ln.closing:return dn.Closing;default:return dn.Closed}}isConnected(){return this.connectionState()===dn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const i=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===i);if(s)return s;{const o=new Sm(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:i,payload:s,ref:o}=e,a=()=>{this.encode(e,d=>{var l;(l=this.conn)===null||l===void 0||l.send(d)})};this.log("push",`${r} ${i} (${o})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ob,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},mo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:s,payload:o,ref:a}=r,d=a?`(${a})`:"",l=o.status||"";this.log("receive",`${l} ${i} ${s} ${d}`.trim(),o),this.channels.filter(c=>c._isMember(i)).forEach(c=>c._trigger(s,o,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ln.open||this.conn.readyState===ln.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Lt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const i=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${i}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const i=new Blob([yb],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,i=!1;if(e)r=e,i=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const o={access_token:r,version:ib};r&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(Lt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new vm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},mo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,i,s,o,a,d,l,c,u,h,p,f;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:Kd,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:mo.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:Tl,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:ah,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:x=>xb[x-1]||mb,this.vsn){case ym:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(x,y)=>y(JSON.stringify(x)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(x,y)=>y(JSON.parse(x));break;case sb:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const bb=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:gb,get REALTIME_LISTEN_TYPES(){return oi},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Xd},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Yd},get REALTIME_SUBSCRIBE_STATES(){return Gt},RealtimeChannel:Sm,RealtimeClient:vb,RealtimePresence:wm,WebSocketFactory:mm},Symbol.toStringTag,{value:"Module"})),km=Ds(bb);class Ws extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function he(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class _m extends Ws{constructor(e,r,i){super(e),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ma extends Ws{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const bu=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),jb=()=>Response,Zd=t=>{if(Array.isArray(t))return t.map(r=>Zd(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,i])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=Zd(i)}),e},wb=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Sb=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Il=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},kb=(t,e,r)=>H(void 0,void 0,void 0,function*(){const i=yield jb();t instanceof i&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const o=t.status||500,a=(s==null?void 0:s.statusCode)||o+"";e(new _m(Il(s),o,a))}).catch(s=>{e(new ma(Il(s),s))}):e(new ma(Il(t),t))}),_b=(t,e,r,i)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!i?s:(wb(i)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(i)):s.body=i,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function Us(t,e,r,i,s,o){return H(this,void 0,void 0,function*(){return new Promise((a,d)=>{t(r,_b(e,i,s,o)).then(l=>{if(!l.ok)throw l;return i!=null&&i.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>kb(l,d,i))})})}function Rs(t,e,r,i){return H(this,void 0,void 0,function*(){return Us(t,"GET",e,r,i)})}function At(t,e,r,i,s){return H(this,void 0,void 0,function*(){return Us(t,"POST",e,i,s,r)})}function ec(t,e,r,i,s){return H(this,void 0,void 0,function*(){return Us(t,"PUT",e,i,s,r)})}function Cb(t,e,r,i){return H(this,void 0,void 0,function*(){return Us(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function ju(t,e,r,i,s){return H(this,void 0,void 0,function*(){return Us(t,"DELETE",e,i,s,r)})}class zb{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return H(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(he(e))return{data:null,error:e};throw e}})}}var Cm;class Rb{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[Cm]="BlobDownloadBuilder",this.promise=null}asStream(){return new zb(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return H(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(he(e))return{data:null,error:e};throw e}})}}Cm=Symbol.toStringTag;const Eb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Tb{constructor(e,r={},i,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=i,this.fetch=bu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,i,s){return H(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},dh),s);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),l&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(l))):(o=i,d["cache-control"]=`max-age=${a.cacheControl}`,d["content-type"]=a.contentType,l&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),s!=null&&s.headers&&(d=Object.assign(Object.assign({},d),s.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield(e=="PUT"?ec:At)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:d},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(he(o))return{data:null,error:o};throw o}})}upload(e,r,i){return H(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,i)})}uploadToSignedUrl(e,r,i,s){return H(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),d=new URL(this.url+`/object/upload/sign/${a}`);d.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:dh.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl)):(l=i,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield ec(this.fetch,d.toString(),l,{headers:u});return{data:{path:o,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(he(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return H(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield At(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:s}),a=new URL(this.url+o.url),d=a.searchParams.get("token");if(!d)throw new Ws("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:d},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(he(i))return{data:null,error:i};throw i}})}update(e,r,i){return H(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,i)})}move(e,r,i){return H(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}})}copy(e,r,i){return H(this,void 0,void 0,function*(){try{return{data:{path:(yield At(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,i){return H(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield At(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const a=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,i){return H(this,void 0,void 0,function*(){try{const s=yield At(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=o?`?${o}`:"",d=this._getFinalPath(e),l=()=>Rs(this.fetch,`${this.url}/${s}/${d}${a}`,{headers:this.headers,noResolveJson:!0});return new Rb(l,this.shouldThrowOnError)}info(e){return H(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const i=yield Rs(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Zd(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(he(i))return{data:null,error:i};throw i}})}exists(e){return H(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Cb(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(he(i)&&i instanceof ma){const s=i.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,r){const i=this._getFinalPath(e),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const d=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${i}${c}`)}}}remove(e){return H(this,void 0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}list(e,r,i){return H(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Eb),r),{prefix:e||""});return{data:yield At(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},i),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}})}listV2(e,r){return H(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield At(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(he(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const zm="2.87.1",Rm={"X-Client-Info":`storage-js/${zm}`};class Ib{constructor(e,r={},i,s){this.shouldThrowOnError=!1;const o=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rm),r),this.fetch=bu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return H(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Rs(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}getBucket(e){return H(this,void 0,void 0,function*(){try{return{data:yield Rs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}createBucket(e){return H(this,arguments,void 0,function*(r,i={public:!1}){try{return{data:yield At(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return H(this,void 0,void 0,function*(){try{return{data:yield ec(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(he(i))return{data:null,error:i};throw i}})}emptyBucket(e){return H(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}deleteBucket(e){return H(this,void 0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Es=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Pb(t,e,r){const i=new URL(e,t);if(r)for(const[s,o]of Object.entries(r))o!==void 0&&i.searchParams.set(s,o);return i.toString()}async function Ab(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Ob(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:i,query:s,body:o,headers:a}){const d=Pb(t.baseUrl,i,s),l=await Ab(t.auth),c=await e(d,{method:r,headers:{...o?{"Content-Type":"application/json"}:{},...l,...a},body:o?JSON.stringify(o):void 0}),u=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),p=h&&u?JSON.parse(u):u;if(!c.ok){const f=h?p:void 0,x=f==null?void 0:f.error;throw new Es((x==null?void 0:x.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:x==null?void 0:x.type,icebergCode:x==null?void 0:x.code,details:f})}return{status:c.status,headers:c.headers,data:p}}}}function yo(t){return t.join("")}var Lb=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:yo(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${yo(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${yo(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${yo(t.namespace)}`}),!0}catch(e){if(e instanceof Es&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Es&&r.status===409)return;throw r}}};function An(t){return t.join("")}var Db=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${An(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${An(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${An(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${An(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${An(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${An(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Es&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Es&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},Nb=class{constructor(t){var i;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Ob({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(i=t.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new Lb(this.client,e),this.tableOps=new Db(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class Em{constructor(e,r={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rm),r),this.fetch=bu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return H(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}listBuckets(e){return H(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const i=r.toString(),s=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield Rs(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}deleteBucket(e){return H(this,void 0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}from(e){if(!Sb(e))throw new Ws("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Nb({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>H(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(r,{get(o,a){const d=o[a];return typeof d!="function"?d:(...l)=>H(this,void 0,void 0,function*(){try{return{data:yield d.apply(o,l),error:null}}catch(c){if(i)throw c;return{data:null,error:c}}})}})}}const wu={"X-Client-Info":`storage-js/${zm}`,"Content-Type":"application/json"};class Su extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function nt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Mo extends Su{constructor(e,r,i){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tm extends Su{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var tc;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(tc||(tc={}));const Ja=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Mb=()=>Response,Im=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Bb=t=>Array.from(new Float32Array(t)),$b=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},ch=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Fb=(t,e,r)=>H(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t.status||500,o=t;if(typeof o.json=="function")o.json().then(a=>{const d=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||s+"";e(new Mo(ch(a),s,d))}).catch(()=>{const a=s+"",d=o.statusText||`HTTP ${s} error`;e(new Mo(d,s,a))});else{const a=s+"",d=o.statusText||`HTTP ${s} error`;e(new Mo(d,s,a))}}else e(new Tm(ch(t),t))}),Wb=(t,e,r,i)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return i?(Im(i)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(i)):s.body=i,Object.assign(Object.assign({},s),r)):s};function Ub(t,e,r,i,s,o){return H(this,void 0,void 0,function*(){return new Promise((a,d)=>{t(r,Wb(e,i,s,o)).then(l=>{if(!l.ok)throw l;if(i!=null&&i.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>Fb(l,d,i))})})}function ht(t,e,r,i,s){return H(this,void 0,void 0,function*(){return Ub(t,"POST",e,i,s,r)})}class Pm{constructor(e,r={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wu),r),this.fetch=Ja(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return H(this,void 0,void 0,function*(){try{return{data:(yield ht(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}getIndex(e,r){return H(this,void 0,void 0,function*(){try{return{data:yield ht(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nt(i))return{data:null,error:i};throw i}})}listIndexes(e){return H(this,void 0,void 0,function*(){try{return{data:yield ht(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return H(this,void 0,void 0,function*(){try{return{data:(yield ht(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nt(i))return{data:null,error:i};throw i}})}}class Am{constructor(e,r={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wu),r),this.fetch=Ja(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return H(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ht(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}getVectors(e){return H(this,void 0,void 0,function*(){try{return{data:yield ht(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}listVectors(e){return H(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield ht(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}queryVectors(e){return H(this,void 0,void 0,function*(){try{return{data:yield ht(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}deleteVectors(e){return H(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ht(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}}class Om{constructor(e,r={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wu),r),this.fetch=Ja(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return H(this,void 0,void 0,function*(){try{return{data:(yield ht(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}getBucket(e){return H(this,void 0,void 0,function*(){try{return{data:yield ht(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}listBuckets(){return H(this,arguments,void 0,function*(e={}){try{return{data:yield ht(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return H(this,void 0,void 0,function*(){try{return{data:(yield ht(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}}class Lm extends Om{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new Dm(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return H(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return H(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return H(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return H(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class Dm extends Pm{constructor(e,r,i,s){super(e,r,s),this.vectorBucketName=i}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return H(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return H(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return H(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return H(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Nm(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Nm extends Am{constructor(e,r,i,s,o){super(e,r,o),this.vectorBucketName=i,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return H(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return H(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return H(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return H(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return H(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class qb extends Ib{constructor(e,r={},i,s){super(e,r,i,s)}from(e){return new Tb(this.url,this.headers,e,this.fetch)}get vectors(){return new Lm(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Em(this.url+"/iceberg",this.headers,this.fetch)}}const Vb=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:Em,StorageApiError:_m,StorageClient:qb,StorageError:Ws,StorageUnknownError:ma,StorageVectorsApiError:Mo,StorageVectorsClient:Lm,StorageVectorsError:Su,get StorageVectorsErrorCode(){return tc},StorageVectorsUnknownError:Tm,VectorBucketApi:Om,VectorBucketScope:Dm,VectorDataApi:Am,VectorIndexApi:Pm,VectorIndexScope:Nm,isPlainObject:Im,isStorageError:he,isStorageVectorsError:nt,normalizeToFloat32:Bb,resolveFetch:Ja,resolveResponse:Mb,validateVectorDimension:$b},Symbol.toStringTag,{value:"Module"})),Hb=Ds(Vb);var Mm={},Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.version=void 0;Qa.version="2.87.1";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=Qa;let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(Mm);var Bm={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=s=>s?(...o)=>s(...o):(...o)=>fetch(...o);t.resolveFetch=e;const r=()=>Headers;t.resolveHeadersConstructor=r;const i=(s,o,a)=>{const d=(0,t.resolveFetch)(a),l=(0,t.resolveHeadersConstructor)();return async(c,u)=>{var h;const p=(h=await o())!==null&&h!==void 0?h:s;let f=new l(u==null?void 0:u.headers);return f.has("apikey")||f.set("apikey",s),f.has("Authorization")||f.set("Authorization",`Bearer ${p}`),d(c,Object.assign(Object.assign({},u),{headers:f}))}};t.fetchWithAuth=i})(Bm);var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.isBrowser=void 0;Jr.uuid=Gb;Jr.ensureTrailingSlash=$m;Jr.applySettingDefaults=Jb;Jr.validateSupabaseUrl=Qb;function Gb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t=="x"?e:e&3|8;return r.toString(16)})}function $m(t){return t.endsWith("/")?t:t+"/"}const Kb=()=>typeof window<"u";Jr.isBrowser=Kb;function Jb(t,e){var r,i;const{db:s,auth:o,realtime:a,global:d}=t,{db:l,auth:c,realtime:u,global:h}=e,p={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),d),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(i=d==null?void 0:d.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function Qb(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($m(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Ya={};const Fm="2.87.1",$n=30*1e3,rc=3,Pl=rc*$n,Yb="http://localhost:9999",Xb="supabase.auth.token",Zb={"X-Client-Info":`gotrue-js/${Fm}`},nc="X-Supabase-Api-Version",Wm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},e2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,t2=10*60*1e3;let mi=class extends Error{constructor(e,r,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}};function K(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let Um=class extends mi{constructor(e,r,i){super(e,r,i),this.name="AuthApiError",this.status=r,this.code=i}};function qm(t){return K(t)&&t.name==="AuthApiError"}let Cr=class extends mi{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}},xr=class extends mi{constructor(e,r,i,s){super(e,i,s),this.name=r,this.status=i}},tt=class extends xr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Vm(t){return K(t)&&t.name==="AuthSessionMissingError"}let sn=class extends xr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Ki=class extends xr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Ji=class extends xr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Hm(t){return K(t)&&t.name==="AuthImplicitGrantRedirectError"}let ic=class extends xr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},ya=class extends xr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}};function Bo(t){return K(t)&&t.name==="AuthRetryableFetchError"}let sc=class extends xr{constructor(e,r,i){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}};function r2(t){return K(t)&&t.name==="AuthWeakPasswordError"}let va=class extends xr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const ba="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),uh=` 	
\r=`.split(""),n2=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<uh.length;e+=1)t[uh[e].charCodeAt(0)]=-2;for(let e=0;e<ba.length;e+=1)t[ba[e].charCodeAt(0)]=e;return t})();function ph(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;r(ba[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;r(ba[i]),e.queuedBits-=6}}function Gm(t,e,r){const i=n2[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function hh(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},i={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=a=>{o2(a,i,r)};for(let a=0;a<t.length;a+=1)Gm(t.charCodeAt(a),s,o);return e.join("")}function i2(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function s2(t,e){for(let r=0;r<t.length;r+=1){let i=t.charCodeAt(r);if(i>55295&&i<=56319){const s=(i-55296)*1024&65535;i=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}i2(i,e)}}function o2(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let i=1;i<6;i+=1)if(!(t>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ai(t){const e=[],r={queue:0,queuedBits:0},i=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Gm(t.charCodeAt(s),r,i);return new Uint8Array(e)}function a2(t){const e=[];return s2(t,r=>e.push(r)),new Uint8Array(e)}function hn(t){const e=[],r={queue:0,queuedBits:0},i=s=>{e.push(s)};return t.forEach(s=>ph(s,r,i)),ph(null,r,i),e.join("")}function l2(t){return Math.round(Date.now()/1e3)+t}function d2(){return Symbol("auth-callback")}const Ne=()=>typeof window<"u"&&typeof document<"u",Xr={tested:!1,writable:!1},Km=()=>{if(!Ne())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xr.tested)return Xr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Xr.tested=!0,Xr.writable=!0}catch{Xr.tested=!0,Xr.writable=!1}return Xr.writable};function c2(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return r.searchParams.forEach((i,s)=>{e[s]=i}),e}const Jm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),u2=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Fn=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Zr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},De=async(t,e)=>{await t.removeItem(e)};class Xa{constructor(){this.promise=new Xa.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Xa.promiseConstructor=Promise;function Al(t){const e=t.split(".");if(e.length!==3)throw new va("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!e2.test(e[i]))throw new va("JWT not in base64url format");return{header:JSON.parse(hh(e[0])),payload:JSON.parse(hh(e[1])),signature:ai(e[2]),raw:{header:e[0],payload:e[1]}}}async function p2(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function h2(t,e){return new Promise((i,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){i(a);return}}catch(a){if(!e(o,a)){s(a);return}}})()})}function f2(t){return("0"+t.toString(16)).substr(-2)}function g2(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*i));return s}return crypto.getRandomValues(e),Array.from(e,f2).join("")}async function x2(t){const r=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(i);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function m2(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await x2(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function On(t,e,r=!1){const i=g2();let s=i;r&&(s+="/PASSWORD_RECOVERY"),await Fn(t,`${e}-code-verifier`,s);const o=await m2(i);return[o,i===o?"plain":"s256"]}const y2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function v2(t){const e=t.headers.get(nc);if(!e||!e.match(y2))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function b2(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function j2(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const w2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ln(t){if(!w2.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ol(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function S2(t,e){return new Proxy(t,{get:(r,i,s)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,i,s)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,i,s)}})}function fh(t){return JSON.parse(JSON.stringify(t))}const on=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),k2=[502,503,504];async function gh(t){var e;if(!u2(t))throw new ya(on(t),0);if(k2.includes(t.status))throw new ya(on(t),t.status);let r;try{r=await t.json()}catch(o){throw new Cr(on(o),o)}let i;const s=v2(t);if(s&&s.getTime()>=Wm["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new sc(on(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new tt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new sc(on(r),t.status,r.weak_password.reasons);throw new Um(on(r),t.status||500,i)}const _2=(t,e,r,i)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(i),Object.assign(Object.assign({},s),r))};async function J(t,e,r,i){var s;const o=Object.assign({},i==null?void 0:i.headers);o[nc]||(o[nc]=Wm["2024-01-01"].name),i!=null&&i.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const a=(s=i==null?void 0:i.query)!==null&&s!==void 0?s:{};i!=null&&i.redirectTo&&(a.redirect_to=i.redirectTo);const d=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await C2(t,e,r+d,{headers:o,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function C2(t,e,r,i,s,o){const a=_2(e,i,s,o);let d;try{d=await t(r,Object.assign({},a))}catch(l){throw console.error(l),new ya(on(l),0)}if(d.ok||await gh(d),i!=null&&i.noResolveJson)return d;try{return await d.json()}catch(l){await gh(l)}}function It(t){var e;let r=null;E2(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=l2(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:i},error:null}}function xh(t){const e=It(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function zr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function z2(t){return{data:t,error:null}}function R2(t){const{action_link:e,email_otp:r,hashed_token:i,redirect_to:s,verification_type:o}=t,a=Ci(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:r,hashed_token:i,redirect_to:s,verification_type:o},l=Object.assign({},a);return{data:{properties:d,user:l},error:null}}function mh(t){return t}function E2(t){return t.access_token&&t.refresh_token&&t.expires_in}const $o=["global","local","others"];let ku=class{constructor({url:e="",headers:r={},fetch:i}){this.url=e,this.headers=r,this.fetch=Jm(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=$o[0]){if($o.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$o.join(", ")}`);try{return await J(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(K(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,r={}){try{return await J(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:zr})}catch(i){if(K(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:r}=e,i=Ci(e,["options"]),s=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(s.new_email=i==null?void 0:i.newEmail,delete s.newEmail),await J(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:R2,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(K(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await J(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:zr})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,i,s,o,a,d,l;try{const c={nextPage:null,lastPage:0,total:0},u=await J(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:mh});if(u.error)throw u.error;const h=await u.json(),p=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(l=(d=u.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(x=>{const y=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(x.split(";")[1].split("=")[1]);c[`${v}Page`]=y}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(K(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ln(e);try{return await J(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:zr})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Ln(e);try{return await J(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:zr})}catch(i){if(K(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,r=!1){Ln(e);try{return await J(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:zr})}catch(i){if(K(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Ln(e.userId);try{const{data:r,error:i}=await J(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:i}}catch(r){if(K(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Ln(e.userId),Ln(e.id);try{return{data:await J(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,i,s,o,a,d,l;try{const c={nextPage:null,lastPage:0,total:0},u=await J(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:mh});if(u.error)throw u.error;const h=await u.json(),p=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(l=(d=u.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(x=>{const y=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(x.split(";")[1].split("=")[1]);c[`${v}Page`]=y}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(K(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await J(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(K(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await J(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(K(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await J(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(K(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await J(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await J(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(K(r))return{data:null,error:r};throw r}}};function yh(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const an={debug:!!(globalThis&&Km()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _u extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let Qm=class extends _u{};class T2 extends _u{}async function Ym(t,e,r){an.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),an.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async s=>{if(s){an.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{an.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw an.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Qm(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(an.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const vh={};async function I2(t,e,r){var i;const s=(i=vh[t])!==null&&i!==void 0?i:Promise.resolve(),o=Promise.race([s.catch(()=>null),e>=0?new Promise((a,d)=>{setTimeout(()=>{d(new T2(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(a=>a)).catch(a=>{if(a&&a.isAcquireTimeout)throw a;return null}).then(async()=>await r());return vh[t]=o.catch(async a=>{if(a&&a.isAcquireTimeout)return await s,null;throw a}),await o}function P2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Xm(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function A2(t){return parseInt(t,16)}function O2(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function L2(t){var e;const{chainId:r,domain:i,expirationTime:s,issuedAt:o=new Date,nonce:a,notBefore:d,requestId:l,resources:c,scheme:u,uri:h,version:p}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=Xm(t.address),x=u?`${u}://${i}`:i,y=t.statement?`${t.statement}
`:"",v=`${x} wants you to sign in with your Ethereum account:
${f}

${y}`;let g=`URI: ${h}
Version: ${p}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),d&&(g+=`
Not Before: ${d.toISOString()}`),l&&(g+=`
Request ID: ${l}`),c){let m=`
Resources:`;for(const b of c){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);m+=`
- ${b}`}g+=m}return`${v}
${g}`}class Ce extends Error{constructor({message:e,code:r,cause:i,name:s}){var o;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(o=s??(i instanceof Error?i.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class ja extends Ce{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function D2({error:t,options:e}){var r,i,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ce({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ce({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ce({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ce({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ce({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ce({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Ce({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ce({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Zm(a)){if(o.rp.id!==a)return new Ce({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ce({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ce({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ce({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ce({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function N2({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ce({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ce({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(Zm(i)){if(r.rpId!==i)return new Ce({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ce({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ce({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ce({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class M2{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const B2=new M2;function $2(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:i}=t,s=Ci(t,["challenge","user","excludeCredentials"]),o=ai(e).buffer,a=Object.assign(Object.assign({},r),{id:ai(r.id).buffer}),d=Object.assign(Object.assign({},s),{challenge:o,user:a});if(i&&i.length>0){d.excludeCredentials=new Array(i.length);for(let l=0;l<i.length;l++){const c=i[l];d.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:ai(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return d}function F2(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,i=Ci(t,["challenge","allowCredentials"]),s=ai(e).buffer,o=Object.assign(Object.assign({},i),{challenge:s});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const d=r[a];o.allowCredentials[a]=Object.assign(Object.assign({},d),{id:ai(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function W2(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:hn(new Uint8Array(t.response.attestationObject)),clientDataJSON:hn(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function U2(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,i=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:hn(new Uint8Array(s.authenticatorData)),clientDataJSON:hn(new Uint8Array(s.clientDataJSON)),signature:hn(new Uint8Array(s.signature)),userHandle:s.userHandle?hn(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Zm(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function bh(){var t,e;return!!(Ne()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function q2(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ja("Browser returned unexpected credential type",e)}:{data:null,error:new ja("Empty credential response",e)}}catch(e){return{data:null,error:D2({error:e,options:t})}}}async function V2(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ja("Browser returned unexpected credential type",e)}:{data:null,error:new ja("Empty credential response",e)}}catch(e){return{data:null,error:N2({error:e,options:t})}}}const H2={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},G2={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function wa(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),i={};for(const s of t)if(s)for(const o in s){const a=s[o];if(a!==void 0)if(Array.isArray(a))i[o]=a;else if(r(a))i[o]=a;else if(e(a)){const d=i[o];e(d)?i[o]=wa(d,a):i[o]=wa(a)}else i[o]=a}return i}function K2(t,e){return wa(H2,t,e||{})}function J2(t,e){return wa(G2,t,e||{})}class Q2{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:i,signal:s},o){try{const{data:a,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:d};const l=s??B2.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${i}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=K2(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:u,error:h}=await q2({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const c=J2(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:u,error:h}=await V2(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(a){return K(a)?{data:null,error:a}:{data:null,error:new Cr("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!r)return{data:null,error:new mi("rpId is required for WebAuthn authentication")};try{if(!bh())return{data:null,error:new Cr("Browser does not support WebAuthn",null)};const{data:a,error:d}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:i},signal:s},{request:o});if(!a)return{data:null,error:d};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:i,credential_response:l.credential_response}})}catch(a){return K(a)?{data:null,error:a}:{data:null,error:new Cr("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!r)return{data:null,error:new mi("rpId is required for WebAuthn registration")};try{if(!bh())return{data:null,error:new Cr("Browser does not support WebAuthn",null)};const{data:a,error:d}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:d};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:s},{create:o});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:i,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return K(a)?{data:null,error:a}:{data:null,error:new Cr("Unexpected error in register",a)}}}}P2();const Y2={url:Yb,storageKey:Xb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Zb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function jh(t,e,r){return await r()}const Dn={};let Cu=class oc{get jwks(){var e,r;return(r=(e=Dn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Dn[this.storageKey]=Object.assign(Object.assign({},Dn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Dn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Dn[this.storageKey]=Object.assign(Object.assign({},Dn[this.storageKey]),{cachedAt:e})}constructor(e){var r,i,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},Y2),e);if(this.storageKey=o.storageKey,this.instanceID=(r=oc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,oc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Ne()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new ku({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Jm(o.fetch),this.lock=o.lock||jh,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&Ne()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=Ym:this.lock=jh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Q2(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Km()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=yh(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=yh(this.memoryStorage)),Ne()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Fm}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},i="none";if(Ne()&&(r=c2(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),Ne()&&this.detectSessionInUrl&&i!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Hm(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:d}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",d),await this._saveSession(a),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return K(r)?this._returnResult({error:r}):this._returnResult({error:new Cr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,i,s;try{const o=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:It}),{data:a,error:d}=o;if(d||!a)return this._returnResult({data:{user:null,session:null},error:d});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(o){if(K(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var r,i,s;try{let o;if("email"in e){const{email:u,password:h,options:p}=e;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await On(this.storage,this.storageKey)),o=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:f,code_challenge_method:x},xform:It})}else if("phone"in e){const{phone:u,password:h,options:p}=e;o=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(i=p==null?void 0:p.data)!==null&&i!==void 0?i:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:It})}else throw new Ki("You must provide either an email or phone number and a password");const{data:a,error:d}=o;if(d||!a)return await De(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(o){if(await De(this.storage,`${this.storageKey}-code-verifier`),K(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:a,options:d}=e;r=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:xh})}else if("phone"in e){const{phone:o,password:a,options:d}=e;r=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:xh})}else throw new Ki("You must provide either an email or phone number and a password");const{data:i,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!i||!i.session||!i.user){const o=new sn;return this._returnResult({data:{user:null,session:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(r){if(K(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,i,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,i,s,o,a,d,l,c,u,h,p;let f,x;if("message"in e)f=e.message,x=e.signature;else{const{chain:y,wallet:v,statement:g,options:m}=e;let b;if(Ne())if(typeof v=="object")b=v;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")b=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const j=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),R=await b.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=Xm(R[0]);let k=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!k){const I=await b.request({method:"eth_chainId"});k=A2(I)}const P={domain:j.host,address:T,statement:g,uri:j.href,version:"1",chainId:k,nonce:(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(o=m==null?void 0:m.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(d=m==null?void 0:m.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=L2(P),x=await b.request({method:"personal_sign",params:[O2(f),T]})}try{const{data:y,error:v}=await J(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:x},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:It});if(v)throw v;if(!y||!y.session||!y.user){const g=new sn;return this._returnResult({data:{user:null,session:null},error:g})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:v})}catch(y){if(K(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var r,i,s,o,a,d,l,c,u,h,p,f;let x,y;if("message"in e)x=e.message,y=e.signature;else{const{chain:v,wallet:g,statement:m,options:b}=e;let j;if(Ne())if(typeof g=="object")j=g;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))j=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=g}const R=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const T=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),m?{statement:m}:null));let k;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")k=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)k=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)x=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),y=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${R.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(s=(i=b==null?void 0:b.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const T=await j.signMessage(new TextEncoder().encode(x),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=T}}try{const{data:v,error:g}=await J(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:hn(y)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:It});if(g)throw g;if(!v||!v.session||!v.user){const m=new sn;return this._returnResult({data:{user:null,session:null},error:m})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:g})}catch(v){if(K(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){const r=await Zr(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(r??"").split("/");try{const{data:o,error:a}=await J(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:It});if(await De(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const d=new sn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(await De(this.storage,`${this.storageKey}-code-verifier`),K(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:r,provider:i,token:s,access_token:o,nonce:a}=e,d=await J(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:It}),{data:l,error:c}=d;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new sn;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(r){if(K(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,i,s,o,a;try{if("email"in e){const{email:d,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await On(this.storage,this.storageKey));const{error:h}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:d,options:l}=e,{data:c,error:u}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new Ki("You must provide either an email or phone number.")}catch(d){if(await De(this.storage,`${this.storageKey}-code-verifier`),K(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var r,i;try{let s,o;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:a,error:d}=await J(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:It});if(d)throw d;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(K(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,i,s,o,a;try{let d=null,l=null;this.flowType==="pkce"&&([d,l]=await On(this.storage,this.storageKey));const c=await J(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:l}),headers:this.headers,xform:z2});return!((o=c.data)===null||o===void 0)&&o.url&&Ne()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(d){if(await De(this.storage,`${this.storageKey}-code-verifier`),K(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new tt;const{error:s}=await J(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(K(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:i,type:s,options:o}=e,{error:a}=await J(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:i,type:s,options:o}=e,{data:a,error:d}=await J(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:d})}throw new Ki("You must provide either an email or phone number and a type")}catch(r){if(K(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Zr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Pl:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const a=await Zr(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Ol()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=S2(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:zr}):await this._useSession(async r=>{var i,s,o;const{data:a,error:d}=r;if(d)throw d;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new tt}:await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:zr})})}catch(r){if(K(r))return Vm(r)&&(await this._removeSession(),await De(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async i=>{const{data:s,error:o}=i;if(o)throw o;if(!s.session)throw new tt;const a=s.session;let d=null,l=null;this.flowType==="pkce"&&e.email!=null&&([d,l]=await On(this.storage,this.storageKey));const{data:c,error:u}=await J(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:l}),jwt:a.access_token,xform:zr});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(await De(this.storage,`${this.storageKey}-code-verifier`),K(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new tt;const r=Date.now()/1e3;let i=r,s=!0,o=null;const{payload:a}=Al(e.access_token);if(a.exp&&(i=a.exp,s=i<=r),s){const{data:d,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(K(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var i;if(!e){const{data:a,error:d}=r;if(d)throw d;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new tt;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(K(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Ne())throw new Ji("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ji(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ic("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ji("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ic("No code detected.");const{data:m,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:d,expires_at:l,token_type:c}=e;if(!o||!d||!a||!c)throw new Ji("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(d);let p=u+h;l&&(p=parseInt(l));const f=p-u;f*1e3<=$n&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const x=p-h;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,p,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,p,u);const{data:y,error:v}=await this._getUser(o);if(v)throw v;const g={provider_token:i,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:p,refresh_token:a,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(i){if(K(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Zr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:s,error:o}=r;if(o)return this._returnResult({error:o});const a=(i=s.session)===null||i===void 0?void 0:i.access_token;if(a){const{error:d}=await this.admin.signOut(a,e);if(d&&!(qm(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await De(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=d2(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async r=>{var i,s;try{const{data:{session:o},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let i=null,s=null;this.flowType==="pkce"&&([i,s]=await On(this.storage,this.storageKey,!0));try{return await J(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(await De(this.storage,`${this.storageKey}-code-verifier`),K(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(K(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:i,error:s}=await this._useSession(async o=>{var a,d,l,c,u;const{data:h,error:p}=o;if(p)throw p;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await J(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Ne()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:e.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(K(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var i;try{const{error:s,data:{session:o}}=r;if(s)throw s;const{options:a,provider:d,token:l,access_token:c,nonce:u}=e,h=await J(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=o==null?void 0:o.access_token)!==null&&i!==void 0?i:void 0,body:{provider:d,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:It}),{data:p,error:f}=h;return f?this._returnResult({data:{user:null,session:null},error:f}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new sn}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:f}))}catch(s){if(await De(this.storage,`${this.storageKey}-code-verifier`),K(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var i,s;const{data:o,error:a}=r;if(a)throw a;return await J(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(K(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await h2(async s=>(s>0&&await p2(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await J(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:It})),(s,o)=>{const a=200*Math.pow(2,s);return o&&Bo(o)&&Date.now()+a-i<$n})}catch(i){if(this._debug(r,"error",i),K(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),Ne()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const s=await Zr(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Zr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Fn(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Ol()}else if(s&&!s.user&&!s.user){const a=await Zr(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await De(this.storage,this.storageKey+"-user"),await Fn(this.storage,this.storageKey,s)):s.user=Ol()}if(this._debug(i,"session from storage",s),!this._isValidSession(s)){this._debug(i,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Pl;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${Pl}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Bo(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:d}=await this._getUser(s.access_token);!d&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(i,"error",s),console.error(s);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var r,i;if(!e)throw new tt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Xa;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new tt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(s,"error",o),K(o)){const a={data:null,error:o};return Bo(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,i=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,r)}catch(l){o.push(l)}});if(await Promise.all(a),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await De(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Fn(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=fh(s);await Fn(this.storage,this.storageKey,o)}else{const s=fh(r);await Fn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await De(this.storage,this.storageKey),await De(this.storage,this.storageKey+"-code-verifier"),await De(this.storage,this.storageKey+"-user"),this.userStorage&&await De(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ne()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$n);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((i.expires_at*1e3-e)/$n);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${$n}ms, refresh threshold is ${rc} ticks`),s<=rc&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof _u)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ne()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,i){const s=[`provider=${encodeURIComponent(r)}`];if(i!=null&&i.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,a]=await On(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(d.toString())}if(i!=null&&i.queryParams){const o=new URLSearchParams(i.queryParams);s.push(o.toString())}return i!=null&&i.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var i;const{data:s,error:o}=r;return o?this._returnResult({data:null,error:o}):await J(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(K(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var i,s;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await J(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(K(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?W2(e.webauthn.credential_response):U2(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:l}=await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:l}))})}catch(r){if(K(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;const{data:d}=a;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:$2(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:F2(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(K(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:i},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Al(i.access_token);let a=null;o.aal&&(a=o.aal);let d=a;((r=(e=i.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:d,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;return s?this._returnResult({data:null,error:s}):i?await J(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new tt})})}catch(r){if(K(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async i=>{const{data:{session:s},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new tt});const a=await J(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return a.data&&a.data.redirect_url&&Ne()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(i){if(K(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,r){try{return await this._useSession(async i=>{const{data:{session:s},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new tt});const a=await J(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return a.data&&a.data.redirect_url&&Ne()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(i){if(K(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:i}=e;return i?this._returnResult({data:null,error:i}):r?await J(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new tt})})}catch(e){if(K(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;return s?this._returnResult({data:null,error:s}):i?(await J(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new tt})})}catch(r){if(K(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let i=r.keys.find(d=>d.kid===e);if(i)return i;const s=Date.now();if(i=this.jwks.keys.find(d=>d.kid===e),i&&this.jwks_cached_at+t2>s)return i;const{data:o,error:a}=await J(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,i=o.keys.find(d=>d.kid===e),!i)?null:i}async getClaims(e,r={}){try{let i=e;if(!i){const{data:f,error:x}=await this.getSession();if(x||!f.session)return this._returnResult({data:null,error:x});i=f.session.access_token}const{header:s,payload:o,signature:a,raw:{header:d,payload:l}}=Al(i);r!=null&&r.allowExpired||b2(o.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:f}=await this.getUser(i);if(f)throw f;return{data:{claims:o,header:s,signature:a},error:null}}const u=j2(s.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,a2(`${d}.${l}`)))throw new va("Invalid JWT signature");return{data:{claims:o,header:s,signature:a},error:null}}catch(i){if(K(i))return this._returnResult({data:null,error:i});throw i}}};Cu.nextInstanceID={};const X2=ku,Z2=Cu,ej=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:X2,AuthApiError:Um,AuthClient:Z2,AuthError:mi,AuthImplicitGrantRedirectError:Ji,AuthInvalidCredentialsError:Ki,AuthInvalidJwtError:va,AuthInvalidTokenResponseError:sn,AuthPKCEGrantCodeExchangeError:ic,AuthRetryableFetchError:ya,AuthSessionMissingError:tt,AuthUnknownError:Cr,AuthWeakPasswordError:sc,CustomAuthError:xr,GoTrueAdminApi:ku,GoTrueClient:Cu,NavigatorLockAcquireTimeoutError:Qm,SIGN_OUT_SCOPES:$o,isAuthApiError:qm,isAuthError:K,isAuthImplicitGrantRedirectError:Hm,isAuthRetryableFetchError:Bo,isAuthSessionMissingError:Vm,isAuthWeakPasswordError:r2,lockInternals:an,navigatorLock:Ym,processLock:I2},Symbol.toStringTag,{value:"Module"})),ey=Ds(ej);Object.defineProperty(Ya,"__esModule",{value:!0});Ya.SupabaseAuthClient=void 0;const tj=ey;class rj extends tj.AuthClient{constructor(e){super(e)}}Ya.SupabaseAuthClient=rj;Object.defineProperty(ha,"__esModule",{value:!0});const nj=sm,ij=Ve,sj=km,oj=Hb,vo=Mm,aj=Bm,wh=Jr,lj=Ya;let dj=class{constructor(e,r,i){var s,o,a;this.supabaseUrl=e,this.supabaseKey=r;const d=(0,wh.validateSupabaseUrl)(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const l=`sb-${d.hostname.split(".")[0]}-auth-token`,c={db:vo.DEFAULT_DB_OPTIONS,realtime:vo.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},vo.DEFAULT_AUTH_OPTIONS),{storageKey:l}),global:vo.DEFAULT_GLOBAL_OPTIONS},u=(0,wh.applySettingDefaults)(i??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=u.auth)!==null&&a!==void 0?a:{},this.headers,u.global.fetch),this.fetch=(0,aj.fetchWithAuth)(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new ij.PostgrestClient(new URL("rest/v1",d).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new oj.StorageClient(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new nj.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,i)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(r=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:i,storage:s,userStorage:o,storageKey:a,flowType:d,lock:l,debug:c,throwOnError:u},h,p){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lj.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),h),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:i,storage:s,userStorage:o,flowType:d,lock:l,debug:c,throwOnError:u,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new sj.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,r,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};ha.default=dj;(function(t){var e=In&&In.__createBinding||(Object.create?function(u,h,p,f){f===void 0&&(f=p);var x=Object.getOwnPropertyDescriptor(h,p);(!x||("get"in x?!h.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return h[p]}}),Object.defineProperty(u,f,x)}:function(u,h,p,f){f===void 0&&(f=p),u[f]=h[p]}),r=In&&In.__exportStar||function(u,h){for(var p in u)p!=="default"&&!Object.prototype.hasOwnProperty.call(h,p)&&e(h,u,p)},i=In&&In.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const s=i(ha);r(ey,t);var o=Ve;Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return o.PostgrestError}});var a=sm;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return a.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return a.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return a.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return a.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return a.FunctionRegion}}),r(km,t);var d=ha;Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return i(d).default}});const l=(u,h,p)=>new s.default(u,h,p);t.createClient=l;function c(){if(typeof window<"u"||typeof process>"u")return!1;const u=process.version;if(u==null)return!1;const h=u.match(/^v(\d+)\./);return h?parseInt(h[1],10)<=18:!1}c()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(mu);const ty=cf(mu),cj=df({__proto__:null,default:ty},[mu]),{PostgrestError:E4,FunctionsHttpError:T4,FunctionsFetchError:I4,FunctionsRelayError:P4,FunctionsError:A4,FunctionRegion:O4,SupabaseClient:L4,createClient:uj,GoTrueAdminApi:D4,GoTrueClient:N4,AuthAdminApi:M4,AuthClient:B4,navigatorLock:$4,NavigatorLockAcquireTimeoutError:F4,lockInternals:W4,processLock:U4,SIGN_OUT_SCOPES:q4,AuthError:V4,AuthApiError:H4,AuthUnknownError:G4,CustomAuthError:K4,AuthSessionMissingError:J4,AuthInvalidTokenResponseError:Q4,AuthInvalidCredentialsError:Y4,AuthImplicitGrantRedirectError:X4,AuthPKCEGrantCodeExchangeError:Z4,AuthRetryableFetchError:e5,AuthWeakPasswordError:t5,AuthInvalidJwtError:r5,isAuthError:n5,isAuthApiError:i5,isAuthSessionMissingError:s5,isAuthImplicitGrantRedirectError:o5,isAuthRetryableFetchError:a5,isAuthWeakPasswordError:l5,RealtimePresence:d5,RealtimeChannel:c5,RealtimeClient:u5,REALTIME_LISTEN_TYPES:p5,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:h5,REALTIME_PRESENCE_LISTEN_EVENTS:f5,REALTIME_SUBSCRIBE_STATES:g5,REALTIME_CHANNEL_STATES:x5}=ty||cj,pj="https://cqxvklcvanlphrgojdvc.supabase.co",hj="sb_publishable_Jfk9tDvc_aXnf0dl94fs4w_CL4MeZFb",G=uj(pj,hj),ry=w.createContext({}),Qr=()=>w.useContext(ry);function fj({children:t}){const[e,r]=w.useState(null),[i,s]=w.useState(!0);w.useEffect(()=>{G.auth.getSession().then(({data:{session:p}})=>{r((p==null?void 0:p.user)??null),s(!1)});const{data:{subscription:h}}=G.auth.onAuthStateChange((p,f)=>{r((f==null?void 0:f.user)??null)});return()=>h.unsubscribe()},[]);const u={user:e,loading:i,signUp:async(h,p,f)=>{const{data:x,error:y}=await G.auth.signUp({email:h,password:p,options:{data:{full_name:f}}});return{data:x,error:y}},signIn:async(h,p)=>{const{data:f,error:x}=await G.auth.signInWithPassword({email:h,password:p});return{data:f,error:x}},signOut:async()=>{const{error:h}=await G.auth.signOut();return{error:h}},resetPassword:async h=>{const{data:p,error:f}=await G.auth.resetPasswordForEmail(h,{redirectTo:`${window.location.origin}/reset-password`});return{data:p,error:f}},updatePassword:async h=>{const{data:p,error:f}=await G.auth.updateUser({password:h});return{data:p,error:f}}};return n.jsx(ry.Provider,{value:u,children:t})}function ae({children:t}){const{user:e,loading:r}=Qr(),i=Kr();return r?n.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-primary)"},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",border:"3px solid var(--border-color)",borderTopColor:"var(--gold)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),n.jsx("p",{style:{color:"var(--text-muted)"},children:"Chargement..."})]}),n.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):e?t:n.jsx(xu,{to:"/login",state:{from:i},replace:!0})}function gj(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const Sh={};function ac(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];typeof e[0]=="string"&&Sh[e[0]]||(typeof e[0]=="string"&&(Sh[e[0]]=new Date),gj(...e))}const ny=(t,e)=>()=>{if(t.isInitialized)e();else{const r=()=>{setTimeout(()=>{t.off("initialized",r)},0),e()};t.on("initialized",r)}};function kh(t,e,r){t.loadNamespaces(e,ny(t,r))}function _h(t,e,r,i){typeof r=="string"&&(r=[r]),r.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,ny(t,i))}function xj(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.languages[0],s=e.options?e.options.fallbackLng:!1,o=e.languages[e.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const a=(d,l)=>{const c=e.services.backendConnector.state[`${d}|${l}`];return c===-1||c===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!a(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(i,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||a(i,t)&&(!s||a(o,t)))}function mj(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(ac("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:r.lng,precheck:(s,o)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!o(s.isLanguageChangingTo,t))return!1}}):xj(t,e,r)}const yj=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,vj={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},bj=t=>vj[t],jj=t=>t.replace(yj,bj);let lc={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:jj};function wj(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};lc={...lc,...t}}function Sj(){return lc}let iy;function kj(t){iy=t}function _j(){return iy}const Cj={type:"3rdParty",init(t){wj(t.options.react),kj(t)}},zj=w.createContext();class Rj{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Ej=(t,e)=>{const r=w.useRef();return w.useEffect(()=>{r.current=t},[t,e]),r.current};function zu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:r}=e,{i18n:i,defaultNS:s}=w.useContext(zj)||{},o=r||i||_j();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new Rj),!o){ac("You will need to pass in an i18next instance by using initReactI18next");const b=(R,T)=>typeof T=="string"?T:T&&typeof T=="object"&&typeof T.defaultValue=="string"?T.defaultValue:Array.isArray(R)?R[R.length-1]:R,j=[b,{},!1];return j.t=b,j.i18n={},j.ready=!1,j}o.options.react&&o.options.react.wait!==void 0&&ac("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...Sj(),...o.options.react,...e},{useSuspense:d,keyPrefix:l}=a;let c=s||o.options&&o.options.defaultNS;c=typeof c=="string"?[c]:c||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(c);const u=(o.isInitialized||o.initializedStoreOnce)&&c.every(b=>mj(b,o,a));function h(){return o.getFixedT(e.lng||null,a.nsMode==="fallback"?c:c[0],l)}const[p,f]=w.useState(h);let x=c.join();e.lng&&(x=`${e.lng}${x}`);const y=Ej(x),v=w.useRef(!0);w.useEffect(()=>{const{bindI18n:b,bindI18nStore:j}=a;v.current=!0,!u&&!d&&(e.lng?_h(o,e.lng,c,()=>{v.current&&f(h)}):kh(o,c,()=>{v.current&&f(h)})),u&&y&&y!==x&&v.current&&f(h);function R(){v.current&&f(h)}return b&&o&&o.on(b,R),j&&o&&o.store.on(j,R),()=>{v.current=!1,b&&o&&b.split(" ").forEach(T=>o.off(T,R)),j&&o&&j.split(" ").forEach(T=>o.store.off(T,R))}},[o,x]);const g=w.useRef(!0);w.useEffect(()=>{v.current&&!g.current&&f(h),g.current=!1},[o,l]);const m=[p,o,u];if(m.t=p,m.i18n=o,m.ready=u,u||!u&&!d)return m;throw new Promise(b=>{e.lng?_h(o,e.lng,c,()=>b()):kh(o,c,()=>b())})}var Tj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ij=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pj=(t,e)=>{const r=w.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:d,...l},c)=>w.createElement("svg",{ref:c,...Tj,width:s,height:s,stroke:i,strokeWidth:a?Number(o)*24/Number(s):o,className:`lucide lucide-${Ij(t)}`,...l},[...e.map(([u,h])=>w.createElement(u,h)),...(Array.isArray(d)?d:[d])||[]]));return r.displayName=`${t}`,r};var B=Pj;const Oe=B("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Aj=B("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Oj=B("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),Za=B("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),kt=B("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Lj=B("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),yi=B("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Ru=B("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]),Eu=B("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]),Dj=B("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Nj=B("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]),Mj=B("Bot",[["rect",{width:"18",height:"10",x:"3",y:"11",rx:"2",key:"1ofdy3"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"M12 7v4",key:"xawao1"}],["line",{x1:"8",x2:"8",y1:"16",y2:"16",key:"h6x27f"}],["line",{x1:"16",x2:"16",y1:"16",y2:"16",key:"5lty7f"}]]),we=B("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Ch=B("Bus",[["path",{d:"M19 17h2l.64-2.54c.24-.959.24-1.962 0-2.92l-1.07-4.27A3 3 0 0 0 17.66 5H4a2 2 0 0 0-2 2v10h2",key:"wfsdqh"}],["path",{d:"M14 17H9",key:"o2noo5"}],["circle",{cx:"6.5",cy:"17.5",r:"2.5",key:"gc8oob"}],["circle",{cx:"16.5",cy:"17.5",r:"2.5",key:"4btu0q"}]]),Sa=B("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),ct=B("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Bj=B("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),zh=B("Car",[["path",{d:"M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2",key:"l5np60"}],["circle",{cx:"6.5",cy:"16.5",r:"2.5",key:"ae40ju"}],["circle",{cx:"16.5",cy:"16.5",r:"2.5",key:"1smtlt"}]]),$j=B("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),re=B("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),sy=B("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ka=B("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),wn=B("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Fj=B("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Wj=B("Church",[["path",{d:"m18 7 4 2v11a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9l4-2",key:"gy5gyo"}],["path",{d:"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4",key:"cpkuc4"}],["path",{d:"M18 22V5l-6-3-6 3v17",key:"1hsnhq"}],["path",{d:"M12 7v5",key:"ma6bk"}],["path",{d:"M10 9h4",key:"u4k05v"}]]),Rh=B("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Rn=B("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Eh=B("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),Uj=B("Contrast",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 18a6 6 0 0 0 0-12v12z",key:"j4l70d"}]]),hr=B("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),qj=B("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Mi=B("Cross",[["path",{d:"M11 2a2 2 0 0 0-2 2v5H4a2 2 0 0 0-2 2v2c0 1.1.9 2 2 2h5v5c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-5h5a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-5V4a2 2 0 0 0-2-2h-2z",key:"1t5g7j"}]]),oy=B("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),os=B("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),qs=B("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Tu=B("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),ot=B("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Iu=B("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Yr=B("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),en=B("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),Yt=B("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Vj=B("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Hj=B("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Gj=B("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Kj=B("FlipHorizontal",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]),Jj=B("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2h0a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"8ur5zv"}]]),vi=B("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),Ll=B("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),tr=B("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),li=B("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Ei=B("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),as=B("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]),ay=B("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),Qj=B("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Yj=B("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),Xj=B("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]),Sn=B("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),Zj=B("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Ie=B("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Ts=B("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ew=B("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Rt=B("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),it=B("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),tw=B("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),Fo=B("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),kn=B("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),dc=B("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),rw=B("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),nw=B("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),iw=B("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),ly=B("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Pu=B("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Is=B("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),sw=B("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Ps=B("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),ow=B("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),aw=B("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]),_n=B("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),$t=B("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),lw=B("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),Qi=B("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),dw=B("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),Ur=B("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),cw=B("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),dy=B("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Nn=B("School",[["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4",key:"cpkuc4"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),En=B("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),As=B("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),cy=B("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),cc=B("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),uc=B("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Th=B("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),uw=B("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),pw=B("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),hw=B("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),He=B("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Vs=B("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Jt=B("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),bo=B("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),fw=B("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),pc=B("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),jo=B("Train",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h0",key:"q9eq1f"}],["path",{d:"M16 15h0",key:"pzrbjg"}]]),Et=B("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),tn=B("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16v0H5v0h0a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"yh07w9"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]),uy=B("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Hs=B("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),gw=B("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),hc=B("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),$r=B("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),xt=B("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Dl=B("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),xw=B("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),mw=B("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),yw=B("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),vw=B("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),bw=B("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Nt=B("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xn=B("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),jw=B("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Nl=[{code:"fr",name:"Francais",flag:"FR"},{code:"en",name:"English",flag:"EN"}];function ww({style:t={}}){const{i18n:e}=zu(),[r,i]=Ta.useState(!1),s=Nl.find(a=>a.code===e.language)||Nl[0],o=a=>{e.changeLanguage(a),i(!1)};return n.jsxs("div",{style:{position:"relative",...t},children:[n.jsxs("button",{onClick:()=>i(!r),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",cursor:"pointer",fontSize:"13px",fontWeight:"500"},children:[n.jsx(vi,{size:16}),s.flag]}),r&&n.jsxs(n.Fragment,{children:[n.jsx("div",{onClick:()=>i(!1),style:{position:"fixed",inset:0,zIndex:99}}),n.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"4px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px",padding:"4px",minWidth:"140px",zIndex:100,boxShadow:"0 10px 40px rgba(0,0,0,0.3)"},children:Nl.map(a=>n.jsxs("button",{onClick:()=>o(a.code),style:{display:"flex",alignItems:"center",gap:"10px",width:"100%",padding:"10px 12px",background:a.code===e.language?"rgba(212, 175, 55, 0.1)":"transparent",border:"none",borderRadius:"6px",color:a.code===e.language?"var(--gold)":"var(--text-primary)",cursor:"pointer",fontSize:"13px",textAlign:"left"},children:[n.jsx("span",{style:{width:"24px",height:"16px",background:"var(--bg-tertiary)",borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"700"},children:a.flag}),a.name]},a.code))})]})]})}function Sw(){var h,p;const t=Kr(),e=_i(),{user:r,signOut:i}=Qr(),{t:s}=zu(),[o,a]=w.useState(0),d=((h=r==null?void 0:r.user_metadata)==null?void 0:h.full_name)||((p=r==null?void 0:r.email)==null?void 0:p.split("@")[0])||"Utilisateur",l=d.split(" ").map(f=>f[0]).join("").toUpperCase().slice(0,2);w.useEffect(()=>{async function f(){const{count:y,error:v}=await G.from("leads").select("*",{count:"exact",head:!0}).eq("status","new");!v&&y!==null&&a(y)}f();const x=G.channel("leads-changes").on("postgres_changes",{event:"*",schema:"public",table:"leads"},()=>{f()}).subscribe();return()=>{G.removeChannel(x)}},[]);const c=async()=>{await i(),e("/")},u=[{path:"/dashboard",icon:Qj,label:s("nav.dashboard"),hasSubmenu:!0},{path:"/listings",icon:we,label:s("nav.listings")},{path:"/leads",icon:xt,label:s("nav.leads"),badge:o>0?o:null},{path:"/accounts",icon:Sn,label:s("nav.platforms")},{path:"/tools",icon:bw,label:s("nav.tools","Outils"),isNew:!0},{path:"/ai-tools",icon:He,label:s("nav.aiTools")},{path:"/settings",icon:cy,label:s("nav.settings")}];return n.jsxs("div",{style:{width:"280px",height:"100vh",background:"var(--bg-secondary)",borderRight:"1px solid var(--border-color)",display:"flex",flexDirection:"column",position:"fixed",left:0,top:0},children:[n.jsx("div",{style:{padding:"24px",borderBottom:"1px solid var(--border-color)"},children:n.jsxs(te,{to:"/dashboard",style:{display:"flex",alignItems:"center",gap:"12px",textDecoration:"none"},children:[n.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",fontSize:"18px",color:"var(--bg-primary)"},children:"C"}),n.jsxs("div",{children:[n.jsx("span",{style:{fontSize:"18px",fontWeight:"700",color:"var(--text-primary)",letterSpacing:"-0.5px"},children:"CSX"}),n.jsx("span",{style:{display:"block",fontSize:"10px",color:"var(--gold)",fontWeight:"600",letterSpacing:"2px",marginTop:"-2px"},children:"IMMOBILIER"})]})]})}),n.jsx("div",{style:{padding:"20px 16px"},children:n.jsxs(te,{to:"/listings/new",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",borderRadius:"10px",color:"var(--bg-primary)",fontWeight:"600",fontSize:"14px",textDecoration:"none",transition:"all 0.2s ease"},children:[n.jsx($t,{size:18}),s("nav.newListing")]})}),n.jsx("nav",{style:{flex:1,padding:"0 12px",overflowY:"auto"},children:u.map(f=>{const x=t.pathname===f.path||f.path==="/listings"&&t.pathname.startsWith("/listings");return n.jsxs(te,{to:f.path,style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",marginBottom:"4px",borderRadius:"10px",textDecoration:"none",color:x?"var(--gold)":"var(--text-secondary)",background:x?"rgba(212, 175, 55, 0.1)":"transparent",fontWeight:x?"600":"500",fontSize:"14px",transition:"all 0.2s ease"},children:[n.jsx(f.icon,{size:20}),n.jsx("span",{style:{flex:1},children:f.label}),f.badge&&n.jsx("span",{style:{padding:"2px 8px",background:"var(--gold)",color:"var(--bg-primary)",borderRadius:"10px",fontSize:"11px",fontWeight:"700"},children:f.badge}),f.isNew&&n.jsx("span",{style:{padding:"2px 6px",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",color:"white",borderRadius:"4px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px"},children:"NEW"}),f.hasSubmenu&&n.jsx(wn,{size:16,style:{opacity:.5}})]},f.path)})}),n.jsx("div",{style:{padding:"16px"},children:n.jsxs("div",{style:{padding:"16px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.02) 100%)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"12px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[n.jsx(oy,{size:16,style:{color:"var(--gold)"}}),n.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:"var(--text-primary)"},children:"Plan Pro"})]}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"12px",lineHeight:"1.4"},children:"Dbloquez toutes les fonctionnalits et plateformes"}),n.jsx("button",{style:{width:"100%",padding:"10px",background:"var(--gold)",border:"none",borderRadius:"8px",color:"var(--bg-primary)",fontWeight:"600",fontSize:"13px",cursor:"pointer"},children:s("nav.upgradeToPro")})]})}),n.jsx("div",{style:{padding:"0 16px 8px"},children:n.jsx(ww,{})}),n.jsx("div",{style:{padding:"16px",borderTop:"1px solid var(--border-color)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"14px",color:"var(--bg-primary)"},children:l}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("p",{style:{fontWeight:"600",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:d}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r==null?void 0:r.email})]}),n.jsx("button",{onClick:c,title:"Dconnexion",style:{width:"36px",height:"36px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",cursor:"pointer"},children:n.jsx(ew,{size:18})})]})})]})}const kw=()=>{const[t,e]=w.useState(!1),[r,i]=w.useState(0),[s,o]=w.useState("monthly");w.useEffect(()=>{e(!0)},[]);const a={Facebook:()=>n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",style:{width:20,height:20},children:n.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),Instagram:()=>n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",style:{width:20,height:20},children:n.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),Airbnb:()=>n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",style:{width:20,height:20},children:n.jsx("path",{d:"M12.001 18.275c-.208-.372-.385-.752-.573-1.123-.51-1.018-.992-2.058-1.404-3.126-.393-1.018-.715-2.068-.944-3.135-.188-.87-.292-1.724-.282-2.595.01-.767.135-1.51.437-2.203.343-.787.878-1.37 1.617-1.757.479-.25.992-.376 1.531-.383.54-.007 1.054.105 1.537.34.76.37 1.316.939 1.678 1.727.323.704.465 1.46.481 2.24.018.9-.082 1.785-.275 2.66-.225 1.016-.532 2.01-.902 2.983-.415 1.087-.899 2.145-1.413 3.182-.197.397-.39.797-.616 1.19-.025 0-.05 0-.083 0-.066 0-.123 0-.189 0zm-.001 1.725c.1.182.19.357.288.53.596 1.05 1.262 2.054 2.046 2.973.27.316.56.613.878.883.202.171.42.325.659.446.341.171.7.233 1.073.158.417-.083.758-.29 1.033-.597.367-.41.571-.896.663-1.431.103-.6.075-1.197-.04-1.79-.137-.708-.374-1.382-.66-2.038-.538-1.23-1.2-2.393-1.927-3.516-.485-.749-.996-1.48-1.533-2.19-.073-.096-.148-.191-.226-.292-.077.1-.15.19-.22.284-.538.712-1.052 1.446-1.54 2.2-.732 1.13-1.4 2.3-1.942 3.54-.284.65-.52 1.318-.66 2.02-.119.6-.15 1.203-.042 1.81.09.512.28.98.618 1.38.289.343.65.571 1.095.66.357.07.7.016 1.028-.14.257-.122.49-.283.707-.466.313-.264.598-.558.864-.87.783-.918 1.448-1.918 2.044-2.965.102-.179.196-.362.294-.543l-.001-.006zm7.124-1.5c-.035.308-.098.612-.18.912-.233.84-.616 1.607-1.128 2.305-.457.622-1.003 1.148-1.656 1.556-.373.232-.77.417-1.202.518-.553.128-1.09.078-1.6-.167-.398-.19-.73-.469-1.023-.795-.56-.625-1.008-1.335-1.406-2.08-.026-.048-.054-.095-.086-.152-.036.062-.067.113-.096.165-.394.74-.839 1.444-1.391 2.064-.297.334-.634.62-1.04.816-.501.24-1.027.294-1.572.172-.44-.1-.844-.285-1.223-.52-.648-.402-1.19-.922-1.647-1.535-.52-.698-.91-1.467-1.15-2.31-.085-.3-.15-.605-.188-.917-.01-.078-.026-.156-.04-.234h-.01c0 .018-.003.035-.003.053-.007.7.07 1.387.22 2.067.22 1.002.575 1.954 1.072 2.85.475.856 1.058 1.628 1.776 2.288.548.503 1.157.913 1.85 1.187.857.338 1.74.418 2.64.228.67-.14 1.28-.415 1.835-.798.814-.562 1.474-1.27 2.048-2.062.09-.124.175-.25.266-.38.088.126.17.246.256.364.575.794 1.237 1.505 2.053 2.07.55.38 1.152.653 1.815.794.908.194 1.8.118 2.665-.223.69-.272 1.295-.68 1.84-1.178.72-.66 1.306-1.432 1.783-2.29.498-.895.856-1.847 1.078-2.85.152-.685.23-1.378.22-2.08 0-.017-.002-.033-.003-.05h-.01c-.013.074-.028.148-.037.222z"})}),SeLoger:()=>n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",style:{width:20,height:20},children:n.jsx("path",{d:"M12 2L2 7v10l10 5 10-5V7L12 2zm0 2.18l6.9 3.45L12 11.08 5.1 7.63 12 4.18zM4 8.82l7 3.5v7.36l-7-3.5V8.82zm9 10.86v-7.36l7-3.5v7.36l-7 3.5z"})}),LeBonCoin:()=>n.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",style:{width:20,height:20},children:[n.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",fill:"none",stroke:"currentColor",strokeWidth:"2"}),n.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"})]}),IAD:()=>n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",style:{width:20,height:20},children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})}),LogicImmo:()=>n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",style:{width:20,height:20},children:n.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),PAP:()=>n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",style:{width:20,height:20},children:n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14H6v-2h6v2zm3-4H6v-2h9v2zm0-4H6V7h9v2z"})})},d=[{name:"Facebook",Logo:a.Facebook,color:"#1877F2"},{name:"Instagram",Logo:a.Instagram,color:"#E4405F"},{name:"Airbnb",Logo:a.Airbnb,color:"#FF5A5F"},{name:"SeLoger",Logo:a.SeLoger,color:"#E31C5F"},{name:"LeBonCoin",Logo:a.LeBonCoin,color:"#F56B2A"},{name:"IAD",Logo:a.IAD,color:"#00B388"},{name:"Logic-Immo",Logo:a.LogicImmo,color:"#0066CC"},{name:"PAP",Logo:a.PAP,color:"#8B5CF6"}],l=[{title:"Syndication Multi-Plateforme",description:"Publiez une annonce, diffusez partout. Connectez vos comptes Facebook, Instagram, Airbnb, SeLoger, LeBonCoin et plus encore.",Icon:Sn,highlight:"Gagnez 5h par semaine",image:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&q=80"},{title:"Descriptions IA",description:"Gnrez des descriptions immobilires captivantes  partir de vos photos. Notre IA comprend le march franais et cariben.",Icon:He,highlight:"10x plus rapide",image:"https://images.unsplash.com/photo-1551434678-e076c223a692?w=800&q=80"},{title:"Chatbot Qualification",description:"Qualifiez automatiquement vos leads 24h/24. Rponses instantanes en franais, anglais et crole.",Icon:Mj,highlight:"Ne ratez plus aucun lead",image:"https://images.unsplash.com/photo-1531746790731-6c087fecd65a?w=800&q=80"},{title:"Suivi Automatis",description:"Squences email et SMS personnalises. Relancez vos prospects au bon moment, automatiquement.",Icon:Rt,highlight:"+40% de conversions",image:"https://images.unsplash.com/photo-1596526131083-e8c633c948d2?w=800&q=80"},{title:"Analyse de March",description:"Prix au m, tendances locales, estimation automatique. Donnes en temps rel pour France et DOM-TOM.",Icon:yi,highlight:"Donnes temps rel",image:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800&q=80"},{title:"Contenu Social",description:"Stories, reels, posts - gnrs automatiquement pour chaque bien. Votre prsence sociale sans effort.",Icon:hw,highlight:"Contenu illimit",image:"https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=800&q=80"}],c=[{name:"Starter",price:s==="monthly"?49:39,description:"Idal pour dbuter",features:["3 plateformes connectes","20 annonces actives","Descriptions IA illimites","Support email","Chatbot basique"],cta:"Commencer",highlighted:!1},{name:"Pro",price:s==="monthly"?99:79,description:"Le choix des top agents",features:["8 plateformes connectes","Annonces illimites","Descriptions IA illimites","Chatbot avanc multilingue","Squences email/SMS","Analyse de march","Support prioritaire"],cta:"Essai Gratuit 14 jours",highlighted:!0},{name:"Agence",price:s==="monthly"?249:199,description:"Pour les quipes",features:["Tout de Pro +","Utilisateurs illimits","API personnalise","Marque blanche","Account manager ddi","Formation quipe","Intgrations sur mesure"],cta:"Contactez-nous",highlighted:!1}],u=[{name:"Marie-Claire Dubois",role:"Agent IAD, Martinique",quote:"CSX a transform mon business. Je publie une fois, mes annonces sont partout. J'ai doubl mes leads en 2 mois.",image:"https://images.unsplash.com/photo-1573497019940-1c28c88b4f3e?w=200&q=80"},{name:"Thomas Bernard",role:"Directeur Agence, Paris",quote:"L'IA gnre des descriptions parfaites. Mes agents conomisent 2h par jour. ROI immdiat.",image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=200&q=80"},{name:"Sophie Ltang",role:"Agent Indpendant, Guadeloupe",quote:"Le chatbot rpond aux clients mme la nuit. Je ne rate plus aucune opportunit. Indispensable.",image:"https://images.unsplash.com/photo-1580489944761-15a19d654956?w=200&q=80"}],h=[{value:"2,500+",label:"Agents actifs",Icon:xt},{value:"150K+",label:"Annonces publies",Icon:we},{value:"98%",label:"Satisfaction client",Icon:Jt},{value:"24/7",label:"Support disponible",Icon:Rn}];return n.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, #0a0a0f 0%, #12121a 50%, #0a0a0f 100%)",color:"#ffffff",fontFamily:'"DM Sans", -apple-system, sans-serif',overflow:"hidden"},children:[n.jsx("style",{children:`
        @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap');
        
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        html {
          scroll-behavior: smooth;
        }
        
        @keyframes float {
          0%, 100% { transform: translateY(0px); }
          50% { transform: translateY(-10px); }
        }
        
        @keyframes pulse {
          0%, 100% { opacity: 0.4; }
          50% { opacity: 0.7; }
        }
        
        @keyframes slideUp {
          from { opacity: 0; transform: translateY(40px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes gradientShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        
        .animate-in {
          animation: slideUp 0.8s ease-out forwards;
        }
        
        .delay-1 { animation-delay: 0.1s; opacity: 0; }
        .delay-2 { animation-delay: 0.2s; opacity: 0; }
        .delay-3 { animation-delay: 0.3s; opacity: 0; }
        .delay-4 { animation-delay: 0.4s; opacity: 0; }
        .delay-5 { animation-delay: 0.5s; opacity: 0; }
        
        .gold-gradient {
          background: linear-gradient(135deg, #d4af37 0%, #f4e4bc 50%, #d4af37 100%);
          background-size: 200% 200%;
          animation: gradientShift 3s ease infinite;
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }
        
        .glass-card {
          background: rgba(255, 255, 255, 0.03);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(212, 175, 55, 0.1);
          border-radius: 24px;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .glass-card:hover {
          background: rgba(255, 255, 255, 0.06);
          border-color: rgba(212, 175, 55, 0.3);
          transform: translateY(-4px);
        }
        
        .cta-button {
          background: linear-gradient(135deg, #d4af37 0%, #b8962e 100%);
          color: #0a0a0f;
          border: none;
          padding: 16px 32px;
          font-size: 16px;
          font-weight: 700;
          border-radius: 12px;
          cursor: pointer;
          transition: all 0.3s ease;
          font-family: inherit;
          text-transform: uppercase;
          letter-spacing: 1px;
          display: inline-flex;
          align-items: center;
          gap: 8px;
        }
        
        .cta-button:hover {
          transform: scale(1.05);
          box-shadow: 0 20px 40px rgba(212, 175, 55, 0.3);
        }
        
        .cta-secondary {
          background: transparent;
          color: #d4af37;
          border: 2px solid #d4af37;
          padding: 14px 30px;
        }
        
        .cta-secondary:hover {
          background: rgba(212, 175, 55, 0.1);
          transform: scale(1.05);
          box-shadow: 0 20px 40px rgba(212, 175, 55, 0.15);
        }
        
        .platform-pill {
          display: inline-flex;
          align-items: center;
          gap: 10px;
          padding: 14px 22px;
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid rgba(255, 255, 255, 0.1);
          border-radius: 100px;
          font-size: 14px;
          font-weight: 500;
          transition: all 0.3s ease;
          cursor: default;
        }
        
        .platform-pill:hover {
          background: rgba(212, 175, 55, 0.1);
          border-color: rgba(212, 175, 55, 0.3);
          transform: scale(1.05);
        }
        
        .nav-link {
          color: rgba(255, 255, 255, 0.7);
          text-decoration: none;
          font-size: 15px;
          font-weight: 500;
          transition: color 0.3s ease;
          cursor: pointer;
        }
        
        .nav-link:hover {
          color: #d4af37;
        }
        
        .section-label {
          display: inline-flex;
          align-items: center;
          gap: 8px;
          padding: 10px 20px;
          background: rgba(212, 175, 55, 0.1);
          border: 1px solid rgba(212, 175, 55, 0.2);
          border-radius: 100px;
          font-size: 13px;
          font-weight: 600;
          letter-spacing: 1.5px;
          text-transform: uppercase;
          color: #d4af37;
          margin-bottom: 24px;
        }
        
        .feature-card {
          padding: 28px;
          cursor: pointer;
          border-left: 3px solid transparent;
          transition: all 0.3s ease;
          border-radius: 0 16px 16px 0;
        }
        
        .feature-card:hover {
          background: rgba(255, 255, 255, 0.02);
        }
        
        .feature-card.active {
          background: rgba(212, 175, 55, 0.05);
          border-left-color: #d4af37;
        }
        
        .pricing-card {
          padding: 40px;
          border-radius: 24px;
          background: rgba(255, 255, 255, 0.02);
          border: 1px solid rgba(255, 255, 255, 0.05);
          transition: all 0.4s ease;
        }
        
        .pricing-card.highlighted {
          background: linear-gradient(180deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.02) 100%);
          border-color: rgba(212, 175, 55, 0.3);
          transform: scale(1.05);
          position: relative;
        }
        
        .pricing-card.highlighted::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 3px;
          background: linear-gradient(90deg, #d4af37, #f4e4bc, #d4af37);
          border-radius: 24px 24px 0 0;
        }
        
        .toggle-switch {
          display: flex;
          align-items: center;
          gap: 4px;
          padding: 6px;
          background: rgba(255, 255, 255, 0.05);
          border-radius: 100px;
          border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .toggle-option {
          padding: 12px 24px;
          border-radius: 100px;
          font-size: 14px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s ease;
          color: rgba(255, 255, 255, 0.6);
        }
        
        .toggle-option.active {
          background: #d4af37;
          color: #0a0a0f;
        }
        
        .testimonial-card {
          padding: 36px;
          background: rgba(255, 255, 255, 0.03);
          border: 1px solid rgba(255, 255, 255, 0.05);
          border-radius: 24px;
          transition: all 0.3s ease;
        }
        
        .testimonial-card:hover {
          background: rgba(255, 255, 255, 0.05);
          border-color: rgba(212, 175, 55, 0.2);
        }
        
        .footer-link {
          color: rgba(255, 255, 255, 0.5);
          text-decoration: none;
          font-size: 14px;
          transition: color 0.3s ease;
          cursor: pointer;
        }
        
        .footer-link:hover {
          color: #d4af37;
        }

        .stat-card {
          text-align: center;
          padding: 32px;
        }

        .feature-image {
          width: 100%;
          height: 100%;
          object-fit: cover;
          border-radius: 20px;
          transition: transform 0.5s ease;
        }

        .feature-image-container:hover .feature-image {
          transform: scale(1.05);
        }

        .avatar {
          width: 64px;
          height: 64px;
          border-radius: 50%;
          object-fit: cover;
          border: 3px solid rgba(212, 175, 55, 0.3);
        }
      `}),n.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",zIndex:0},children:[n.jsx("div",{style:{position:"absolute",top:"-20%",right:"-10%",width:"700px",height:"700px",background:"radial-gradient(circle, rgba(212, 175, 55, 0.12) 0%, transparent 70%)",animation:"pulse 8s ease-in-out infinite"}}),n.jsx("div",{style:{position:"absolute",bottom:"-20%",left:"-10%",width:"600px",height:"600px",background:"radial-gradient(circle, rgba(212, 175, 55, 0.08) 0%, transparent 70%)",animation:"pulse 10s ease-in-out infinite",animationDelay:"2s"}})]}),n.jsxs("nav",{style:{position:"fixed",top:0,left:0,right:0,padding:"16px 48px",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:100,background:"rgba(10, 10, 15, 0.8)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"44px",height:"44px",background:"linear-gradient(135deg, #d4af37 0%, #b8962e 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",color:"#0a0a0f",fontSize:"20px",fontFamily:'"Playfair Display", serif'},children:"C"}),n.jsxs("div",{children:[n.jsx("span",{style:{fontFamily:'"Playfair Display", serif',fontSize:"24px",fontWeight:"600",letterSpacing:"-0.5px"},children:"CSX"}),n.jsx("span",{style:{display:"block",fontSize:"10px",color:"rgba(255,255,255,0.4)",fontWeight:"600",letterSpacing:"2px",marginTop:"-2px"},children:"IMMOBILIER"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"40px"},children:[n.jsx("a",{href:"#features",className:"nav-link",style:{textDecoration:"none"},children:"Fonctionnalits"}),n.jsx("a",{href:"#pricing",className:"nav-link",style:{textDecoration:"none"},children:"Tarifs"}),n.jsx("a",{href:"#testimonials",className:"nav-link",style:{textDecoration:"none"},children:"Tmoignages"}),n.jsx(te,{to:"/login",className:"nav-link",style:{textDecoration:"none"},children:"Connexion"}),n.jsxs(te,{to:"/signup",className:"cta-button",style:{padding:"12px 24px",fontSize:"13px",textDecoration:"none"},children:["Essai Gratuit",n.jsx(kt,{size:16})]})]})]}),n.jsx("section",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"140px 48px 100px",position:"relative",zIndex:1},children:n.jsxs("div",{style:{maxWidth:"1300px",width:"100%",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"80px",alignItems:"center"},children:[n.jsxs("div",{children:[n.jsx("div",{className:"animate-in ",style:{opacity:t?1:0},children:n.jsxs("span",{className:"section-label",children:[n.jsx(xn,{size:14}),"Nouvelle Gnration Immobilire"]})}),n.jsxs("h1",{className:"animate-in delay-1",style:{fontFamily:'"Playfair Display", serif',fontSize:"clamp(40px, 5vw, 64px)",fontWeight:"600",lineHeight:"1.15",marginBottom:"24px"},children:["L'IA qui ",n.jsx("span",{className:"gold-gradient",children:"rvolutionne"})," votre immobilier"]}),n.jsx("p",{className:"animate-in delay-2",style:{fontSize:"18px",color:"rgba(255, 255, 255, 0.7)",marginBottom:"40px",lineHeight:"1.8",maxWidth:"500px"},children:"Publiez une fois, diffusez partout. Automatisez vos annonces, qualifiez vos leads et boostez vos ventes avec l'intelligence artificielle."}),n.jsxs("div",{className:"animate-in delay-3",style:{display:"flex",gap:"16px",marginBottom:"48px"},children:[n.jsxs(te,{to:"/signup",className:"cta-button",style:{textDecoration:"none"},children:["Dmarrer Gratuitement",n.jsx(kt,{size:18})]}),n.jsxs("a",{href:"#features",className:"cta-button cta-secondary",style:{textDecoration:"none"},children:[n.jsx(_n,{size:18,fill:"currentColor"}),"Voir la Dmo"]})]}),n.jsxs("div",{className:"animate-in delay-4",style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:[d.slice(0,6).map((p,f)=>n.jsxs("div",{className:"platform-pill",children:[n.jsx("div",{style:{color:p.color},children:n.jsx(p.Logo,{})}),n.jsx("span",{children:p.name})]},f)),n.jsx("div",{className:"platform-pill",style:{background:"rgba(212, 175, 55, 0.1)",borderColor:"rgba(212, 175, 55, 0.2)"},children:n.jsx("span",{style:{color:"#d4af37"},children:"+12 autres"})})]})]}),n.jsxs("div",{className:"animate-in delay-5",style:{position:"relative"},children:[n.jsx("div",{style:{borderRadius:"24px",overflow:"hidden",boxShadow:"0 40px 80px rgba(0, 0, 0, 0.5)",border:"1px solid rgba(212, 175, 55, 0.2)"},children:n.jsx("img",{src:"https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800&q=80",alt:"Real estate dashboard",style:{width:"100%",height:"500px",objectFit:"cover"}})}),n.jsx("div",{style:{position:"absolute",bottom:"-20px",left:"-40px",background:"rgba(18, 18, 26, 0.95)",backdropFilter:"blur(20px)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"16px",padding:"20px 28px",animation:"float 4s ease-in-out infinite"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(yi,{size:24,style:{color:"#d4af37"}})}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"24px",fontWeight:"700",color:"#d4af37"},children:"+147%"}),n.jsx("p",{style:{fontSize:"13px",color:"rgba(255,255,255,0.6)"},children:"Leads gnrs"})]})]})}),n.jsx("div",{style:{position:"absolute",top:"40px",right:"-30px",background:"rgba(18, 18, 26, 0.95)",backdropFilter:"blur(20px)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"16px",padding:"20px 28px",animation:"float 5s ease-in-out infinite",animationDelay:"1s"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"rgba(34, 197, 94, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(re,{size:24,style:{color:"#22c55e"}})}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"24px",fontWeight:"700",color:"#22c55e"},children:"5h"}),n.jsx("p",{style:{fontSize:"13px",color:"rgba(255,255,255,0.6)"},children:"Gagnes / semaine"})]})]})})]})]})}),n.jsx("section",{style:{padding:"60px 48px",position:"relative",zIndex:1,borderTop:"1px solid rgba(255, 255, 255, 0.05)",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",background:"rgba(0, 0, 0, 0.2)"},children:n.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"40px"},children:h.map((p,f)=>n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{style:{width:"56px",height:"56px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:n.jsx(p.Icon,{size:28,style:{color:"#d4af37"}})}),n.jsx("p",{style:{fontFamily:'"Playfair Display", serif',fontSize:"40px",fontWeight:"700",marginBottom:"8px"},children:p.value}),n.jsx("p",{style:{fontSize:"14px",color:"rgba(255, 255, 255, 0.5)",fontWeight:"500"},children:p.label})]},f))})}),n.jsx("section",{id:"features",style:{padding:"120px 48px",position:"relative",zIndex:1,scrollMarginTop:"80px"},children:n.jsxs("div",{style:{maxWidth:"1300px",margin:"0 auto"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:"80px"},children:[n.jsxs("span",{className:"section-label",children:[n.jsx(He,{size:14}),"Fonctionnalits"]}),n.jsxs("h2",{style:{fontFamily:'"Playfair Display", serif',fontSize:"48px",fontWeight:"600",marginBottom:"20px"},children:["Tout ce dont vous avez ",n.jsx("span",{className:"gold-gradient",children:"besoin"})]}),n.jsx("p",{style:{fontSize:"18px",color:"rgba(255, 255, 255, 0.6)",maxWidth:"550px",margin:"0 auto",lineHeight:"1.7"},children:"Une suite complte d'outils IA conus pour les professionnels de l'immobilier en France et aux Antilles"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.2fr",gap:"60px",alignItems:"start"},children:[n.jsx("div",{className:"glass-card",style:{overflow:"hidden",padding:"8px"},children:l.map((p,f)=>n.jsx("div",{className:`feature-card ${r===f?"active":""}`,onClick:()=>i(f),children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:r===f?"rgba(212, 175, 55, 0.15)":"rgba(255, 255, 255, 0.05)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transition:"all 0.3s ease"},children:n.jsx(p.Icon,{size:22,style:{color:r===f?"#d4af37":"rgba(255, 255, 255, 0.6)",transition:"color 0.3s ease"}})}),n.jsxs("div",{style:{flex:1},children:[n.jsxs("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[p.title,r===f&&n.jsx(wn,{size:16,style:{color:"#d4af37"}})]}),n.jsx("p",{style:{fontSize:"14px",color:"rgba(255, 255, 255, 0.5)",lineHeight:"1.6"},children:p.description})]})]})},f))}),n.jsx("div",{style:{position:"sticky",top:"120px"},children:n.jsxs("div",{className:"glass-card feature-image-container",style:{overflow:"hidden",position:"relative"},children:[n.jsx("img",{src:l[r].image,alt:l[r].title,className:"feature-image",style:{width:"100%",height:"400px",objectFit:"cover"}}),n.jsxs("div",{style:{position:"absolute",bottom:0,left:0,right:0,padding:"40px",background:"linear-gradient(0deg, rgba(10, 10, 15, 0.95) 0%, transparent 100%)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:[n.jsx("div",{style:{width:"56px",height:"56px",background:"rgba(212, 175, 55, 0.2)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:Ta.createElement(l[r].Icon,{size:28,style:{color:"#d4af37"}})}),n.jsx("div",{children:n.jsx("h3",{style:{fontFamily:'"Playfair Display", serif',fontSize:"28px",fontWeight:"600"},children:l[r].title})})]}),n.jsx("div",{style:{display:"inline-block",padding:"10px 20px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"100px",border:"1px solid rgba(212, 175, 55, 0.3)"},children:n.jsx("span",{style:{fontSize:"15px",fontWeight:"600",color:"#d4af37"},children:l[r].highlight})})]})]})})]})]})}),n.jsx("section",{style:{padding:"120px 48px",background:"rgba(0, 0, 0, 0.3)",position:"relative",zIndex:1},children:n.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto",textAlign:"center"},children:[n.jsxs("span",{className:"section-label",children:[n.jsx(xn,{size:14}),"Comment a marche"]}),n.jsxs("h2",{style:{fontFamily:'"Playfair Display", serif',fontSize:"48px",fontWeight:"600",marginBottom:"80px"},children:["Simple comme ",n.jsx("span",{className:"gold-gradient",children:"1, 2, 3"})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"40px"},children:[{step:"01",title:"Connectez",desc:"Liez vos comptes (Facebook, Airbnb, SeLoger...) en quelques clics scuriss.",Icon:Sn},{step:"02",title:"Crez",desc:"Uploadez vos photos, l'IA gnre descriptions et contenus automatiquement.",Icon:He},{step:"03",title:"Publiez",desc:"Un clic, votre annonce est live sur toutes les plateformes simultanment.",Icon:vi}].map((p,f)=>n.jsxs("div",{className:"glass-card",style:{padding:"48px 36px",textAlign:"center"},children:[n.jsx("div",{style:{fontFamily:'"Playfair Display", serif',fontSize:"72px",fontWeight:"700",color:"rgba(212, 175, 55, 0.2)",marginBottom:"24px",lineHeight:"1"},children:p.step}),n.jsx("div",{style:{width:"64px",height:"64px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:n.jsx(p.Icon,{size:28,style:{color:"#d4af37"}})}),n.jsx("h3",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"16px"},children:p.title}),n.jsx("p",{style:{fontSize:"15px",color:"rgba(255, 255, 255, 0.6)",lineHeight:"1.7"},children:p.desc})]},f))})]})}),n.jsx("section",{id:"pricing",style:{padding:"120px 48px",position:"relative",zIndex:1,scrollMarginTop:"80px"},children:n.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:"60px"},children:[n.jsxs("span",{className:"section-label",children:[n.jsx(Jt,{size:14}),"Tarifs"]}),n.jsxs("h2",{style:{fontFamily:'"Playfair Display", serif',fontSize:"48px",fontWeight:"600",marginBottom:"20px"},children:["Investissez dans votre ",n.jsx("span",{className:"gold-gradient",children:"succs"})]}),n.jsx("p",{style:{fontSize:"18px",color:"rgba(255, 255, 255, 0.6)",marginBottom:"40px"},children:"Sans engagement. Annulez  tout moment."}),n.jsxs("div",{className:"toggle-switch",style:{display:"inline-flex"},children:[n.jsx("div",{className:`toggle-option ${s==="monthly"?"active":""}`,onClick:()=>o("monthly"),children:"Mensuel"}),n.jsxs("div",{className:`toggle-option ${s==="yearly"?"active":""}`,onClick:()=>o("yearly"),children:["Annuel",n.jsx("span",{style:{marginLeft:"8px",padding:"4px 10px",background:s==="yearly"?"rgba(0,0,0,0.2)":"rgba(212, 175, 55, 0.2)",borderRadius:"100px",fontSize:"11px",fontWeight:"700"},children:"-20%"})]})]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"24px",alignItems:"center"},children:c.map((p,f)=>n.jsxs("div",{className:`pricing-card ${p.highlighted?"highlighted":""}`,children:[p.highlighted&&n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 16px",background:"#d4af37",color:"#0a0a0f",borderRadius:"100px",fontSize:"12px",fontWeight:"700",marginBottom:"20px"},children:[n.jsx(Jt,{size:14,fill:"currentColor"}),"POPULAIRE"]}),n.jsx("h3",{style:{fontFamily:'"Playfair Display", serif',fontSize:"28px",fontWeight:"600",marginBottom:"8px"},children:p.name}),n.jsx("p",{style:{fontSize:"14px",color:"rgba(255, 255, 255, 0.5)",marginBottom:"28px"},children:p.description}),n.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"4px",marginBottom:"36px"},children:[n.jsx("span",{style:{fontFamily:'"Playfair Display", serif',fontSize:"56px",fontWeight:"700"},children:p.price}),n.jsx("span",{style:{fontSize:"18px",color:"rgba(255, 255, 255, 0.5)"},children:"/mois"})]}),n.jsx("ul",{style:{listStyle:"none",marginBottom:"36px"},children:p.features.map((x,y)=>n.jsxs("li",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 0",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",fontSize:"14px",color:"rgba(255, 255, 255, 0.8)"},children:[n.jsx(re,{size:18,style:{color:"#d4af37",flexShrink:0}}),x]},y))}),n.jsxs(te,{to:p.name==="Agence"?"/signup?plan=agence":`/signup?plan=${p.name.toLowerCase()}`,className:`cta-button ${p.highlighted?"":"cta-secondary"}`,style:{width:"100%",justifyContent:"center",textDecoration:"none"},children:[p.cta,n.jsx(kt,{size:16})]})]},f))})]})}),n.jsx("section",{id:"testimonials",style:{padding:"120px 48px",background:"rgba(0, 0, 0, 0.3)",position:"relative",zIndex:1,scrollMarginTop:"80px"},children:n.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:"80px"},children:[n.jsxs("span",{className:"section-label",children:[n.jsx(xt,{size:14}),"Tmoignages"]}),n.jsxs("h2",{style:{fontFamily:'"Playfair Display", serif',fontSize:"48px",fontWeight:"600"},children:["Ils nous font ",n.jsx("span",{className:"gold-gradient",children:"confiance"})]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"28px"},children:u.map((p,f)=>n.jsxs("div",{className:"testimonial-card",children:[n.jsx(dw,{size:32,style:{color:"rgba(212, 175, 55, 0.3)",marginBottom:"20px"}}),n.jsxs("p",{style:{fontSize:"16px",lineHeight:"1.8",color:"rgba(255, 255, 255, 0.85)",marginBottom:"28px"},children:['"',p.quote,'"']}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[n.jsx("img",{src:p.image,alt:p.name,className:"avatar"}),n.jsxs("div",{children:[n.jsx("p",{style:{fontWeight:"600",marginBottom:"4px",fontSize:"15px"},children:p.name}),n.jsx("p",{style:{fontSize:"13px",color:"rgba(255, 255, 255, 0.5)"},children:p.role})]})]})]},f))})]})}),n.jsx("section",{style:{padding:"140px 48px",position:"relative",zIndex:1},children:n.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",textAlign:"center"},children:[n.jsxs("h2",{style:{fontFamily:'"Playfair Display", serif',fontSize:"56px",fontWeight:"600",marginBottom:"24px",lineHeight:"1.2"},children:["Prt  ",n.jsx("span",{className:"gold-gradient",children:"transformer"}),n.jsx("br",{}),"votre business ?"]}),n.jsx("p",{style:{fontSize:"20px",color:"rgba(255, 255, 255, 0.6)",marginBottom:"48px",maxWidth:"550px",margin:"0 auto 48px",lineHeight:"1.7"},children:"Rejoignez +2,500 agents qui automatisent dj leur immobilier avec CSX."}),n.jsxs("div",{style:{display:"flex",gap:"16px",justifyContent:"center",marginBottom:"32px"},children:[n.jsxs(te,{to:"/signup",className:"cta-button",style:{fontSize:"16px",padding:"20px 40px",textDecoration:"none"},children:["Essai Gratuit 14 Jours",n.jsx(kt,{size:20})]}),n.jsx("a",{href:"mailto:contact@csx-immobilier.com?subject=Demande de demo",className:"cta-button cta-secondary",style:{fontSize:"16px",padding:"18px 38px",textDecoration:"none"},children:"Rserver une Dmo"})]}),n.jsxs("div",{style:{display:"flex",gap:"32px",justifyContent:"center",color:"rgba(255, 255, 255, 0.5)",fontSize:"14px"},children:[n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(re,{size:16,style:{color:"#22c55e"}}),"Sans carte bancaire"]}),n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(re,{size:16,style:{color:"#22c55e"}}),"Configuration en 5 min"]}),n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(re,{size:16,style:{color:"#22c55e"}}),"Support inclus"]})]})]})}),n.jsx("footer",{style:{padding:"80px 48px 40px",borderTop:"1px solid rgba(255, 255, 255, 0.05)",position:"relative",zIndex:1},children:n.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr",gap:"60px",marginBottom:"80px"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #d4af37 0%, #b8962e 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",color:"#0a0a0f",fontSize:"18px",fontFamily:'"Playfair Display", serif'},children:"C"}),n.jsx("span",{style:{fontFamily:'"Playfair Display", serif',fontSize:"22px",fontWeight:"600"},children:"CSX"})]}),n.jsx("p",{style:{fontSize:"14px",color:"rgba(255, 255, 255, 0.5)",lineHeight:"1.8",maxWidth:"300px",marginBottom:"24px"},children:"L'automatisation immobilire nouvelle gnration pour les agents en France et aux Antilles."}),n.jsx("div",{style:{display:"flex",gap:"12px"},children:[{Logo:a.Facebook,href:"https://facebook.com"},{Logo:a.Instagram,href:"https://instagram.com"}].map((p,f)=>n.jsx("a",{href:p.href,target:"_blank",rel:"noopener noreferrer",style:{width:"40px",height:"40px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",color:"rgba(255, 255, 255, 0.5)",textDecoration:"none"},children:n.jsx(p.Logo,{})},f))})]}),[{title:"Produit",links:[{name:"Fonctionnalits",href:"#features"},{name:"Tarifs",href:"#pricing"},{name:"Intgrations",href:"#features"},{name:"API",href:"#features"}]},{title:"Ressources",links:[{name:"Documentation",href:"#"},{name:"Blog",href:"#"},{name:"Tutoriels",href:"#"},{name:"Webinaires",href:"#"}]},{title:"Entreprise",links:[{name:" propos",href:"#"},{name:"Carrires",href:"#"},{name:"Presse",href:"#"},{name:"Contact",href:"#"}]},{title:"Lgal",links:[{name:"CGU",href:"#"},{name:"Confidentialit",href:"#"},{name:"RGPD",href:"#"},{name:"Mentions lgales",href:"#"}]}].map((p,f)=>n.jsxs("div",{children:[n.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"24px",color:"rgba(255, 255, 255, 0.9)"},children:p.title}),n.jsx("ul",{style:{listStyle:"none"},children:p.links.map((x,y)=>n.jsx("li",{style:{marginBottom:"14px"},children:n.jsx("a",{href:x.href,className:"footer-link",style:{textDecoration:"none"},children:x.name})},y))})]},f))]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"32px",borderTop:"1px solid rgba(255, 255, 255, 0.05)"},children:[n.jsx("p",{style:{fontSize:"13px",color:"rgba(255, 255, 255, 0.4)"},children:" 2025 CSX Immobilier. Tous droits rservs."}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"rgba(255, 255, 255, 0.4)",fontSize:"13px"},children:[n.jsx(uc,{size:14}),"Donnes scurises et hberges en France"]})]})]})})]})};function _w(){var y,v;const[t,e]=w.useState(""),[r,i]=w.useState(""),[s,o]=w.useState(!1),[a,d]=w.useState(""),[l,c]=w.useState(!1),{signIn:u}=Qr(),h=_i(),f=((v=(y=Kr().state)==null?void 0:y.from)==null?void 0:v.pathname)||"/dashboard",x=async g=>{g.preventDefault(),d(""),c(!0);const{error:m}=await u(t,r);m?(d(m.message==="Invalid login credentials"?"Email ou mot de passe incorrect":m.message),c(!1)):h(f,{replace:!0})};return n.jsxs("div",{style:{minHeight:"100vh",display:"flex",background:"var(--bg-primary)"},children:[n.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",padding:"48px",maxWidth:"560px"},children:[n.jsxs(te,{to:"/",style:{display:"inline-flex",alignItems:"center",gap:"12px",marginBottom:"48px"},children:[n.jsx("div",{style:{width:"44px",height:"44px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",color:"var(--bg-primary)",fontSize:"20px",fontFamily:'"Playfair Display", serif'},children:"C"}),n.jsxs("div",{children:[n.jsx("span",{style:{fontFamily:'"Playfair Display", serif',fontSize:"22px",fontWeight:"600",letterSpacing:"-0.5px"},children:"CSX"}),n.jsx("span",{style:{display:"block",fontSize:"10px",color:"var(--text-muted)",fontWeight:"600",letterSpacing:"2px",marginTop:"-2px"},children:"IMMOBILIER"})]})]}),n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsx("h1",{style:{fontSize:"32px",marginBottom:"12px"},children:"Connexion"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"16px"},children:"Accdez  votre espace de gestion immobilire"})]}),a&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",marginBottom:"24px",color:"var(--error)",fontSize:"14px"},children:[n.jsx(Oe,{size:18}),a]}),n.jsxs("form",{onSubmit:x,children:[n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:"var(--text-secondary)"},children:"Email"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(Rt,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"email",value:t,onChange:g=>e(g.target.value),placeholder:"vous@exemple.com",required:!0,style:{width:"100%",padding:"14px 14px 14px 46px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",color:"var(--text-primary)",fontSize:"15px",transition:"border-color 0.2s ease"}})]})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[n.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"var(--text-secondary)"},children:"Mot de passe"}),n.jsx(te,{to:"/forgot-password",style:{fontSize:"13px",color:"var(--gold)",fontWeight:"500"},children:"Mot de passe oubli ?"})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(Ts,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:s?"text":"password",value:r,onChange:g=>i(g.target.value),placeholder:"",required:!0,style:{width:"100%",padding:"14px 46px 14px 46px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",color:"var(--text-primary)",fontSize:"15px"}}),n.jsx("button",{type:"button",onClick:()=>o(!s),style:{position:"absolute",right:"14px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer",padding:"4px"},children:s?n.jsx(Iu,{size:18}):n.jsx(Yr,{size:18})})]})]}),n.jsxs("button",{type:"submit",disabled:l,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"16px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"12px",color:"var(--bg-primary)",fontSize:"16px",fontWeight:"600",cursor:"pointer",opacity:l?.7:1,transition:"opacity 0.2s ease"},children:[l?"Connexion...":"Se connecter",!l&&n.jsx(kt,{size:18})]})]}),n.jsxs("p",{style:{marginTop:"32px",textAlign:"center",color:"var(--text-muted)",fontSize:"14px"},children:["Pas encore de compte ?"," ",n.jsx(te,{to:"/signup",style:{color:"var(--gold)",fontWeight:"600"},children:"Crer un compte"})]})]}),n.jsxs("div",{style:{flex:1,background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.02) 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"48px",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"600px",height:"600px",background:"radial-gradient(circle, rgba(212, 175, 55, 0.15) 0%, transparent 70%)",borderRadius:"50%"}}),n.jsxs("div",{style:{position:"relative",textAlign:"center",maxWidth:"400px"},children:[n.jsx("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",borderRadius:"24px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 32px",fontSize:"36px",fontFamily:'"Playfair Display", serif',fontWeight:"700",color:"var(--bg-primary)"},children:"C"}),n.jsxs("h2",{style:{fontSize:"28px",marginBottom:"16px",lineHeight:"1.3"},children:["Grez votre immobilier",n.jsx("br",{}),n.jsx("span",{className:"gold-text",children:"en toute simplicit"})]}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"15px",lineHeight:"1.6"},children:"Publiez vos annonces sur toutes les plateformes en un clic, grez vos leads et boostez vos ventes avec l'IA."})]})]})]})}function Cw(){const[t,e]=w.useState(""),[r,i]=w.useState(""),[s,o]=w.useState(""),[a,d]=w.useState(!1),[l,c]=w.useState(""),[u,h]=w.useState(!1),[p,f]=w.useState(!1),{signUp:x}=Qr();_i();const y=async v=>{if(v.preventDefault(),c(""),h(!0),s.length<6){c("Le mot de passe doit contenir au moins 6 caractres"),h(!1);return}const{error:g}=await x(r,s,t);g?(c(g.message),h(!1)):f(!0)};return p?n.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-primary)",padding:"24px"},children:n.jsxs("div",{style:{maxWidth:"440px",textAlign:"center"},children:[n.jsx("div",{style:{width:"72px",height:"72px",background:"rgba(34, 197, 94, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:n.jsx(re,{size:36,style:{color:"var(--success)"}})}),n.jsx("h1",{style:{fontSize:"28px",marginBottom:"12px"},children:"Vrifiez votre email"}),n.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"15px",lineHeight:"1.6",marginBottom:"32px"},children:["Nous avons envoy un lien de confirmation  ",n.jsx("strong",{style:{color:"var(--text-primary)"},children:r}),". Cliquez sur le lien pour activer votre compte."]}),n.jsxs(te,{to:"/login",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"14px 28px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",borderRadius:"12px",color:"var(--bg-primary)",fontSize:"15px",fontWeight:"600",textDecoration:"none"},children:["Retour  la connexion",n.jsx(kt,{size:18})]})]})}):n.jsxs("div",{style:{minHeight:"100vh",display:"flex",background:"var(--bg-primary)"},children:[n.jsxs("div",{style:{flex:1,background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.02) 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"48px",position:"relative",overflow:"hidden"},children:[n.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"600px",height:"600px",background:"radial-gradient(circle, rgba(212, 175, 55, 0.15) 0%, transparent 70%)",borderRadius:"50%"}}),n.jsxs("div",{style:{position:"relative",maxWidth:"400px"},children:[n.jsxs("h2",{style:{fontSize:"32px",marginBottom:"24px",lineHeight:"1.3"},children:["Rejoignez ",n.jsx("span",{className:"gold-text",children:"CSX Immobilier"})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:["Publication multi-plateformes en 1 clic","Descriptions gnres par IA","Gestion centralise des leads","Statistiques et analyses"].map((v,g)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px"},children:[n.jsx("div",{style:{width:"28px",height:"28px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(re,{size:16,style:{color:"var(--gold)"}})}),n.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"15px"},children:v})]},g))})]})]}),n.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",padding:"48px",maxWidth:"560px"},children:[n.jsxs(te,{to:"/",style:{display:"inline-flex",alignItems:"center",gap:"12px",marginBottom:"48px"},children:[n.jsx("div",{style:{width:"44px",height:"44px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",color:"var(--bg-primary)",fontSize:"20px",fontFamily:'"Playfair Display", serif'},children:"C"}),n.jsxs("div",{children:[n.jsx("span",{style:{fontFamily:'"Playfair Display", serif',fontSize:"22px",fontWeight:"600",letterSpacing:"-0.5px"},children:"CSX"}),n.jsx("span",{style:{display:"block",fontSize:"10px",color:"var(--text-muted)",fontWeight:"600",letterSpacing:"2px",marginTop:"-2px"},children:"IMMOBILIER"})]})]}),n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsx("h1",{style:{fontSize:"32px",marginBottom:"12px"},children:"Crer un compte"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"16px"},children:"Commencez gratuitement pendant 14 jours"})]}),l&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",marginBottom:"24px",color:"var(--error)",fontSize:"14px"},children:[n.jsx(Oe,{size:18}),l]}),n.jsxs("form",{onSubmit:y,children:[n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:"var(--text-secondary)"},children:"Nom complet"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx($r,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"text",value:t,onChange:v=>e(v.target.value),placeholder:"Jean Dupont",required:!0,style:{width:"100%",padding:"14px 14px 14px 46px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",color:"var(--text-primary)",fontSize:"15px"}})]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:"var(--text-secondary)"},children:"Email"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(Rt,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"email",value:r,onChange:v=>i(v.target.value),placeholder:"vous@exemple.com",required:!0,style:{width:"100%",padding:"14px 14px 14px 46px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",color:"var(--text-primary)",fontSize:"15px"}})]})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:"var(--text-secondary)"},children:"Mot de passe"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(Ts,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:a?"text":"password",value:s,onChange:v=>o(v.target.value),placeholder:"6 caractres minimum",required:!0,style:{width:"100%",padding:"14px 46px 14px 46px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",color:"var(--text-primary)",fontSize:"15px"}}),n.jsx("button",{type:"button",onClick:()=>d(!a),style:{position:"absolute",right:"14px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer",padding:"4px"},children:a?n.jsx(Iu,{size:18}):n.jsx(Yr,{size:18})})]})]}),n.jsxs("button",{type:"submit",disabled:u,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"16px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"12px",color:"var(--bg-primary)",fontSize:"16px",fontWeight:"600",cursor:"pointer",opacity:u?.7:1},children:[u?"Cration...":"Crer mon compte",!u&&n.jsx(kt,{size:18})]})]}),n.jsxs("p",{style:{marginTop:"24px",textAlign:"center",color:"var(--text-muted)",fontSize:"12px",lineHeight:"1.6"},children:["En crant un compte, vous acceptez nos"," ",n.jsx(te,{to:"/terms",style:{color:"var(--gold)"},children:"Conditions d'utilisation"})," ","et notre"," ",n.jsx(te,{to:"/privacy",style:{color:"var(--gold)"},children:"Politique de confidentialit"})]}),n.jsxs("p",{style:{marginTop:"24px",textAlign:"center",color:"var(--text-muted)",fontSize:"14px"},children:["Dj un compte ?"," ",n.jsx(te,{to:"/login",style:{color:"var(--gold)",fontWeight:"600"},children:"Se connecter"})]})]})]})}function zw(){const[t,e]=w.useState(""),[r,i]=w.useState(""),[s,o]=w.useState(!1),[a,d]=w.useState(!1),{resetPassword:l}=Qr(),c=async u=>{u.preventDefault(),i(""),o(!0);const{error:h}=await l(t);h?(i(h.message),o(!1)):d(!0)};return a?n.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-primary)",padding:"24px"},children:n.jsxs("div",{style:{maxWidth:"440px",textAlign:"center"},children:[n.jsx("div",{style:{width:"72px",height:"72px",background:"rgba(34, 197, 94, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:n.jsx(re,{size:36,style:{color:"var(--success)"}})}),n.jsx("h1",{style:{fontSize:"28px",marginBottom:"12px"},children:"Email envoy"}),n.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"15px",lineHeight:"1.6",marginBottom:"32px"},children:["Si un compte existe avec l'adresse ",n.jsx("strong",{style:{color:"var(--text-primary)"},children:t}),", vous recevrez un lien pour rinitialiser votre mot de passe."]}),n.jsxs(te,{to:"/login",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"14px 28px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",borderRadius:"12px",color:"var(--bg-primary)",fontSize:"15px",fontWeight:"600",textDecoration:"none"},children:["Retour  la connexion",n.jsx(kt,{size:18})]})]})}):n.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-primary)",padding:"24px"},children:n.jsxs("div",{style:{width:"100%",maxWidth:"440px"},children:[n.jsxs(te,{to:"/login",style:{display:"inline-flex",alignItems:"center",gap:"8px",color:"var(--text-muted)",fontSize:"14px",marginBottom:"32px"},children:[n.jsx(Za,{size:18}),"Retour  la connexion"]}),n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsx("h1",{style:{fontSize:"32px",marginBottom:"12px"},children:"Mot de passe oubli ?"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"15px",lineHeight:"1.6"},children:"Entrez votre adresse email et nous vous enverrons un lien pour rinitialiser votre mot de passe."})]}),r&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",marginBottom:"24px",color:"var(--error)",fontSize:"14px"},children:[n.jsx(Oe,{size:18}),r]}),n.jsxs("form",{onSubmit:c,children:[n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:"var(--text-secondary)"},children:"Email"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(Rt,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"email",value:t,onChange:u=>e(u.target.value),placeholder:"vous@exemple.com",required:!0,style:{width:"100%",padding:"14px 14px 14px 46px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",color:"var(--text-primary)",fontSize:"15px"}})]})]}),n.jsxs("button",{type:"submit",disabled:s,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"16px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"12px",color:"var(--bg-primary)",fontSize:"16px",fontWeight:"600",cursor:"pointer",opacity:s?.7:1},children:[s?"Envoi...":"Envoyer le lien",!s&&n.jsx(kt,{size:18})]})]})]})})}const Rw={apartment:"Appartement",house:"Maison",villa:"Villa",land:"Terrain",commercial:"Commercial"};function Ew(){var T,k,P;const{id:t}=Rx(),[e,r]=w.useState(null),[i,s]=w.useState(!0),[o,a]=w.useState(null),[d,l]=w.useState(0),[c,u]=w.useState({name:"",email:"",phone:"",message:""}),[h,p]=w.useState(!1),[f,x]=w.useState(!1),[y,v]=w.useState(null);w.useEffect(()=>{async function I(){s(!0);const{data:E,error:A}=await G.from("listings").select("*").eq("id",t).eq("status","active").single();A?a("Annonce non trouvee ou inactive"):(r(E),G.from("listings").update({views:(E.views||0)+1}).eq("id",t).then()),s(!1)}t&&I()},[t]);const g=(I,E)=>{u(A=>({...A,[I]:E}))},m=async I=>{if(I.preventDefault(),!c.name||!c.email&&!c.phone){v("Veuillez remplir votre nom et email ou telephone");return}p(!0),v(null);try{const{data:E,error:A}=await G.functions.invoke("submit-lead",{body:{listingId:t,name:c.name,email:c.email,phone:c.phone,message:c.message,source:"website"}});if(A)throw A;if(E.error)throw new Error(E.error);x(!0),u({name:"",email:"",phone:"",message:""})}catch(E){console.error("Submit error:",E),v(E.message||"Erreur lors de l'envoi")}finally{p(!1)}},b=(I,E)=>{if(!I)return"Prix sur demande";const A=new Intl.NumberFormat("fr-FR").format(I);return E==="rent"?`${A} EUR/mois`:E==="vacation"?`${A} EUR/nuit`:`${A} EUR`},j=()=>{var I;((I=e==null?void 0:e.images)==null?void 0:I.length)>1&&l(E=>(E+1)%e.images.length)},R=()=>{var I;((I=e==null?void 0:e.images)==null?void 0:I.length)>1&&l(E=>(E-1+e.images.length)%e.images.length)};return i?n.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-primary)",display:"flex",alignItems:"center",justifyContent:"center"},children:[n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{width:"48px",height:"48px",border:"3px solid var(--border-color)",borderTopColor:"var(--gold)",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),n.jsx("p",{style:{color:"var(--text-muted)"},children:"Chargement..."})]}),n.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]}):o||!e?n.jsx("div",{style:{minHeight:"100vh",background:"var(--bg-primary)",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[n.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(239, 68, 68, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:n.jsx(tr,{size:36,style:{color:"var(--error)"}})}),n.jsx("h1",{style:{fontSize:"24px",marginBottom:"12px"},children:"Annonce non disponible"}),n.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"24px"},children:o||"Cette annonce n'existe pas ou n'est plus active."}),n.jsxs(te,{to:"/",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",background:"var(--gold)",color:"var(--bg-primary)",borderRadius:"8px",textDecoration:"none",fontWeight:"600"},children:[n.jsx(Za,{size:18}),"Retour a l'accueil"]})]})}):n.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-primary)"},children:[n.jsx("header",{style:{padding:"16px 24px",borderBottom:"1px solid var(--border-color)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:n.jsxs(te,{to:"/",style:{display:"flex",alignItems:"center",gap:"12px",textDecoration:"none"},children:[n.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",fontSize:"18px",color:"var(--bg-primary)"},children:"C"}),n.jsxs("div",{children:[n.jsx("span",{style:{fontSize:"18px",fontWeight:"700",color:"var(--text-primary)"},children:"CSX"}),n.jsx("span",{style:{display:"block",fontSize:"10px",color:"var(--gold)",fontWeight:"600",letterSpacing:"2px",marginTop:"-2px"},children:"IMMOBILIER"})]})]})}),n.jsx("main",{style:{maxWidth:"1200px",margin:"0 auto",padding:"32px 24px"},children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"32px"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{position:"relative",borderRadius:"16px",overflow:"hidden",marginBottom:"24px"},children:((T=e.images)==null?void 0:T.length)>0?n.jsxs(n.Fragment,{children:[n.jsx("img",{src:e.images[d],alt:e.title,style:{width:"100%",height:"400px",objectFit:"cover"}}),e.images.length>1&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:R,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",width:"44px",height:"44px",background:"rgba(0,0,0,0.6)",border:"none",borderRadius:"50%",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(ka,{size:24})}),n.jsx("button",{onClick:j,style:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",width:"44px",height:"44px",background:"rgba(0,0,0,0.6)",border:"none",borderRadius:"50%",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(wn,{size:24})}),n.jsx("div",{style:{position:"absolute",bottom:"16px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"8px"},children:e.images.map((I,E)=>n.jsx("button",{onClick:()=>l(E),style:{width:E===d?"24px":"8px",height:"8px",background:E===d?"var(--gold)":"rgba(255,255,255,0.5)",border:"none",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s ease"}},E))})]})]}):n.jsx("div",{style:{width:"100%",height:"400px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.02) 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(tr,{size:64,style:{color:"var(--gold)",opacity:.5}})})}),((k=e.images)==null?void 0:k.length)>1&&n.jsx("div",{style:{display:"flex",gap:"12px",marginBottom:"24px",overflowX:"auto"},children:e.images.map((I,E)=>n.jsx("button",{onClick:()=>l(E),style:{width:"80px",height:"60px",borderRadius:"8px",overflow:"hidden",border:E===d?"2px solid var(--gold)":"2px solid transparent",padding:0,cursor:"pointer",flexShrink:0},children:n.jsx("img",{src:I,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}})},E))}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("p",{style:{fontSize:"14px",color:"var(--gold)",fontWeight:"600",marginBottom:"8px",textTransform:"uppercase"},children:Rw[e.property_type]||e.property_type}),n.jsx("h1",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"12px"},children:e.title}),e.location&&n.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-muted)",marginBottom:"16px"},children:[n.jsx(it,{size:18}),e.location]}),n.jsx("p",{style:{fontSize:"32px",fontWeight:"700",color:"var(--gold)"},children:b(e.price,e.price_type)})]}),n.jsxs("div",{style:{display:"flex",gap:"24px",padding:"20px 24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",marginBottom:"24px"},children:[e.beds&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(Eu,{size:22,style:{color:"var(--gold)"}}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"18px",fontWeight:"600"},children:e.beds}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Chambres"})]})]}),e.baths&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(Ru,{size:22,style:{color:"var(--gold)"}}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"18px",fontWeight:"600"},children:e.baths}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Salles de bain"})]})]}),e.area&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(Vs,{size:22,style:{color:"var(--gold)"}}),n.jsxs("div",{children:[n.jsxs("p",{style:{fontSize:"18px",fontWeight:"600"},children:[e.area," m2"]}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Surface"})]})]})]}),e.description&&n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Description"}),n.jsx("p",{style:{color:"var(--text-secondary)",lineHeight:"1.7",whiteSpace:"pre-wrap"},children:e.description})]}),((P=e.features)==null?void 0:P.length)>0&&n.jsxs("div",{children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Equipements"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:e.features.map((I,E)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px 16px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px"},children:[n.jsx(re,{size:16,style:{color:"var(--gold)"}}),n.jsx("span",{style:{fontSize:"14px"},children:I})]},E))})]})]}),n.jsx("div",{children:n.jsxs("div",{style:{position:"sticky",top:"24px",padding:"28px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"8px"},children:"Interesse par ce bien ?"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px",marginBottom:"24px"},children:"Remplissez le formulaire et nous vous recontacterons rapidement."}),f?n.jsxs("div",{style:{padding:"24px",background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)",borderRadius:"12px",textAlign:"center"},children:[n.jsx("div",{style:{width:"56px",height:"56px",background:"rgba(34, 197, 94, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:n.jsx(re,{size:28,style:{color:"#22c55e"}})}),n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px",color:"#22c55e"},children:"Message envoye !"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Nous avons bien recu votre demande et reviendrons vers vous tres rapidement."})]}):n.jsxs("form",{onSubmit:m,children:[y&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"8px",marginBottom:"16px",color:"var(--error)",fontSize:"13px"},children:[n.jsx(Oe,{size:18}),y]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"8px",color:"var(--text-muted)"},children:"Nom complet *"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx($r,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"text",value:c.name,onChange:I=>g("name",I.target.value),placeholder:"Jean Dupont",required:!0,style:{width:"100%",padding:"12px 16px 12px 44px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px"}})]})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"8px",color:"var(--text-muted)"},children:"Email"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(Rt,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"email",value:c.email,onChange:I=>g("email",I.target.value),placeholder:"jean@email.com",style:{width:"100%",padding:"12px 16px 12px 44px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px"}})]})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"8px",color:"var(--text-muted)"},children:"Telephone"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(Ps,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"tel",value:c.phone,onChange:I=>g("phone",I.target.value),placeholder:"+590 690 12 34 56",style:{width:"100%",padding:"12px 16px 12px 44px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px"}})]})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"8px",color:"var(--text-muted)"},children:"Message"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(kn,{size:18,style:{position:"absolute",left:"14px",top:"14px",color:"var(--text-muted)"}}),n.jsx("textarea",{value:c.message,onChange:I=>g("message",I.target.value),placeholder:"Je suis interesse par ce bien...",rows:4,style:{width:"100%",padding:"12px 16px 12px 44px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px",resize:"vertical"}})]})]}),n.jsx("button",{type:"submit",disabled:h,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"14px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontSize:"15px",fontWeight:"600",cursor:h?"wait":"pointer",opacity:h?.7:1},children:h?n.jsxs(n.Fragment,{children:[n.jsx(Ie,{size:18,style:{animation:"spin 1s linear infinite"}}),"Envoi en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(As,{size:18}),"Envoyer ma demande"]})}),n.jsx("p",{style:{fontSize:"11px",color:"var(--text-muted)",textAlign:"center",marginTop:"16px",lineHeight:"1.5"},children:"En soumettant ce formulaire, vous acceptez d'etre contacte concernant ce bien."})]})]})})]})}),n.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
      `})]})}function Tw(){var y,v;const{user:t}=Qr(),[e,r]=w.useState({totalListings:0,activeListings:0,totalViews:0,totalLeads:0,newLeads:0}),[i,s]=w.useState([]),[o,a]=w.useState([]),[d,l]=w.useState(!0),[c,u]=w.useState(null),h=((y=t==null?void 0:t.user_metadata)==null?void 0:y.full_name)||((v=t==null?void 0:t.email)==null?void 0:v.split("@")[0])||"Utilisateur";w.useEffect(()=>{async function g(){l(!0),u(null);try{const{data:m,error:b}=await G.from("listings").select("*").order("created_at",{ascending:!1});if(b)throw b;const{data:j,error:R}=await G.from("leads").select(`
            *,
            listing:listings(id, title)
          `).order("created_at",{ascending:!1});if(R)throw R;const T=(m==null?void 0:m.length)||0,k=(m==null?void 0:m.filter(A=>A.status==="active").length)||0,P=(m==null?void 0:m.reduce((A,O)=>A+(O.views||0),0))||0,I=(j==null?void 0:j.length)||0,E=(j==null?void 0:j.filter(A=>A.status==="new").length)||0;r({totalListings:T,activeListings:k,totalViews:P,totalLeads:I,newLeads:E}),s((m==null?void 0:m.slice(0,5))||[]),a((j==null?void 0:j.slice(0,5))||[])}catch(m){console.error("Dashboard error:",m),u(m.message)}finally{l(!1)}}g()},[]);const p=[{label:"Annonces Actives",value:e.activeListings,total:e.totalListings,icon:we,color:"#d4af37",bgColor:"rgba(212, 175, 55, 0.1)"},{label:"Vues Totales",value:e.totalViews,icon:Yr,color:"#3b82f6",bgColor:"rgba(59, 130, 246, 0.1)"},{label:"Nouveaux Leads",value:e.newLeads,total:e.totalLeads,icon:xt,color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.1)"},{label:"Taux de Conversion",value:e.totalViews>0?Math.round(e.totalLeads/e.totalViews*100):0,suffix:"%",icon:Hs,color:"#a855f7",bgColor:"rgba(168, 85, 247, 0.1)"}],f=(g,m)=>{if(!g)return"";const b=new Intl.NumberFormat("fr-FR").format(g);return m==="rent"?`${b} /mois`:m==="vacation"?`${b} /nuit`:`${b} `},x=g=>{if(!g)return"";const m=new Date(g),j=new Date-m,R=Math.floor(j/(1e3*60*60)),T=Math.floor(R/24);return R<1?" l'instant":R<24?`Il y a ${R}h`:T<7?`Il y a ${T}j`:m.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})};return d?n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",border:"3px solid var(--border-color)",borderTopColor:"var(--gold)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),n.jsx("p",{style:{color:"var(--text-muted)"},children:"Chargement..."})]}),n.jsx("style",{children:`
          @keyframes spin { to { transform: rotate(360deg); } }
        `})]}):n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"32px"},children:[n.jsxs("div",{children:[n.jsxs("h1",{style:{fontSize:"28px",fontWeight:"600",marginBottom:"8px"},children:["Bonjour, ",h]}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"15px"},children:"Voici un aperu de votre activit immobilire"})]}),n.jsxs(te,{to:"/listings/new",style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",color:"var(--bg-primary)",borderRadius:"10px",fontSize:"14px",fontWeight:"600",textDecoration:"none"},children:[n.jsx($t,{size:18}),"Nouvelle Annonce"]})]}),c&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",marginBottom:"24px",color:"var(--error)"},children:[n.jsx(Oe,{size:20}),n.jsxs("span",{children:["Erreur: ",c]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px",marginBottom:"32px"},children:p.map((g,m)=>n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:n.jsx("div",{style:{width:"48px",height:"48px",background:g.bgColor,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(g.icon,{size:24,style:{color:g.color}})})}),n.jsxs("p",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"4px"},children:[g.value.toLocaleString(),g.suffix||"",g.total!==void 0&&g.total>0&&n.jsxs("span",{style:{fontSize:"16px",color:"var(--text-muted)",fontWeight:"400"},children:[" ","/ ",g.total]})]}),n.jsx("p",{style:{fontSize:"14px",color:"var(--text-muted)"},children:g.label})]},m))}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",marginBottom:"32px"},children:[n.jsxs(te,{to:"/listings/new",style:{padding:"24px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.02) 100%)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"16px",display:"flex",alignItems:"center",gap:"16px",textDecoration:"none",color:"inherit"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"var(--gold)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx($t,{size:24,style:{color:"var(--bg-primary)"}})}),n.jsxs("div",{children:[n.jsx("p",{style:{fontWeight:"600",marginBottom:"4px"},children:"Crer une annonce"}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:"Publier sur toutes les plateformes"})]})]}),n.jsxs(te,{to:"/ai-tools",style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",display:"flex",alignItems:"center",gap:"16px",textDecoration:"none",color:"inherit"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"rgba(168, 85, 247, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(He,{size:24,style:{color:"#a855f7"}})}),n.jsxs("div",{children:[n.jsx("p",{style:{fontWeight:"600",marginBottom:"4px"},children:"Gnrer avec l'IA"}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:"Descriptions automatiques"})]})]}),n.jsxs(te,{to:"/leads",style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",display:"flex",alignItems:"center",gap:"16px",textDecoration:"none",color:"inherit"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"rgba(34, 197, 94, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(xt,{size:24,style:{color:"#22c55e"}})}),n.jsxs("div",{children:[n.jsx("p",{style:{fontWeight:"600",marginBottom:"4px"},children:"Voir les leads"}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:e.newLeads>0?`${e.newLeads} nouveaux  traiter`:"Aucun nouveau lead"})]})]})]}),e.totalListings===0&&n.jsxs("div",{style:{padding:"60px 40px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",textAlign:"center"},children:[n.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:n.jsx(we,{size:36,style:{color:"var(--gold)"}})}),n.jsx("h3",{style:{fontSize:"20px",marginBottom:"12px"},children:"Commencez par crer votre premire annonce"}),n.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"24px",maxWidth:"400px",margin:"0 auto 24px"},children:"Publiez votre premier bien et diffusez-le sur toutes les plateformes en un clic."}),n.jsxs(te,{to:"/listings/new",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"14px 28px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",color:"var(--bg-primary)",borderRadius:"10px",fontSize:"15px",fontWeight:"600",textDecoration:"none"},children:[n.jsx($t,{size:18}),"Crer ma premire annonce"]})]}),e.totalListings>0&&n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600"},children:"Annonces Rcentes"}),n.jsxs(te,{to:"/listings",style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"13px",color:"var(--gold)",fontWeight:"500"},children:["Voir tout ",n.jsx(kt,{size:14})]})]}),i.length>0?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:i.map(g=>{var m,b;return n.jsxs(te,{to:`/listings/${g.id}/edit`,style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"var(--bg-tertiary)",borderRadius:"10px",textDecoration:"none",color:"inherit"},children:[n.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"8px",background:(m=g.images)!=null&&m[0]?`url(${g.images[0]}) center/cover`:"rgba(212, 175, 55, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:!((b=g.images)!=null&&b[0])&&n.jsx(we,{size:20,style:{color:"var(--gold)"}})}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:g.title||"Sans titre"}),n.jsx("p",{style:{fontSize:"12px",color:"var(--gold)",fontWeight:"600"},children:f(g.price,g.price_type)})]}),n.jsx("span",{style:{padding:"4px 10px",background:g.status==="active"?"rgba(34, 197, 94, 0.1)":"rgba(255, 255, 255, 0.05)",color:g.status==="active"?"#22c55e":"var(--text-muted)",borderRadius:"6px",fontSize:"11px",fontWeight:"600"},children:g.status==="active"?"Active":g.status==="draft"?"Brouillon":g.status==="paused"?"En pause":g.status})]},g.id)})}):n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px",textAlign:"center",padding:"20px"},children:"Aucune annonce rcente"})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600"},children:"Leads Rcents"}),n.jsxs(te,{to:"/leads",style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"13px",color:"var(--gold)",fontWeight:"500"},children:["Voir tout ",n.jsx(kt,{size:14})]})]}),o.length>0?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:o.map(g=>{var m;return n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"var(--bg-tertiary)",borderRadius:"10px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",background:g.status==="new"?"rgba(34, 197, 94, 0.1)":"rgba(59, 130, 246, 0.1)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"14px",color:g.status==="new"?"#22c55e":"#3b82f6"},children:(g.name||"U")[0].toUpperCase()}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:g.name||"Contact inconnu"}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:((m=g.listing)==null?void 0:m.title)||g.source||"Source inconnue"})]}),n.jsxs("div",{style:{textAlign:"right"},children:[n.jsx("span",{style:{display:"block",padding:"4px 10px",background:g.status==="new"?"rgba(34, 197, 94, 0.1)":"rgba(255, 255, 255, 0.05)",color:g.status==="new"?"#22c55e":"var(--text-muted)",borderRadius:"6px",fontSize:"11px",fontWeight:"600",marginBottom:"4px"},children:g.status==="new"?"Nouveau":g.status==="contacted"?"Contact":g.status==="qualified"?"Qualifi":g.status}),n.jsx("span",{style:{fontSize:"11px",color:"var(--text-muted)"},children:x(g.created_at)})]})]},g.id)})}):n.jsxs("div",{style:{textAlign:"center",padding:"30px 20px",color:"var(--text-muted)"},children:[n.jsx(xt,{size:32,style:{opacity:.3,marginBottom:"12px"}}),n.jsx("p",{style:{fontSize:"14px"},children:"Aucun lead pour le moment"}),n.jsx("p",{style:{fontSize:"12px",marginTop:"4px"},children:"Les leads apparatront ici quand des prospects vous contacteront"})]})]})]})]})}function Iw(){const[t,e]=w.useState([]),[r,i]=w.useState(!0),[s,o]=w.useState(null),a=async()=>{i(!0);const{data:d,error:l}=await G.from("listings").select("*").order("created_at",{ascending:!1});l?o(l.message):e(d||[]),i(!1)};return w.useEffect(()=>{a()},[]),{listings:t,loading:r,error:s,refetch:a}}async function Pw(t){const{data:e,error:r}=await G.from("listings").select("*").eq("id",t).single();return{data:e,error:r}}async function Aw(t){const{data:{user:e}}=await G.auth.getUser(),{data:r,error:i}=await G.from("listings").insert([{...t,user_id:e.id}]).select().single();return{data:r,error:i}}async function py(t,e){const{data:r,error:i}=await G.from("listings").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();return{data:r,error:i}}async function Ow(t){const{error:e}=await G.from("listings").delete().eq("id",t);return{error:e}}function Lw(){const[t,e]=w.useState([]),[r,i]=w.useState(!0),[s,o]=w.useState(null),a=async()=>{i(!0);const{data:d,error:l}=await G.from("leads").select(`
        *,
        listing:listings(id, title)
      `).order("created_at",{ascending:!1});l?o(l.message):e(d||[]),i(!1)};return w.useEffect(()=>{a()},[]),{leads:t,loading:r,error:s,refetch:a}}async function Dw(t,e){const{data:r,error:i}=await G.from("leads").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();return{data:r,error:i}}async function Nw(t){const{error:e}=await G.from("leads").delete().eq("id",t);return{error:e}}async function Mw(t,e){try{const{data:r,error:i}=await G.functions.invoke("publish-to-platforms",{body:{listingId:t,platforms:e}});if(i)throw i;return{data:r,error:null}}catch(r){return{data:null,error:r.message||"Publication failed"}}}async function Bw(){const{data:t,error:e}=await G.from("platform_connections").select("platform, status, metadata").eq("status","connected");return{data:t||[],error:e}}const jr={active:{label:"Active",color:"#22c55e",bg:"rgba(34, 197, 94, 0.1)"},draft:{label:"Brouillon",color:"#f59e0b",bg:"rgba(245, 158, 11, 0.1)"},paused:{label:"En pause",color:"#6b7280",bg:"rgba(107, 114, 128, 0.1)"},pending:{label:"En attente",color:"#3b82f6",bg:"rgba(59, 130, 246, 0.1)"}},$w={apartment:"Appartement",house:"Maison",villa:"Villa",land:"Terrain",commercial:"Commercial"};function Fw(){const{listings:t,loading:e,error:r,refetch:i}=Iw(),[s,o]=w.useState("grid"),[a,d]=w.useState(""),[l,c]=w.useState("all"),[u,h]=w.useState(null),[p,f]=w.useState(null),[x,y]=w.useState(null),[v,g]=w.useState([]),[m,b]=w.useState([]),[j,R]=w.useState(!1),[T,k]=w.useState(null);w.useEffect(()=>{x&&Bw().then(({data:_})=>{g(_||[]),b((_==null?void 0:_.map(N=>N.platform))||[])})},[x]);const P=t.filter(_=>{var z,S;const N=!a||((z=_.title)==null?void 0:z.toLowerCase().includes(a.toLowerCase()))||((S=_.location)==null?void 0:S.toLowerCase().includes(a.toLowerCase())),q=l==="all"||_.status===l;return N&&q}),I=async _=>{if(!window.confirm("Etes-vous sur de vouloir supprimer cette annonce ?"))return;f(_);const{error:N}=await Ow(_);N?alert("Erreur lors de la suppression: "+N):i(),f(null),h(null)},E=async(_,N)=>{const q=N==="active"?"paused":"active",{error:z}=await py(_,{status:q});z?alert("Erreur: "+z):i(),h(null)},A=async()=>{if(!x||m.length===0)return;R(!0),k(null);const{data:_,error:N}=await Mw(x.id,m);k(N?{error:N}:(_==null?void 0:_.results)||{}),R(!1)},O=()=>{y(null),k(null),b([]),h(null)},W=(_,N)=>{if(!_)return"Prix non defini";const q=new Intl.NumberFormat("fr-FR").format(_);return N==="rent"?`${q} EUR/mois`:N==="vacation"?`${q} EUR/nuit`:`${q} EUR`};return e?n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",border:"3px solid var(--border-color)",borderTopColor:"var(--gold)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),n.jsx("p",{style:{color:"var(--text-muted)"},children:"Chargement des annonces..."})]}),n.jsx("style",{children:`
          @keyframes spin { to { transform: rotate(360deg); } }
        `})]}):n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",marginBottom:"8px"},children:"Mes Annonces"}),n.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"15px"},children:[t.length," annonce",t.length!==1?"s":""," au total"]})]}),n.jsxs(te,{to:"/listings/new",style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",color:"var(--bg-primary)",borderRadius:"10px",fontSize:"14px",fontWeight:"600",textDecoration:"none"},children:[n.jsx($t,{size:18}),"Nouvelle Annonce"]})]}),r&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",marginBottom:"24px",color:"var(--error)"},children:[n.jsx(Oe,{size:20}),n.jsxs("span",{children:["Erreur: ",r]})]}),n.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"24px",alignItems:"center"},children:[n.jsxs("div",{style:{flex:1,position:"relative"},children:[n.jsx(En,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"text",placeholder:"Rechercher par titre ou localisation...",value:a,onChange:_=>d(_.target.value),style:{width:"100%",padding:"12px 12px 12px 44px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("select",{value:l,onChange:_=>c(_.target.value),style:{padding:"12px 16px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px",cursor:"pointer"},children:[n.jsx("option",{value:"all",children:"Tous les statuts"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"draft",children:"Brouillon"}),n.jsx("option",{value:"paused",children:"En pause"})]}),n.jsxs("div",{style:{display:"flex",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px",padding:"4px"},children:[n.jsx("button",{onClick:()=>o("grid"),style:{padding:"8px 12px",background:s==="grid"?"var(--bg-tertiary)":"transparent",border:"none",borderRadius:"6px",color:s==="grid"?"var(--text-primary)":"var(--text-muted)",cursor:"pointer",display:"flex",alignItems:"center"},children:n.jsx(Yj,{size:18})}),n.jsx("button",{onClick:()=>o("list"),style:{padding:"8px 12px",background:s==="list"?"var(--bg-tertiary)":"transparent",border:"none",borderRadius:"6px",color:s==="list"?"var(--text-primary)":"var(--text-muted)",cursor:"pointer",display:"flex",alignItems:"center"},children:n.jsx(Zj,{size:18})})]})]}),P.length===0&&n.jsxs("div",{style:{padding:"60px 40px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",textAlign:"center"},children:[n.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:n.jsx(we,{size:36,style:{color:"var(--gold)"}})}),n.jsx("h3",{style:{fontSize:"20px",marginBottom:"12px"},children:t.length===0?"Aucune annonce":"Aucun rsultat"}),n.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"24px",maxWidth:"400px",margin:"0 auto 24px"},children:t.length===0?"Crez votre premire annonce et publiez-la sur toutes les plateformes.":"Essayez de modifier vos filtres de recherche."}),t.length===0&&n.jsxs(te,{to:"/listings/new",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"14px 28px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",color:"var(--bg-primary)",borderRadius:"10px",fontSize:"15px",fontWeight:"600",textDecoration:"none"},children:[n.jsx($t,{size:18}),"Crer une annonce"]})]}),P.length>0&&s==="grid"&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px"},children:P.map(_=>{var N,q,z,S,D;return n.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",overflow:"hidden",position:"relative"},children:[n.jsx("div",{style:{height:"180px",background:(N=_.images)!=null&&N[0]?`url(${_.images[0]}) center/cover`:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.02) 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:!((q=_.images)!=null&&q[0])&&n.jsx(we,{size:48,style:{color:"var(--gold)",opacity:.5}})}),n.jsx("div",{style:{position:"absolute",top:"12px",left:"12px",padding:"6px 12px",background:((z=jr[_.status])==null?void 0:z.bg)||jr.draft.bg,borderRadius:"6px",fontSize:"12px",fontWeight:"600",color:((S=jr[_.status])==null?void 0:S.color)||jr.draft.color},children:((D=jr[_.status])==null?void 0:D.label)||_.status}),n.jsxs("div",{style:{position:"absolute",top:"12px",right:"12px"},children:[n.jsx("button",{onClick:()=>h(u===_.id?null:_.id),style:{width:"32px",height:"32px",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(10px)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(nw,{size:16})}),u===_.id&&n.jsxs("div",{style:{position:"absolute",top:"40px",right:"0",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px",padding:"8px",minWidth:"160px",zIndex:10,boxShadow:"0 10px 40px rgba(0,0,0,0.3)"},children:[n.jsxs(te,{to:`/listings/${_.id}/edit`,style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"6px",color:"var(--text-primary)",textDecoration:"none",fontSize:"13px"},children:[n.jsx(Is,{size:16})," Modifier"]}),_.status==="active"&&n.jsxs("a",{href:`/p/${_.id}`,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"6px",color:"var(--text-primary)",textDecoration:"none",fontSize:"13px"},children:[n.jsx(ot,{size:16})," Voir page publique"]}),_.status==="active"&&n.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(window.location.origin+"/p/"+_.id),h(null),alert("Lien copie dans le presse-papier")},style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"6px",color:"var(--text-primary)",background:"none",border:"none",width:"100%",cursor:"pointer",fontSize:"13px",textAlign:"left"},children:[n.jsx(Yr,{size:16})," Copier le lien"]}),n.jsxs("button",{onClick:()=>E(_.id,_.status),style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"6px",color:"var(--text-primary)",background:"none",border:"none",width:"100%",cursor:"pointer",fontSize:"13px",textAlign:"left"},children:[_.status==="active"?n.jsx(Pu,{size:16}):n.jsx(_n,{size:16}),_.status==="active"?"Mettre en pause":"Activer"]}),n.jsxs("button",{onClick:()=>{y(_),h(null)},style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"6px",color:"var(--gold)",background:"none",border:"none",width:"100%",cursor:"pointer",fontSize:"13px",textAlign:"left"},children:[n.jsx(cc,{size:16})," Publier sur plateformes"]}),n.jsxs("button",{onClick:()=>I(_.id),disabled:p===_.id,style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"6px",color:"var(--error)",background:"none",border:"none",width:"100%",cursor:"pointer",fontSize:"13px",textAlign:"left",opacity:p===_.id?.5:1},children:[n.jsx(Et,{size:16}),p===_.id?"Suppression...":"Supprimer"]})]})]}),n.jsxs("div",{style:{padding:"20px"},children:[n.jsx("p",{style:{fontSize:"20px",fontWeight:"700",color:"var(--gold)",marginBottom:"8px"},children:W(_.price,_.price_type)}),n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_.title||"Sans titre"}),_.location&&n.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"var(--text-muted)",marginBottom:"16px"},children:[n.jsx(it,{size:14}),_.location]}),n.jsxs("div",{style:{display:"flex",gap:"16px",paddingTop:"16px",borderTop:"1px solid var(--border-color)"},children:[_.beds&&n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"var(--text-muted)"},children:[n.jsx(Eu,{size:14})," ",_.beds]}),_.baths&&n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"var(--text-muted)"},children:[n.jsx(Ru,{size:14})," ",_.baths]}),_.area&&n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"var(--text-muted)"},children:[n.jsx(Vs,{size:14})," ",_.area," m"]})]})]})]},_.id)})}),P.length>0&&s==="list"&&n.jsx("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",overflow:"hidden"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"13px",color:"var(--text-muted)",fontWeight:"500"},children:"Bien"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"13px",color:"var(--text-muted)",fontWeight:"500"},children:"Prix"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"13px",color:"var(--text-muted)",fontWeight:"500"},children:"Statut"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"13px",color:"var(--text-muted)",fontWeight:"500"},children:"Type"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"right",fontSize:"13px",color:"var(--text-muted)",fontWeight:"500"},children:"Actions"})]})}),n.jsx("tbody",{children:P.map(_=>{var N,q,z,S,D;return n.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.jsx("td",{style:{padding:"16px 20px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"8px",background:(N=_.images)!=null&&N[0]?`url(${_.images[0]}) center/cover`:"rgba(212, 175, 55, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:!((q=_.images)!=null&&q[0])&&n.jsx(we,{size:20,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("p",{style:{fontWeight:"500",marginBottom:"4px"},children:_.title||"Sans titre"}),_.location&&n.jsxs("p",{style:{fontSize:"12px",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(it,{size:12})," ",_.location]})]})]})}),n.jsx("td",{style:{padding:"16px 20px",fontWeight:"600",color:"var(--gold)"},children:W(_.price,_.price_type)}),n.jsx("td",{style:{padding:"16px 20px"},children:n.jsx("span",{style:{padding:"6px 12px",background:(z=jr[_.status])==null?void 0:z.bg,color:(S=jr[_.status])==null?void 0:S.color,borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:(D=jr[_.status])==null?void 0:D.label})}),n.jsx("td",{style:{padding:"16px 20px",color:"var(--text-muted)",fontSize:"14px"},children:$w[_.property_type]||_.property_type}),n.jsx("td",{style:{padding:"16px 20px",textAlign:"right"},children:n.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[n.jsx(te,{to:`/listings/${_.id}/edit`,style:{width:"36px",height:"36px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)"},children:n.jsx(Is,{size:16})}),n.jsx("button",{onClick:()=>I(_.id),disabled:p===_.id,style:{width:"36px",height:"36px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--error)",cursor:"pointer",opacity:p===_.id?.5:1},children:n.jsx(Et,{size:16})})]})})]},_.id)})})]})}),u&&n.jsx("div",{onClick:()=>h(null),style:{position:"fixed",inset:0,zIndex:5}}),x&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[n.jsx("h3",{style:{fontSize:"20px",fontWeight:"600"},children:"Publier sur les plateformes"}),n.jsx("button",{onClick:O,style:{background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:n.jsx(Nt,{size:24})})]}),n.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"20px"},children:n.jsx("strong",{children:x.title})}),T?n.jsxs("div",{children:[n.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"16px"},children:"Resultats:"}),Object.entries(T).map(([_,N])=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"var(--bg-tertiary)",borderRadius:"8px",marginBottom:"8px"},children:[N.success?n.jsx(re,{size:18,style:{color:"#22c55e"}}):n.jsx(Nt,{size:18,style:{color:"var(--error)"}}),n.jsxs("div",{children:[n.jsx("p",{style:{fontWeight:"500",textTransform:"capitalize"},children:_}),n.jsx("p",{style:{fontSize:"12px",color:N.success?"#22c55e":"var(--error)"},children:N.message})]})]},_)),n.jsx("button",{onClick:O,style:{width:"100%",padding:"14px",background:"var(--gold)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontWeight:"600",cursor:"pointer",marginTop:"16px"},children:"Fermer"})]}):n.jsx("div",{children:v.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[n.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"16px"},children:"Aucune plateforme connectee"}),n.jsx(te,{to:"/accounts",onClick:O,style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",background:"var(--gold)",color:"var(--bg-primary)",borderRadius:"8px",textDecoration:"none",fontWeight:"500"},children:"Connecter des plateformes"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{marginBottom:"20px"},children:v.map(_=>n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:m.includes(_.platform)?"rgba(212, 175, 55, 0.1)":"var(--bg-tertiary)",border:`1px solid ${m.includes(_.platform)?"var(--gold)":"var(--border-color)"}`,borderRadius:"8px",marginBottom:"8px",cursor:"pointer"},children:[n.jsx("input",{type:"checkbox",checked:m.includes(_.platform),onChange:N=>{N.target.checked?b([...m,_.platform]):b(m.filter(q=>q!==_.platform))},style:{accentColor:"var(--gold)"}}),n.jsx("span",{style:{textTransform:"capitalize",fontWeight:"500"},children:_.platform})]},_.platform))}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx("button",{onClick:O,style:{flex:1,padding:"14px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",cursor:"pointer"},children:"Annuler"}),n.jsx("button",{onClick:A,disabled:j||m.length===0,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"14px",background:"var(--gold)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontWeight:"600",cursor:"pointer",opacity:j||m.length===0?.7:1},children:j?n.jsxs(n.Fragment,{children:[n.jsx(Ie,{size:18,style:{animation:"spin 1s linear infinite"}}),"Publication..."]}):n.jsxs(n.Fragment,{children:[n.jsx(cc,{size:18}),"Publier"]})})]})]})})]})}),n.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
      `})]})}const Ww=[{value:"apartment",label:"Appartement"},{value:"house",label:"Maison"},{value:"villa",label:"Villa"},{value:"land",label:"Terrain"},{value:"commercial",label:"Commercial"}],Uw=[{value:"sale",label:"Vente"},{value:"rent",label:"Location"},{value:"vacation",label:"Saisonnire"}],qw=["Piscine","Jardin","Terrasse","Balcon","Parking","Garage","Cave","Ascenseur","Gardien","Digicode","Interphone","Climatisation","Vue mer","Vue montagne","Proche plage","Proche commerces"],Vw=[{id:"seloger",name:"SeLoger",color:"#E31C5F"},{id:"leboncoin",name:"LeBonCoin",color:"#F56B2A"},{id:"facebook",name:"Facebook",color:"#1877F2"},{id:"instagram",name:"Instagram",color:"#E4405F"},{id:"airbnb",name:"Airbnb",color:"#FF5A5F"},{id:"iad",name:"IAD",color:"#00B388"}];function Ih(){const t=_i(),{id:e}=Rx(),r=!!e,i=w.useRef(null),[s,o]=w.useState(!1),[a,d]=w.useState(r),[l,c]=w.useState(null),[u,h]=w.useState(!1),[p,f]=w.useState(!1),[x,y]=w.useState({title:"",description:"",property_type:"apartment",price_type:"sale",price:"",location:"",beds:"",baths:"",area:"",features:[],platforms:["seloger","leboncoin"],status:"draft",images:[]});w.useEffect(()=>{if(r){async function k(){d(!0);const{data:P,error:I}=await Pw(e);I?c("Impossible de charger cette annonce"):P&&y({title:P.title||"",description:P.description||"",property_type:P.property_type||"apartment",price_type:P.price_type||"sale",price:P.price||"",location:P.location||"",beds:P.beds||"",baths:P.baths||"",area:P.area||"",features:P.features||[],platforms:P.platforms||["seloger","leboncoin"],status:P.status||"draft",images:P.images||[]}),d(!1)}k()}},[e,r]);const v=(k,P)=>{y(I=>({...I,[k]:P}))},g=k=>{y(P=>({...P,features:P.features.includes(k)?P.features.filter(I=>I!==k):[...P.features,k]}))},m=k=>{y(P=>({...P,platforms:P.platforms.includes(k)?P.platforms.filter(I=>I!==k):[...P.platforms,k]}))},b=async k=>{const P=Array.from(k.target.files);if(P.length){f(!0),c(null);try{const{data:{user:I}}=await G.auth.getUser();if(!I)throw new Error("Non authentifi");const E=[];for(const A of P){if(!A.type.startsWith("image/"))throw new Error("Seules les images sont acceptes");if(A.size>5*1024*1024)throw new Error("Image trop volumineuse (max 5MB)");const O=A.name.split(".").pop(),W=`${I.id}/${Date.now()}-${Math.random().toString(36).substr(2,9)}.${O}`,{data:_,error:N}=await G.storage.from("listings").upload(W,A,{cacheControl:"3600",upsert:!1});if(N)throw N;const{data:{publicUrl:q}}=G.storage.from("listings").getPublicUrl(W);E.push(q)}y(A=>({...A,images:[...A.images,...E]}))}catch(I){console.error("Upload error:",I),c(I.message||"Erreur lors de l'upload")}finally{f(!1),i.current&&(i.current.value="")}}},j=async(k,P)=>{y(I=>({...I,images:I.images.filter((E,A)=>A!==P)}));try{const E=new URL(k).pathname.match(/\/storage\/v1\/object\/public\/listings\/(.+)/);E&&await G.storage.from("listings").remove([E[1]])}catch(I){console.error("Error deleting from storage:",I)}},R=k=>{k!==0&&y(P=>{const I=[...P.images],[E]=I.splice(k,1);return I.unshift(E),{...P,images:I}})},T=async(k=!0)=>{o(!0),c(null);const P={...x,price:x.price?parseFloat(x.price):null,beds:x.beds?parseInt(x.beds):null,baths:x.baths?parseInt(x.baths):null,area:x.area?parseInt(x.area):null,status:k?"draft":"active"};let I;r?I=await py(e,P):I=await Aw(P),I.error?(c(I.error.message||"Une erreur est survenue"),o(!1)):(h(!0),setTimeout(()=>{t("/listings")},1500))};return a?n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",border:"3px solid var(--border-color)",borderTopColor:"var(--gold)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),n.jsx("p",{style:{color:"var(--text-muted)"},children:"Chargement..."})]}),n.jsx("style",{children:`
          @keyframes spin { to { transform: rotate(360deg); } }
        `})]}):u?n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",textAlign:"center"},children:[n.jsx("div",{style:{width:"64px",height:"64px",background:"rgba(34, 197, 94, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(re,{size:32,style:{color:"var(--success)"}})}),n.jsx("h2",{style:{fontSize:"24px"},children:r?"Annonce mise  jour":"Annonce cre"}),n.jsx("p",{style:{color:"var(--text-muted)"},children:"Redirection..."})]})}):n.jsxs("div",{style:{maxWidth:"900px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"32px"},children:[n.jsx("button",{onClick:()=>t("/listings"),style:{width:"40px",height:"40px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",cursor:"pointer"},children:n.jsx(Za,{size:20})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",marginBottom:"4px"},children:r?"Modifier l'annonce":"Nouvelle Annonce"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:r?"Mettez  jour les informations":"Crez et publiez votre bien"})]})]}),l&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",marginBottom:"24px",color:"var(--error)"},children:[n.jsx(Oe,{size:20}),n.jsx("span",{children:l})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Photos du bien"}),n.jsxs("div",{onClick:()=>{var k;return(k=i.current)==null?void 0:k.click()},style:{border:"2px dashed var(--border-color)",borderRadius:"12px",padding:"32px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",marginBottom:x.images.length>0?"16px":"0"},onDragOver:k=>{k.preventDefault(),k.currentTarget.style.borderColor="var(--gold)",k.currentTarget.style.background="rgba(212, 175, 55, 0.05)"},onDragLeave:k=>{k.currentTarget.style.borderColor="var(--border-color)",k.currentTarget.style.background="transparent"},onDrop:k=>{k.preventDefault(),k.currentTarget.style.borderColor="var(--border-color)",k.currentTarget.style.background="transparent";const P=k.dataTransfer.files;P.length&&b({target:{files:P}})},children:[n.jsx("input",{ref:i,type:"file",accept:"image/*",multiple:!0,onChange:b,style:{display:"none"}}),p?n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[n.jsx(Ie,{size:32,style:{color:"var(--gold)",animation:"spin 1s linear infinite"}}),n.jsx("p",{style:{color:"var(--text-muted)"},children:"Upload en cours..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{width:"56px",height:"56px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px"},children:n.jsx(hc,{size:24,style:{color:"var(--gold)"}})}),n.jsx("p",{style:{fontWeight:"500",marginBottom:"4px"},children:"Glissez-dposez vos images ici"}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:"ou cliquez pour slectionner (max 5MB par image)"})]})]}),x.images.length>0&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px"},children:x.images.map((k,P)=>n.jsxs("div",{style:{position:"relative",aspectRatio:"4/3",borderRadius:"10px",overflow:"hidden",border:P===0?"2px solid var(--gold)":"1px solid var(--border-color)"},children:[n.jsx("img",{src:k,alt:`Photo ${P+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}}),P===0&&n.jsx("div",{style:{position:"absolute",top:"8px",left:"8px",padding:"4px 8px",background:"var(--gold)",color:"var(--bg-primary)",borderRadius:"4px",fontSize:"10px",fontWeight:"600"},children:"PRINCIPALE"}),n.jsxs("div",{style:{position:"absolute",top:"8px",right:"8px",display:"flex",gap:"4px"},children:[P!==0&&n.jsx("button",{onClick:()=>R(P),title:"Dfinir comme principale",style:{width:"28px",height:"28px",background:"rgba(0,0,0,0.6)",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(li,{size:14})}),n.jsx("button",{onClick:()=>j(k,P),title:"Supprimer",style:{width:"28px",height:"28px",background:"rgba(239, 68, 68, 0.8)",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Nt,{size:14})})]})]},P))})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"20px"},children:"Informations gnrales"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Titre de l'annonce"}),n.jsx("input",{type:"text",value:x.title,onChange:k=>v("title",k.target.value),placeholder:"Ex: Magnifique appartement T3 vue mer",style:{width:"100%",padding:"12px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"15px"}})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Type de bien"}),n.jsx("select",{value:x.property_type,onChange:k=>v("property_type",k.target.value),style:{width:"100%",padding:"12px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"15px"},children:Ww.map(k=>n.jsx("option",{value:k.value,children:k.label},k.value))})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Type de transaction"}),n.jsx("select",{value:x.price_type,onChange:k=>v("price_type",k.target.value),style:{width:"100%",padding:"12px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"15px"},children:Uw.map(k=>n.jsx("option",{value:k.value,children:k.label},k.value))})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[n.jsxs("div",{children:[n.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:["Prix ",x.price_type==="rent"?"(/mois)":x.price_type==="vacation"?"(/nuit)":"()"]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(Tu,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"number",value:x.price,onChange:k=>v("price",k.target.value),placeholder:"350000",style:{width:"100%",padding:"12px 16px 12px 44px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"15px"}})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Localisation"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(it,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"text",value:x.location,onChange:k=>v("location",k.target.value),placeholder:"Fort-de-France, Martinique",style:{width:"100%",padding:"12px 16px 12px 44px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"15px"}})]})]})]})]})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"20px"},children:"Caractristiques"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"24px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Chambres"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(Eu,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"number",value:x.beds,onChange:k=>v("beds",k.target.value),placeholder:"3",style:{width:"100%",padding:"12px 16px 12px 44px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"15px"}})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Salles de bain"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(Ru,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"number",value:x.baths,onChange:k=>v("baths",k.target.value),placeholder:"2",style:{width:"100%",padding:"12px 16px 12px 44px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"15px"}})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Surface (m)"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(Vs,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"number",value:x.area,onChange:k=>v("area",k.target.value),placeholder:"85",style:{width:"100%",padding:"12px 16px 12px 44px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"15px"}})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"12px"},children:"quipements"}),n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:qw.map(k=>n.jsxs("button",{type:"button",onClick:()=>g(k),style:{padding:"8px 16px",background:x.features.includes(k)?"rgba(212, 175, 55, 0.1)":"var(--bg-tertiary)",border:`1px solid ${x.features.includes(k)?"var(--gold)":"var(--border-color)"}`,borderRadius:"8px",color:x.features.includes(k)?"var(--gold)":"var(--text-secondary)",fontSize:"13px",cursor:"pointer",transition:"all 0.2s ease"},children:[x.features.includes(k)&&n.jsx(re,{size:14,style:{marginRight:"6px"}}),k]},k))})]})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600"},children:"Description"}),n.jsxs("button",{type:"button",style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"rgba(168, 85, 247, 0.1)",border:"1px solid rgba(168, 85, 247, 0.2)",borderRadius:"8px",color:"#a855f7",fontSize:"13px",fontWeight:"500",cursor:"pointer"},onClick:()=>t("/ai-tools"),children:[n.jsx(He,{size:16}),"Gnrer avec l'IA"]})]}),n.jsx("textarea",{value:x.description,onChange:k=>v("description",k.target.value),placeholder:"Dcrivez votre bien en dtail...",rows:6,style:{width:"100%",padding:"14px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"15px",lineHeight:"1.6",resize:"vertical"}})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Plateformes de diffusion"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},children:Vw.map(k=>n.jsxs("button",{type:"button",onClick:()=>m(k.id),style:{padding:"16px",background:x.platforms.includes(k.id)?"rgba(212, 175, 55, 0.1)":"var(--bg-tertiary)",border:`1px solid ${x.platforms.includes(k.id)?"var(--gold)":"var(--border-color)"}`,borderRadius:"12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"all 0.2s ease"},children:[n.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:k.color}}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:x.platforms.includes(k.id)?"var(--gold)":"var(--text-secondary)"},children:k.name}),x.platforms.includes(k.id)&&n.jsx(re,{size:16,style:{color:"var(--gold)"}})]},k.id))})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",paddingTop:"8px"},children:[n.jsx("button",{type:"button",onClick:()=>t("/listings"),style:{padding:"14px 28px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-secondary)",fontSize:"15px",fontWeight:"500",cursor:"pointer"},children:"Annuler"}),n.jsx("button",{type:"button",onClick:()=>T(!0),disabled:s,style:{padding:"14px 28px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"15px",fontWeight:"500",cursor:"pointer",opacity:s?.7:1},children:s?"Enregistrement...":"Sauvegarder brouillon"}),n.jsx("button",{type:"button",onClick:()=>T(!1),disabled:s,style:{padding:"14px 28px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontSize:"15px",fontWeight:"600",cursor:"pointer",opacity:s?.7:1},children:s?"Publication...":"Publier l'annonce"})]})]}),n.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
      `})]})}const nr={new:{label:"Nouveau",color:"#22c55e",bg:"rgba(34, 197, 94, 0.1)"},contacted:{label:"Contact",color:"#3b82f6",bg:"rgba(59, 130, 246, 0.1)"},qualified:{label:"Qualifi",color:"#a855f7",bg:"rgba(168, 85, 247, 0.1)"},visited:{label:"Visite effectue",color:"#f59e0b",bg:"rgba(245, 158, 11, 0.1)"},lost:{label:"Perdu",color:"#ef4444",bg:"rgba(239, 68, 68, 0.1)"}},Hw={seloger:"SeLoger",leboncoin:"LeBonCoin",facebook:"Facebook",instagram:"Instagram",airbnb:"Airbnb",website:"Site web",referral:"Recommandation",other:"Autre"};function Gw(){const{leads:t,loading:e,error:r,refetch:i}=Lw(),[s,o]=w.useState(""),[a,d]=w.useState("all"),[l,c]=w.useState(null),[u,h]=w.useState(null),p=t.filter(v=>{var b,j,R;const g=!s||((b=v.name)==null?void 0:b.toLowerCase().includes(s.toLowerCase()))||((j=v.email)==null?void 0:j.toLowerCase().includes(s.toLowerCase()))||((R=v.phone)==null?void 0:R.includes(s)),m=a==="all"||v.status===a;return g&&m}),f=async(v,g)=>{h(v);const{error:m}=await Dw(v,{status:g});m?alert("Erreur: "+m):i(),h(null),c(null)},x=async v=>{if(!window.confirm("tes-vous sr de vouloir supprimer ce lead ?"))return;const{error:g}=await Nw(v);g?alert("Erreur: "+g):i(),c(null)},y=v=>v?new Date(v).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"";return e?n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",border:"3px solid var(--border-color)",borderTopColor:"var(--gold)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),n.jsx("p",{style:{color:"var(--text-muted)"},children:"Chargement des leads..."})]}),n.jsx("style",{children:`
          @keyframes spin { to { transform: rotate(360deg); } }
        `})]}):n.jsxs("div",{children:[n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",marginBottom:"8px"},children:"Leads"}),n.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"15px"},children:[t.length," contact",t.length!==1?"s":""," au total"]})]}),r&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",marginBottom:"24px",color:"var(--error)"},children:[n.jsx(Oe,{size:20}),n.jsxs("span",{children:["Erreur: ",r]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"16px",marginBottom:"24px"},children:Object.entries(nr).map(([v,g])=>{const m=t.filter(b=>b.status===v).length;return n.jsxs("div",{onClick:()=>d(a===v?"all":v),style:{padding:"16px",background:a===v?g.bg:"var(--bg-card)",border:`1px solid ${a===v?g.color:"var(--border-color)"}`,borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease"},children:[n.jsx("p",{style:{fontSize:"24px",fontWeight:"700",color:g.color,marginBottom:"4px"},children:m}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:g.label})]},v)})}),n.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"24px"},children:[n.jsxs("div",{style:{flex:1,position:"relative"},children:[n.jsx(En,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"text",placeholder:"Rechercher par nom, email ou tlphone...",value:s,onChange:v=>o(v.target.value),style:{width:"100%",padding:"12px 12px 12px 44px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("select",{value:a,onChange:v=>d(v.target.value),style:{padding:"12px 16px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px",cursor:"pointer"},children:[n.jsx("option",{value:"all",children:"Tous les statuts"}),Object.entries(nr).map(([v,g])=>n.jsx("option",{value:v,children:g.label},v))]})]}),p.length===0&&n.jsxs("div",{style:{padding:"60px 40px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",textAlign:"center"},children:[n.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(34, 197, 94, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},children:n.jsx(xt,{size:36,style:{color:"#22c55e"}})}),n.jsx("h3",{style:{fontSize:"20px",marginBottom:"12px"},children:t.length===0?"Aucun lead":"Aucun rsultat"}),n.jsx("p",{style:{color:"var(--text-muted)",maxWidth:"400px",margin:"0 auto"},children:t.length===0?"Les leads de vos annonces apparatront ici.":"Essayez de modifier vos filtres de recherche."})]}),p.length>0&&n.jsx("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",overflow:"hidden"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"13px",color:"var(--text-muted)",fontWeight:"500"},children:"Contact"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"13px",color:"var(--text-muted)",fontWeight:"500"},children:"Bien"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"13px",color:"var(--text-muted)",fontWeight:"500"},children:"Source"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"13px",color:"var(--text-muted)",fontWeight:"500"},children:"Statut"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"13px",color:"var(--text-muted)",fontWeight:"500"},children:"Date"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"right",fontSize:"13px",color:"var(--text-muted)",fontWeight:"500"},children:"Actions"})]})}),n.jsx("tbody",{children:p.map(v=>{var g,m,b,j,R,T;return n.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.jsx("td",{style:{padding:"16px 20px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"10px",background:((g=nr[v.status])==null?void 0:g.bg)||"var(--bg-tertiary)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"16px",color:((m=nr[v.status])==null?void 0:m.color)||"var(--text-muted)"},children:(v.name||"U")[0].toUpperCase()}),n.jsxs("div",{children:[n.jsx("p",{style:{fontWeight:"500",marginBottom:"4px"},children:v.name||"Inconnu"}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[v.email&&n.jsxs("a",{href:`mailto:${v.email}`,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"var(--text-muted)"},children:[n.jsx(Rt,{size:12})," ",v.email]}),v.phone&&n.jsxs("a",{href:`tel:${v.phone}`,style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"var(--text-muted)"},children:[n.jsx(Ps,{size:12})," ",v.phone]})]})]})]})}),n.jsx("td",{style:{padding:"16px 20px"},children:v.listing?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(we,{size:14,style:{color:"var(--text-muted)"}}),n.jsx("span",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:v.listing.title||"Annonce"})]}):n.jsx("span",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"-"})}),n.jsx("td",{style:{padding:"16px 20px"},children:n.jsx("span",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:Hw[v.source]||v.source||"-"})}),n.jsxs("td",{style:{padding:"16px 20px",position:"relative"},children:[n.jsxs("button",{onClick:()=>c(l===`status-${v.id}`?null:`status-${v.id}`),disabled:u===v.id,style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",background:(b=nr[v.status])==null?void 0:b.bg,border:"none",borderRadius:"6px",cursor:"pointer",opacity:u===v.id?.5:1},children:[n.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:(j=nr[v.status])==null?void 0:j.color},children:(R=nr[v.status])==null?void 0:R.label}),n.jsx(sy,{size:14,style:{color:(T=nr[v.status])==null?void 0:T.color}})]}),l===`status-${v.id}`&&n.jsx("div",{style:{position:"absolute",top:"100%",left:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px",padding:"8px",minWidth:"160px",zIndex:10,boxShadow:"0 10px 40px rgba(0,0,0,0.3)"},children:Object.entries(nr).map(([k,P])=>n.jsxs("button",{onClick:()=>f(v.id,k),style:{display:"flex",alignItems:"center",gap:"10px",width:"100%",padding:"10px 12px",background:v.status===k?P.bg:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",textAlign:"left"},children:[n.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:P.color}}),n.jsx("span",{style:{fontSize:"13px",color:"var(--text-primary)"},children:P.label})]},k))})]}),n.jsx("td",{style:{padding:"16px 20px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"var(--text-muted)"},children:[n.jsx(ct,{size:14}),y(v.created_at)]})}),n.jsx("td",{style:{padding:"16px 20px",textAlign:"right"},children:n.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[v.message&&n.jsx("button",{title:v.message,style:{width:"36px",height:"36px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",cursor:"pointer"},children:n.jsx(kn,{size:16})}),n.jsx("button",{onClick:()=>x(v.id),style:{width:"36px",height:"36px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--error)",cursor:"pointer"},children:n.jsx(Et,{size:16})})]})})]},v.id)})})]})}),l&&n.jsx("div",{onClick:()=>c(null),style:{position:"fixed",inset:0,zIndex:5}})]})}const Ml=[{id:"facebook",name:"Facebook",color:"#1877F2",icon:cc,description:"Publiez sur votre Page Facebook",canAutoConnect:!0,oauthUrl:null},{id:"instagram",name:"Instagram",color:"#E4405F",icon:Bj,description:"Publication via Facebook Business",canAutoConnect:!0,requiresFacebook:!0},{id:"seloger",name:"SeLoger",color:"#E31C5F",icon:tr,description:"Portail immobilier - Connexion manuelle",canAutoConnect:!1,manualUrl:"https://www.seloger.com/pro"},{id:"leboncoin",name:"LeBonCoin",color:"#F56B2A",icon:vi,description:"Petites annonces - Connexion manuelle",canAutoConnect:!1,manualUrl:"https://www.leboncoin.fr/deposer-une-annonce"},{id:"airbnb",name:"Airbnb",color:"#FF5A5F",icon:tr,description:"Location saisonnire - API Partenaire",canAutoConnect:!1,manualUrl:"https://www.airbnb.com/host"},{id:"booking",name:"Booking.com",color:"#003580",icon:ct,description:"Location saisonnire - Programme Partenaire",canAutoConnect:!1,manualUrl:"https://join.booking.com"}];function Kw(){const[t,e]=w.useState({}),[r,i]=w.useState({}),[s,o]=w.useState(!0),[a,d]=w.useState(null),[l,c]=w.useState(null),[u,h]=w.useState(!1);w.useEffect(()=>{p();const j=new URLSearchParams(window.location.search),R=j.get("code"),T=j.get("state");R&&T==="facebook_oauth"&&(x(R),window.history.replaceState({},"","/accounts"))},[]);async function p(){o(!0),c(null);try{const{data:j,error:R}=await G.from("platform_connections").select("*");if(R)throw R;const T={};(j||[]).forEach(E=>{T[E.platform]=E}),e(T);const{data:k,error:P}=await G.from("listings").select("platforms, status");if(P)throw P;const I={};(k||[]).forEach(E=>{E.platforms&&E.status==="active"&&E.platforms.forEach(A=>{I[A]=(I[A]||0)+1})}),i(I)}catch(j){console.error("Error fetching data:",j),c(j.message)}finally{o(!1)}}function f(){{h(!0);return}}async function x(j){var R;d("facebook");try{const{data:T,error:k}=await G.functions.invoke("facebook-oauth",{body:{code:j,redirectUri:window.location.origin+"/accounts"}});if(k)throw k;if(T.error)throw new Error(T.error);const{data:{user:P}}=await G.auth.getUser();await G.from("platform_connections").upsert({user_id:P.id,platform:"facebook",status:"connected",access_token:T.access_token,metadata:{user_id:T.user_id,pages:T.pages},updated_at:new Date().toISOString()},{onConflict:"user_id,platform"}),(R=T.pages)!=null&&R.some(I=>I.instagram_business_account)&&await G.from("platform_connections").upsert({user_id:P.id,platform:"instagram",status:"connected",metadata:{via_facebook:!0},updated_at:new Date().toISOString()},{onConflict:"user_id,platform"}),await p()}catch(T){console.error("Facebook OAuth error:",T),c("Erreur de connexion Facebook: "+T.message)}finally{d(null)}}async function y(j){d(j);try{const{data:{user:R}}=await G.auth.getUser();await G.from("platform_connections").update({status:"disconnected",access_token:null,metadata:null,updated_at:new Date().toISOString()}).eq("user_id",R.id).eq("platform",j),j==="facebook"&&await G.from("platform_connections").update({status:"disconnected",metadata:null,updated_at:new Date().toISOString()}).eq("user_id",R.id).eq("platform","instagram"),await p()}catch(R){console.error("Error disconnecting:",R),c(R.message)}finally{d(null)}}async function v(j){d(j);const R=t[j],T=(R==null?void 0:R.status)==="connected"?"disconnected":"connected";try{const{data:{user:k}}=await G.auth.getUser();await G.from("platform_connections").upsert({user_id:k.id,platform:j,status:T,updated_at:new Date().toISOString()},{onConflict:"user_id,platform"}),e(P=>({...P,[j]:{...P[j],platform:j,status:T}}))}catch(k){console.error("Error updating connection:",k),c(k.message)}finally{d(null)}}if(s)return n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",border:"3px solid var(--border-color)",borderTopColor:"var(--gold)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),n.jsx("p",{style:{color:"var(--text-muted)"},children:"Chargement..."})]}),n.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});const g=Object.values(t).filter(j=>j.status==="connected").length,m=Ml.filter(j=>j.canAutoConnect),b=Ml.filter(j=>!j.canAutoConnect);return n.jsxs("div",{children:[n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",marginBottom:"8px"},children:"Plateformes"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"15px"},children:"Connectez vos comptes pour publier automatiquement vos annonces"})]}),l&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",marginBottom:"24px",color:"var(--error)"},children:[n.jsx(Oe,{size:20}),n.jsx("span",{children:l}),n.jsx("button",{onClick:()=>c(null),style:{marginLeft:"auto",background:"none",border:"none",color:"inherit",cursor:"pointer"},children:n.jsx(Nt,{size:16})})]}),u&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%"},children:[n.jsx("h3",{style:{fontSize:"18px",marginBottom:"16px"},children:"Configuration Facebook requise"}),n.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"16px",lineHeight:"1.6"},children:"Pour connecter Facebook, vous devez:"}),n.jsxs("ol",{style:{color:"var(--text-secondary)",marginBottom:"24px",paddingLeft:"20px",lineHeight:"1.8"},children:[n.jsxs("li",{children:["Creer une app sur ",n.jsx("a",{href:"https://developers.facebook.com",target:"_blank",style:{color:"var(--gold)"},children:"developers.facebook.com"})]}),n.jsx("li",{children:'Ajouter "Facebook Login" comme produit'}),n.jsx("li",{children:"Configurer les permissions: pages_manage_posts, instagram_content_publish"}),n.jsxs("li",{children:["Ajouter votre App ID dans le fichier .env: ",n.jsx("code",{style:{background:"var(--bg-tertiary)",padding:"2px 6px",borderRadius:"4px"},children:"VITE_FACEBOOK_APP_ID=xxx"})]}),n.jsx("li",{children:"Deployer l'Edge Function facebook-oauth"})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[n.jsx("button",{onClick:()=>h(!1),style:{padding:"12px 24px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",cursor:"pointer"},children:"Fermer"}),n.jsxs("a",{href:"https://developers.facebook.com/apps/create/",target:"_blank",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"12px 24px",background:"#1877F2",border:"none",borderRadius:"8px",color:"white",textDecoration:"none",fontWeight:"500"},children:["Creer une App Facebook",n.jsx(ot,{size:16})]})]})]})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"32px"},children:[n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[n.jsx("p",{style:{fontSize:"32px",fontWeight:"700",color:"var(--gold)",marginBottom:"4px"},children:g}),n.jsx("p",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"Plateformes connectees"})]}),n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[n.jsx("p",{style:{fontSize:"32px",fontWeight:"700",color:"#22c55e",marginBottom:"4px"},children:Object.values(r).reduce((j,R)=>j+R,0)}),n.jsx("p",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"Publications actives"})]}),n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[n.jsx("p",{style:{fontSize:"32px",fontWeight:"700",color:"#3b82f6",marginBottom:"4px"},children:Ml.length}),n.jsx("p",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"Plateformes disponibles"})]})]}),n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[n.jsx(Sn,{size:20,style:{color:"var(--gold)"}}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:"600"},children:"Connexion automatique"})]}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px",marginBottom:"20px"},children:"Ces plateformes supportent la publication automatique via API"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:m.map(j=>{var I,E;const R=t[j.id],T=(R==null?void 0:R.status)==="connected",k=j.icon,P=r[j.id]||0;return n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:`1px solid ${T?j.color:"var(--border-color)"}`,borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:`${j.color}20`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(k,{size:24,style:{color:j.color}})}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"2px"},children:j.name}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:j.description})]})]}),n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:T?"rgba(34, 197, 94, 0.1)":"rgba(255, 255, 255, 0.05)",color:T?"#22c55e":"var(--text-muted)",borderRadius:"8px",fontSize:"12px",fontWeight:"600"},children:[T?n.jsx(re,{size:14}):n.jsx(Nt,{size:14}),T?"Connecte":"Non connecte"]})]}),T&&((I=R==null?void 0:R.metadata)==null?void 0:I.pages)&&n.jsxs("div",{style:{padding:"12px",background:"var(--bg-tertiary)",borderRadius:"8px",marginBottom:"16px"},children:[n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"8px"},children:"Pages connectees:"}),R.metadata.pages.map(A=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"13px"},children:[n.jsx(re,{size:14,style:{color:"#22c55e"}}),n.jsx("span",{children:A.name})]},A.id))]}),T&&P>0&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",background:"var(--bg-tertiary)",borderRadius:"8px",marginBottom:"16px"},children:[n.jsx(we,{size:16,style:{color:"var(--text-muted)"}}),n.jsxs("span",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:[P," annonce",P>1?"s":""," active",P>1?"s":""]})]}),j.requiresFacebook&&!((E=t.facebook)!=null&&E.status)==="connected"?n.jsx("div",{style:{padding:"12px",background:"rgba(245, 158, 11, 0.1)",borderRadius:"8px",fontSize:"13px",color:"#f59e0b"},children:"Connectez d'abord Facebook pour activer Instagram"}):n.jsx("button",{onClick:()=>{T?y(j.id):(j.id==="facebook"||j.id==="instagram")&&f()},disabled:a===j.id,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px",background:T?"rgba(239, 68, 68, 0.1)":j.color,border:`1px solid ${T?"rgba(239, 68, 68, 0.2)":j.color}`,borderRadius:"10px",color:T?"var(--error)":"white",fontSize:"14px",fontWeight:"500",cursor:"pointer",opacity:a===j.id?.7:1},children:a===j.id?n.jsx(Ur,{size:16,style:{animation:"spin 1s linear infinite"}}):T?n.jsxs(n.Fragment,{children:[n.jsx(Nt,{size:16}),"Deconnecter"]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{size:16}),"Connecter avec ",j.name]})})]},j.id)})})]}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[n.jsx(Ts,{size:20,style:{color:"var(--text-muted)"}}),n.jsx("h2",{style:{fontSize:"18px",fontWeight:"600"},children:"Portails immobiliers"})]}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px",marginBottom:"20px"},children:"Ces plateformes necessitent une publication manuelle ou un partenariat commercial"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:b.map(j=>{const R=t[j.id],T=(R==null?void 0:R.status)==="connected",k=j.icon,P=r[j.id]||0;return n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:`1px solid ${T?j.color:"var(--border-color)"}`,borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:`${j.color}20`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(k,{size:24,style:{color:j.color}})}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"2px"},children:j.name}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:j.description})]})]}),n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:T?"rgba(34, 197, 94, 0.1)":"rgba(255, 255, 255, 0.05)",color:T?"#22c55e":"var(--text-muted)",borderRadius:"8px",fontSize:"12px",fontWeight:"600"},children:[T?n.jsx(re,{size:14}):n.jsx(Nt,{size:14}),T?"Actif":"Inactif"]})]}),T&&P>0&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",background:"var(--bg-tertiary)",borderRadius:"8px",marginBottom:"16px"},children:[n.jsx(we,{size:16,style:{color:"var(--text-muted)"}}),n.jsxs("span",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:[P," annonce",P>1?"s":""," active",P>1?"s":""]})]}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{onClick:()=>v(j.id),disabled:a===j.id,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px",background:T?"rgba(239, 68, 68, 0.1)":`${j.color}20`,border:`1px solid ${T?"rgba(239, 68, 68, 0.2)":j.color}`,borderRadius:"10px",color:T?"var(--error)":j.color,fontSize:"14px",fontWeight:"500",cursor:"pointer",opacity:a===j.id?.7:1},children:a===j.id?n.jsx(Ur,{size:16,style:{animation:"spin 1s linear infinite"}}):T?n.jsxs(n.Fragment,{children:[n.jsx(Nt,{size:16}),"Desactiver"]}):n.jsxs(n.Fragment,{children:[n.jsx(re,{size:16}),"Marquer actif"]})}),n.jsx("a",{href:j.manualUrl,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"44px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-muted)",textDecoration:"none"},title:"Ouvrir la plateforme",children:n.jsx(ot,{size:16})})]})]},j.id)})})]}),n.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})}const Jw=[{id:"starter",name:"Starter",price:49,features:["5 annonces actives","2 plateformes","Support email"]},{id:"pro",name:"Pro",price:99,popular:!0,features:["25 annonces actives","Toutes les plateformes","IA illimitee","Support prioritaire"]},{id:"agence",name:"Agence",price:249,features:["Annonces illimitees","Multi-utilisateurs","API access","Account manager"]}];function Qw(){const{user:t,updatePassword:e}=Qr(),[r,i]=w.useState("profile"),[s,o]=w.useState(!1),[a,d]=w.useState(null),[l,c]=w.useState(null),[u,h]=w.useState({full_name:"",email:"",phone:"",company_name:"",website:""}),[p,f]=w.useState({status:null,plan:null,current_period_end:null}),[x,y]=w.useState({new:"",confirm:""}),[v,g]=w.useState(!1),[m,b]=w.useState(null),[j,R]=w.useState(!1);w.useEffect(()=>{async function O(){const{data:_,error:N}=await G.from("profiles").select("*").eq("id",t.id).single();_&&(h({full_name:_.full_name||"",email:t.email||"",phone:_.phone||"",company_name:_.company_name||"",website:_.website||""}),f({status:_.subscription_status,plan:_.subscription_plan,current_period_end:_.subscription_current_period_end}))}t&&O();const W=new URLSearchParams(window.location.search);W.get("success")==="true"?(d("Abonnement active avec succes!"),i("billing"),window.history.replaceState({},"","/settings"),setTimeout(O,2e3)):W.get("canceled")==="true"&&(c("Paiement annule"),i("billing"),window.history.replaceState({},"","/settings"))},[t]);const T=async()=>{o(!0),c(null),d(null);const{error:O}=await G.from("profiles").update({full_name:u.full_name,phone:u.phone,company_name:u.company_name,website:u.website,updated_at:new Date().toISOString()}).eq("id",t.id);O?c(O.message):d("Profil mis a jour"),o(!1)},k=async()=>{if(x.new!==x.confirm){c("Les mots de passe ne correspondent pas");return}if(x.new.length<6){c("Le mot de passe doit contenir au moins 6 caracteres");return}o(!0),c(null),d(null);const{error:O}=await e(x.new);O?c(O.message):(d("Mot de passe mis a jour"),y({new:"",confirm:""})),o(!1)},P=async O=>{b(O),c(null);try{const{data:W,error:_}=await G.functions.invoke("create-checkout",{body:{plan:O}});if(_)throw _;if(W.error)throw new Error(W.error);window.location.href=W.url}catch(W){console.error("Checkout error:",W),c(W.message||"Erreur lors du paiement"),b(null)}},I=async()=>{R(!0),c(null);try{const{data:O,error:W}=await G.functions.invoke("create-portal",{});if(W)throw W;if(O.error)throw new Error(O.error);window.location.href=O.url}catch(O){console.error("Portal error:",O),c(O.message||"Erreur lors de l'acces au portail"),R(!1)}},E=[{id:"profile",label:"Profil",icon:$r},{id:"security",label:"Securite",icon:Ts},{id:"notifications",label:"Notifications",icon:Dj},{id:"billing",label:"Facturation",icon:qj}],A=O=>O?new Date(O).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"";return n.jsxs("div",{style:{maxWidth:"900px"},children:[n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600",marginBottom:"8px"},children:"Parametres"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"15px"},children:"Gerez votre compte et vos preferences"})]}),a&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)",borderRadius:"12px",marginBottom:"24px",color:"#22c55e"},children:[n.jsx(re,{size:20}),n.jsx("span",{children:a})]}),l&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px",marginBottom:"24px",color:"var(--error)"},children:[n.jsx(Oe,{size:20}),n.jsx("span",{children:l})]}),n.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",borderBottom:"1px solid var(--border-color)",paddingBottom:"8px"},children:E.map(O=>n.jsxs("button",{onClick:()=>{i(O.id),d(null),c(null)},style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:r===O.id?"rgba(212, 175, 55, 0.1)":"transparent",border:"none",borderRadius:"8px",color:r===O.id?"var(--gold)":"var(--text-muted)",fontSize:"14px",fontWeight:r===O.id?"600":"500",cursor:"pointer"},children:[n.jsx(O.icon,{size:18}),O.label]},O.id))}),r==="profile"&&n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"24px"},children:"Informations personnelles"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Nom complet"}),n.jsx("input",{type:"text",value:u.full_name,onChange:O=>h({...u,full_name:O.target.value}),style:{width:"100%",padding:"12px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Email"}),n.jsx("input",{type:"email",value:u.email,disabled:!0,style:{width:"100%",padding:"12px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-muted)",fontSize:"14px",cursor:"not-allowed"}})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Telephone"}),n.jsx("input",{type:"tel",value:u.phone,onChange:O=>h({...u,phone:O.target.value}),placeholder:"+590 690 00 00 00",style:{width:"100%",padding:"12px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Societe"}),n.jsx("input",{type:"text",value:u.company_name,onChange:O=>h({...u,company_name:O.target.value}),placeholder:"Nom de votre agence",style:{width:"100%",padding:"12px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px"}})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Site web"}),n.jsx("input",{type:"url",value:u.website,onChange:O=>h({...u,website:O.target.value}),placeholder:"https://www.monagence.com",style:{width:"100%",padding:"12px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("button",{onClick:T,disabled:s,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"14px 24px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:"pointer",alignSelf:"flex-start",opacity:s?.7:1},children:[s?n.jsx(Ie,{size:18,style:{animation:"spin 1s linear infinite"}}):n.jsx(dy,{size:18}),s?"Enregistrement...":"Enregistrer"]})]})]}),r==="security"&&n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"24px"},children:"Changer le mot de passe"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",maxWidth:"400px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Nouveau mot de passe"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("input",{type:v?"text":"password",value:x.new,onChange:O=>y({...x,new:O.target.value}),style:{width:"100%",padding:"12px 44px 12px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px"}}),n.jsx("button",{type:"button",onClick:()=>g(!v),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:v?n.jsx(Iu,{size:18}):n.jsx(Yr,{size:18})})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Confirmer le mot de passe"}),n.jsx("input",{type:v?"text":"password",value:x.confirm,onChange:O=>y({...x,confirm:O.target.value}),style:{width:"100%",padding:"12px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("button",{onClick:k,disabled:s||!x.new||!x.confirm,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"14px 24px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:"pointer",opacity:s||!x.new||!x.confirm?.7:1},children:[s?n.jsx(Ie,{size:18,style:{animation:"spin 1s linear infinite"}}):n.jsx(Ts,{size:18}),s?"Mise a jour...":"Mettre a jour"]})]})]}),r==="notifications"&&n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"24px"},children:"Preferences de notification"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[{label:"Nouveau lead",desc:"Recevez une notification quand un prospect vous contacte"},{label:"Rapport hebdomadaire",desc:"Resume de votre activite chaque semaine"},{label:"Mises a jour produit",desc:"Nouvelles fonctionnalites et ameliorations"}].map((O,W)=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",background:"var(--bg-tertiary)",borderRadius:"10px"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{fontWeight:"500",marginBottom:"4px"},children:O.label}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:O.desc})]}),n.jsxs("label",{style:{position:"relative",width:"48px",height:"26px"},children:[n.jsx("input",{type:"checkbox",defaultChecked:W===0,style:{display:"none"}}),n.jsx("span",{style:{position:"absolute",inset:0,background:W===0?"var(--gold)":"var(--border-color)",borderRadius:"13px",cursor:"pointer",transition:"all 0.2s"},children:n.jsx("span",{style:{position:"absolute",width:"20px",height:"20px",background:"white",borderRadius:"50%",top:"3px",left:W===0?"25px":"3px",transition:"all 0.2s"}})})]})]},W))})]}),r==="billing"&&n.jsxs("div",{children:[n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",marginBottom:"24px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"20px"},children:"Votre abonnement"}),p.status==="active"?n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",padding:"20px",background:"rgba(212, 175, 55, 0.1)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"12px",marginBottom:"20px"},children:[n.jsx("div",{style:{width:"56px",height:"56px",background:"var(--gold)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(oy,{size:28,style:{color:"var(--bg-primary)"}})}),n.jsxs("div",{children:[n.jsxs("p",{style:{fontSize:"20px",fontWeight:"700",textTransform:"capitalize"},children:["Plan ",p.plan]}),n.jsxs("p",{style:{fontSize:"14px",color:"var(--text-muted)"},children:["Renouvellement le ",A(p.current_period_end)]})]})]}),n.jsxs("button",{onClick:I,disabled:j,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:[j?n.jsx(Ie,{size:18,style:{animation:"spin 1s linear infinite"}}):n.jsx(ot,{size:18}),"Gerer mon abonnement"]})]}):n.jsxs("div",{style:{padding:"20px",background:"var(--bg-tertiary)",borderRadius:"12px",textAlign:"center"},children:[n.jsx(xn,{size:32,style:{color:"var(--text-muted)",marginBottom:"12px"}}),n.jsx("p",{style:{fontWeight:"500",marginBottom:"4px"},children:"Aucun abonnement actif"}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:"Choisissez un plan ci-dessous pour debloquer toutes les fonctionnalites"})]})]}),n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:p.status==="active"?"Changer de plan":"Choisir un plan"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:Jw.map(O=>{const W=p.plan===O.id;return n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:`2px solid ${O.popular?"var(--gold)":W?"#22c55e":"var(--border-color)"}`,borderRadius:"16px",position:"relative"},children:[O.popular&&n.jsx("div",{style:{position:"absolute",top:"-12px",left:"50%",transform:"translateX(-50%)",padding:"4px 16px",background:"var(--gold)",color:"var(--bg-primary)",borderRadius:"12px",fontSize:"11px",fontWeight:"700"},children:"POPULAIRE"}),W&&n.jsx("div",{style:{position:"absolute",top:"-12px",left:"50%",transform:"translateX(-50%)",padding:"4px 16px",background:"#22c55e",color:"white",borderRadius:"12px",fontSize:"11px",fontWeight:"700"},children:"ACTUEL"}),n.jsx("h4",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:O.name}),n.jsxs("p",{style:{marginBottom:"16px"},children:[n.jsx("span",{style:{fontSize:"32px",fontWeight:"700"},children:O.price}),n.jsx("span",{style:{fontSize:"14px",color:"var(--text-muted)"},children:" EUR/mois"})]}),n.jsx("ul",{style:{marginBottom:"20px"},children:O.features.map((_,N)=>n.jsxs("li",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",color:"var(--text-secondary)",marginBottom:"8px"},children:[n.jsx(re,{size:16,style:{color:"var(--gold)"}}),_]},N))}),n.jsx("button",{onClick:()=>P(O.id),disabled:W||m===O.id,style:{width:"100%",padding:"12px",background:W?"var(--bg-tertiary)":O.popular?"var(--gold)":"var(--bg-tertiary)",border:W?"1px solid var(--border-color)":"none",borderRadius:"10px",color:W?"var(--text-muted)":O.popular?"var(--bg-primary)":"var(--text-primary)",fontWeight:"600",fontSize:"14px",cursor:W?"default":"pointer",opacity:m===O.id?.7:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:m===O.id?n.jsxs(n.Fragment,{children:[n.jsx(Ie,{size:16,style:{animation:"spin 1s linear infinite"}}),"Chargement..."]}):W?"Plan actuel":"Choisir ce plan"})]},O.id)})})]}),n.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
      `})]})}const Yw=[{value:"apartment",label:"Appartement"},{value:"house",label:"Maison"},{value:"villa",label:"Villa"},{value:"land",label:"Terrain"},{value:"commercial",label:"Commercial"}],Xw=[{value:"sale",label:"Vente"},{value:"rent",label:"Location"},{value:"vacation",label:"Saisonnire"}],Zw=[{value:"professional",label:"Professionnel",desc:"Factuel et informatif"},{value:"luxury",label:"Luxe",desc:"Prestigieux et raffin"},{value:"friendly",label:"Chaleureux",desc:"Accueillant et convivial"}],eS=["Piscine","Jardin","Terrasse","Balcon","Parking","Garage","Vue mer","Vue montagne","Proche plage","Climatisation"];function tS(){const[t,e]=w.useState({propertyType:"apartment",priceType:"sale",price:"",location:"",beds:"",baths:"",area:"",features:[],tone:"professional"}),[r,i]=w.useState(""),[s,o]=w.useState(!1),[a,d]=w.useState(null),[l,c]=w.useState(!1),u=(y,v)=>{e(g=>({...g,[y]:v}))},h=y=>{e(v=>({...v,features:v.features.includes(y)?v.features.filter(g=>g!==y):[...v.features,y]}))},p=async()=>{o(!0),d(null),i("");try{const{data:y,error:v}=await G.functions.invoke("generate-description",{body:t});if(v)throw v;if(y.error)throw new Error(y.error);i(y.description)}catch(y){console.error("Generation error:",y),d(y.message||"Erreur lors de la gnration")}finally{o(!1)}},f=()=>{navigator.clipboard.writeText(r),c(!0),setTimeout(()=>c(!1),2e3)},x=()=>{p()};return n.jsxs("div",{children:[n.jsx("div",{style:{marginBottom:"32px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(168, 85, 247, 0.2) 0%, rgba(168, 85, 247, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(He,{size:24,style:{color:"#a855f7"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Outils IA"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"15px"},children:"Gnrez des descriptions professionnelles avec Claude"})]})]})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"20px"},children:"Dtails du bien"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px",color:"var(--text-muted)"},children:"Type de bien"}),n.jsx("select",{value:t.propertyType,onChange:y=>u("propertyType",y.target.value),style:{width:"100%",padding:"10px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"},children:Yw.map(y=>n.jsx("option",{value:y.value,children:y.label},y.value))})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px",color:"var(--text-muted)"},children:"Transaction"}),n.jsx("select",{value:t.priceType,onChange:y=>u("priceType",y.target.value),style:{width:"100%",padding:"10px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"},children:Xw.map(y=>n.jsx("option",{value:y.value,children:y.label},y.value))})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px",color:"var(--text-muted)"},children:"Prix ()"}),n.jsx("input",{type:"number",value:t.price,onChange:y=>u("price",y.target.value),placeholder:"350000",style:{width:"100%",padding:"10px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px",color:"var(--text-muted)"},children:"Localisation"}),n.jsx("input",{type:"text",value:t.location,onChange:y=>u("location",y.target.value),placeholder:"Fort-de-France, Martinique",style:{width:"100%",padding:"10px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px",color:"var(--text-muted)"},children:"Chambres"}),n.jsx("input",{type:"number",value:t.beds,onChange:y=>u("beds",y.target.value),placeholder:"3",style:{width:"100%",padding:"10px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px",color:"var(--text-muted)"},children:"SdB"}),n.jsx("input",{type:"number",value:t.baths,onChange:y=>u("baths",y.target.value),placeholder:"2",style:{width:"100%",padding:"10px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px",color:"var(--text-muted)"},children:"Surface (m)"}),n.jsx("input",{type:"number",value:t.area,onChange:y=>u("area",y.target.value),placeholder:"85",style:{width:"100%",padding:"10px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"8px",color:"var(--text-muted)"},children:"quipements"}),n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:eS.map(y=>n.jsx("button",{type:"button",onClick:()=>h(y),style:{padding:"6px 12px",background:t.features.includes(y)?"rgba(168, 85, 247, 0.1)":"var(--bg-tertiary)",border:`1px solid ${t.features.includes(y)?"#a855f7":"var(--border-color)"}`,borderRadius:"6px",color:t.features.includes(y)?"#a855f7":"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:y},y))})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"8px",color:"var(--text-muted)"},children:"Ton de la description"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"},children:Zw.map(y=>n.jsxs("button",{type:"button",onClick:()=>u("tone",y.value),style:{padding:"12px",background:t.tone===y.value?"rgba(168, 85, 247, 0.1)":"var(--bg-tertiary)",border:`1px solid ${t.tone===y.value?"#a855f7":"var(--border-color)"}`,borderRadius:"10px",cursor:"pointer",textAlign:"center"},children:[n.jsx("p",{style:{fontSize:"13px",fontWeight:"600",color:t.tone===y.value?"#a855f7":"var(--text-primary)",marginBottom:"2px"},children:y.label}),n.jsx("p",{style:{fontSize:"11px",color:"var(--text-muted)"},children:y.desc})]},y.value))})]}),n.jsx("button",{onClick:p,disabled:s,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"14px",background:"linear-gradient(135deg, #a855f7 0%, #7c3aed 100%)",border:"none",borderRadius:"10px",color:"white",fontSize:"15px",fontWeight:"600",cursor:s?"wait":"pointer",opacity:s?.7:1,marginTop:"8px"},children:s?n.jsxs(n.Fragment,{children:[n.jsx(Ie,{size:18,style:{animation:"spin 1s linear infinite"}}),"Gnration en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(vw,{size:18}),"Gnrer la description"]})})]})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",display:"flex",flexDirection:"column"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600"},children:"Description gnre"}),r&&n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsxs("button",{onClick:x,disabled:s,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer"},children:[n.jsx(Ur,{size:14}),"Rgnrer"]}),n.jsxs("button",{onClick:f,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:l?"rgba(34, 197, 94, 0.1)":"var(--bg-tertiary)",border:`1px solid ${l?"#22c55e":"var(--border-color)"}`,borderRadius:"8px",color:l?"#22c55e":"var(--text-secondary)",fontSize:"13px",cursor:"pointer"},children:[l?n.jsx(re,{size:14}):n.jsx(hr,{size:14}),l?"Copi !":"Copier"]})]})]}),a&&n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"10px",marginBottom:"16px"},children:[n.jsx(Oe,{size:18,style:{color:"var(--error)",flexShrink:0,marginTop:"2px"}}),n.jsxs("div",{children:[n.jsx("p",{style:{color:"var(--error)",fontSize:"14px",fontWeight:"500",marginBottom:"4px"},children:"Erreur de gnration"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"13px"},children:a})]})]}),n.jsx("div",{style:{flex:1,padding:"16px",background:"var(--bg-tertiary)",borderRadius:"10px",minHeight:"300px"},children:s?n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:"16px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",border:"3px solid var(--border-color)",borderTopColor:"#a855f7",borderRadius:"50%",animation:"spin 1s linear infinite"}}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Claude gnre votre description..."})]}):r?n.jsx("p",{style:{fontSize:"15px",lineHeight:"1.7",color:"var(--text-primary)",whiteSpace:"pre-wrap"},children:r}):n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center",color:"var(--text-muted)"},children:[n.jsx(He,{size:48,style:{opacity:.3,marginBottom:"16px"}}),n.jsx("p",{style:{fontSize:"14px",marginBottom:"8px"},children:"Remplissez les dtails du bien"}),n.jsx("p",{style:{fontSize:"13px",opacity:.7},children:'et cliquez sur "Gnrer" pour crer une description'})]})})]})]}),n.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}const rS=[{category:"Intelligence Artificielle",items:[{name:"Estimation IA",description:"Estimez la valeur d'un bien instantanment",icon:Sa,path:"/tools/valuation",color:"#22c55e",badge:"Populaire"},{name:"Lead Scoring",description:"Priorisez vos prospects par probabilit d'achat",icon:pc,path:"/tools/lead-scoring",color:"#ef4444",badge:"IA"},{name:"Retouche Photo",description:"Amliorez vos photos automatiquement",icon:li,path:"/tools/photo-enhancement",color:"#8b5cf6",badge:"IA"},{name:"Traduction Multi-langue",description:"Traduisez vos annonces pour l'international",icon:ay,path:"/tools/translation",color:"#3b82f6",badge:"IA"},{name:"Notes Vocales",description:"Enregistrez et convertissez en descriptions",icon:dc,path:"/tools/voice-notes",color:"#ef4444",badge:"IA"}]},{category:"Communication",items:[{name:"WhatsApp Business",description:"Grez vos conversations WhatsApp",icon:Fo,path:"/tools/whatsapp",color:"#25D366",badge:"Nouveau"},{name:"Suivi Automatique",description:"Squences email et SMS personnalises",icon:xn,path:"/tools/followup",color:"#f97316"},{name:"Collecte d'Avis",description:"Demandez des avis automatiquement",icon:Jt,path:"/tools/reviews",color:"#eab308"}]},{category:"Gestion Clients",items:[{name:"Calendrier Intelligent",description:"Grez vos RDV et visites",icon:ct,path:"/tools/calendar",color:"#d4af37"},{name:"Portail Client",description:"Espace personnel pour vos clients",icon:xt,path:"/tools/client-portal",color:"#06b6d4"}]},{category:"Analyse & Rapports",items:[{name:"Analyse de March",description:"Tendances et statistiques immobilires",icon:yi,path:"/tools/market-insights",color:"#3b82f6"},{name:"Performance",description:"Analysez vos rsultats en dtail",icon:Hs,path:"/tools/performance",color:"#22c55e"},{name:"Infos Quartier",description:"Donnes environnement et commodits",icon:it,path:"/tools/neighborhood",color:"#3b82f6",badge:"Nouveau"},{name:"Simulateur de Prt",description:"Calculez les mensualits clients",icon:Sa,path:"/tools/mortgage",color:"#8b5cf6"}]},{category:"Documents & Marketing",items:[{name:"Gnrateur de Documents",description:"Crez mandats, bons de visite, etc.",icon:Yt,path:"/tools/documents",color:"#f97316"},{name:"Flyers QR Code",description:"Crez des flyers imprimables",icon:Qi,path:"/tools/qr-flyer",color:"#ec4899"},{name:"Visite Virtuelle",description:"Crez des vidos immersives",icon:_n,path:"/tools/virtual-tour",color:"#ec4899",badge:"Nouveau"}]}];function nS(){return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsx("div",{style:{marginBottom:"40px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(He,{size:24,style:{color:"#d4af37"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Outils"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"18 outils pour booster votre activit immobilire"})]})]})}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"32px"},children:[{label:"Outils IA",count:5,color:"#8b5cf6"},{label:"Communication",count:3,color:"#25D366"},{label:"Analyse",count:4,color:"#3b82f6"},{label:"Marketing",count:3,color:"#ec4899"}].map((t,e)=>n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",textAlign:"center"},children:[n.jsx("p",{style:{fontSize:"28px",fontWeight:"700",color:t.color},children:t.count}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:t.label})]},e))}),rS.map((t,e)=>n.jsxs("div",{style:{marginBottom:"40px"},children:[n.jsx("h2",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:t.category}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:t.items.map((r,i)=>n.jsx(te,{to:r.path,style:{textDecoration:"none",color:"inherit"},children:n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",cursor:"pointer",transition:"all 0.2s",position:"relative",overflow:"hidden"},onMouseEnter:s=>{s.currentTarget.style.borderColor=r.color,s.currentTarget.style.transform="translateY(-4px)",s.currentTarget.style.boxShadow=`0 10px 30px ${r.color}20`},onMouseLeave:s=>{s.currentTarget.style.borderColor="var(--border-color)",s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="none"},children:[r.badge&&n.jsx("span",{style:{position:"absolute",top:"12px",right:"12px",padding:"4px 8px",background:r.badge==="IA"?"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)":r.badge==="Nouveau"?"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)":"linear-gradient(135deg, #d4af37 0%, #b8972e 100%)",color:"white",borderRadius:"4px",fontSize:"10px",fontWeight:"700",textTransform:"uppercase"},children:r.badge}),n.jsx("div",{style:{width:"48px",height:"48px",background:`${r.color}15`,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px"},children:n.jsx(r.icon,{size:24,style:{color:r.color}})}),n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:r.name}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)",lineHeight:"1.5",marginBottom:"16px"},children:r.description}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:r.color,fontSize:"13px",fontWeight:"600"},children:["Accder ",n.jsx(kt,{size:14})]})]})},i))})]},e)),n.jsx("div",{style:{padding:"32px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.02) 100%)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"16px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"16px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"#d4af37",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:n.jsx(He,{size:24,style:{color:"black"}})}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:" Astuce Pro"}),n.jsxs("p",{style:{fontSize:"14px",color:"var(--text-muted)",lineHeight:"1.6"},children:["Combinez plusieurs outils pour maximiser votre efficacit ! Par exemple, utilisez",n.jsx("strong",{children:" Notes Vocales"})," pour enregistrer vos observations lors des visites, puis ",n.jsx("strong",{children:"Retouche Photo"})," pour sublimer vos images, et enfin",n.jsx("strong",{children:" Flyers QR Code"})," pour crer des supports marketing professionnels."]})]})]})})]})}const iS=[{value:"Appartement",label:"Appartement"},{value:"Maison",label:"Maison"}],Bl=[{value:"new",label:"Neuf",multiplier:1.15},{value:"excellent",label:"Excellent tat",multiplier:1.08},{value:"good",label:"Bon tat",multiplier:1},{value:"renovation",label:" rnover",multiplier:.85},{value:"major_work",label:"Gros travaux",multiplier:.7}],$l=[{id:"pool",label:"Piscine",value:25e3},{id:"garden",label:"Jardin",value:15e3},{id:"sea_view",label:"Vue mer",value:35e3},{id:"parking",label:"Parking",value:1e4},{id:"terrace",label:"Terrasse",value:12e3},{id:"garage",label:"Garage",value:18e3},{id:"elevator",label:"Ascenseur",value:8e3},{id:"security",label:"Gardiennage",value:5e3}],Ph={971:{name:"Guadeloupe",appartement:{low:2521,mid:3200,high:3818},maison:{low:2763,mid:3100,high:3532},cities:{"Pointe--Pitre":{appartement:2800,maison:2600},"Les Abymes":{appartement:2600,maison:2400},"Le Gosier":{appartement:3500,maison:3200},"Sainte-Anne":{appartement:3800,maison:3500},"Baie-Mahault":{appartement:3200,maison:3e3},"Saint-Franois":{appartement:4e3,maison:3800}},source:"PAP.fr, SeLoger - Dcembre 2025",lastUpdate:"2025-12"},972:{name:"Martinique",appartement:{low:2087,mid:3300,high:5313},maison:{low:1522,mid:3e3,high:4904},cities:{"Fort-de-France":{appartement:3200,maison:2800},"Le Lamentin":{appartement:3e3,maison:2700},Schoelcher:{appartement:3500,maison:3200},"Les Trois-lets":{appartement:4200,maison:4e3},"Le Robert":{appartement:2800,maison:2500},"Sainte-Anne":{appartement:3800,maison:3500}},source:"efficity, Netvendeur - Novembre 2025",lastUpdate:"2025-11"},973:{name:"Guyane",appartement:{low:2047,mid:2600,high:3799},maison:{low:1655,mid:2400,high:3071},cities:{Cayenne:{appartement:2636,maison:2504},Kourou:{appartement:2400,maison:2190},Matoury:{appartement:2500,maison:2390},"Remire-Montjoly":{appartement:3200,maison:2980},"Saint-Laurent-du-Maroni":{appartement:2800,maison:2600}},source:"Orpi, efficity - Novembre 2025",lastUpdate:"2025-11"},974:{name:"La Runion",appartement:{low:1978,mid:2950,high:5244},maison:{low:1597,mid:2800,high:4415},cities:{"Saint-Denis":{appartement:3200,maison:3e3},"Saint-Pierre":{appartement:2800,maison:2600},"Saint-Paul":{appartement:3e3,maison:2800},"Le Tampon":{appartement:2500,maison:2300},"Saint-Andr":{appartement:2400,maison:2200},"Saint-Gilles":{appartement:4e3,maison:3800}},source:"PAP.fr, AV-Transaction - Dcembre 2025",lastUpdate:"2025-12"},976:{name:"Mayotte",appartement:{low:1671,mid:2900,high:7750},maison:{low:998,mid:2200,high:4163},cities:{Mamoudzou:{appartement:3200,maison:2500},Koungou:{appartement:2800,maison:2200},Dzaoudzi:{appartement:3e3,maison:2400}},source:"Netvendeur - Septembre 2025",lastUpdate:"2025-09"},978:{name:"Saint-Martin",appartement:{low:3472,mid:4960,high:6448},maison:{low:4300,mid:6142,high:7900},cities:{Marigot:{appartement:5e3,maison:6e3},"Grand-Case":{appartement:5500,maison:6500},"Sandy Ground":{appartement:5200,maison:6200},"Quartier d'Orlans":{appartement:4500,maison:5500}},source:"Netvendeur, PAP.fr - Juillet 2025",lastUpdate:"2025-07"}},sS=t=>{if(!t)return null;const e=t.substring(0,3);return["971","972","973","974","976"].includes(e)?e:t.startsWith("978")||t.startsWith("97150")?"978":null},oS=[{code:"75",name:"Paris (75)"},{code:"92",name:"Hauts-de-Seine (92)"},{code:"93",name:"Seine-Saint-Denis (93)"},{code:"94",name:"Val-de-Marne (94)"},{code:"69",name:"Rhne - Lyon (69)"},{code:"13",name:"Bouches-du-Rhne (13)"},{code:"33",name:"Gironde - Bordeaux (33)"},{code:"06",name:"Alpes-Maritimes - Nice (06)"},{code:"31",name:"Haute-Garonne - Toulouse (31)"},{code:"44",name:"Loire-Atlantique - Nantes (44)"},{code:"59",name:"Nord - Lille (59)"},{code:"67",name:"Bas-Rhin - Strasbourg (67)"},{code:"34",name:"Hrault - Montpellier (34)"},{code:"35",name:"Ille-et-Vilaine - Rennes (35)"},{code:"76",name:"Seine-Maritime - Rouen (76)"},{code:"971",name:" Guadeloupe (971)",isDomTom:!0},{code:"972",name:" Martinique (972)",isDomTom:!0},{code:"973",name:" Guyane (973)",isDomTom:!0},{code:"974",name:" La Runion (974)",isDomTom:!0},{code:"976",name:" Mayotte (976)",isDomTom:!0},{code:"978",name:" Saint-Martin (978)",isDomTom:!0}];function aS(){const{t}=zu(),[e,r]=w.useState(!1),[i,s]=w.useState(""),[o,a]=w.useState(null),[d,l]=w.useState([]),[c,u]=w.useState(null),[h,p]=w.useState({propertyType:"Appartement",postalCode:"",city:"",department:"75",area:"",rooms:"",condition:"good",features:[]}),f=g=>{p(m=>({...m,features:m.features.includes(g)?m.features.filter(b=>b!==g):[...m.features,g]}))},x=async()=>{const{postalCode:g,city:m,propertyType:b,area:j}=h;if(!j)return u("Veuillez entrer la surface du bien"),null;const R=parseFloat(j);try{let T="https://api.cquest.org/dvf?";if(g&&g.length===5)T+=`code_postal=${g}`;else if(m&&m.trim())T+=`commune=${encodeURIComponent(m.trim())}`;else{const O={75:"Paris",69:"Lyon",13:"Marseille",33:"Bordeaux","06":"Nice",31:"Toulouse",44:"Nantes",59:"Lille",67:"Strasbourg",34:"Montpellier"}[h.department]||"Paris";T+=`commune=${O}`}s("Connexion  la base DVF...");const k=await fetch(T);if(!k.ok)throw new Error("Erreur de connexion  l'API DVF");const P=await k.json();if(!P.resultats||P.resultats.length===0)throw new Error("Aucune transaction trouve. Essayez un autre code postal ou ville.");s(`${P.resultats.length} transactions trouves, analyse...`);let I=P.resultats.filter(A=>!(b==="Appartement"&&A.type_local!=="Appartement"||b==="Maison"&&A.type_local!=="Maison"||!A.surface_reelle_bati||!A.valeur_fonciere||A.surface_reelle_bati<10||A.valeur_fonciere<2e4));I.length===0&&(I=P.resultats.filter(A=>!(!A.surface_reelle_bati||!A.valeur_fonciere||A.surface_reelle_bati<10||A.valeur_fonciere<2e4))),I=I.map(A=>{const O=Math.abs(A.surface_reelle_bati-R);return{...A,similarity:O}}).sort((A,O)=>A.similarity-O.similarity);const E=I.slice(0,30);if(E.length===0)throw new Error("Aucun bien comparable trouv dans cette zone");return E}catch(T){throw console.error("DVF API Error:",T),T}},y=async()=>{var g;r(!0),u(null),a(null),l([]);try{const m=parseFloat(h.area);if(!m||m<=0)throw new Error("Veuillez entrer une surface valide");const b=sS(h.postalCode)||((g=oS.find(j=>j.code===h.department))!=null&&g.isDomTom?h.department:null);if(b&&Ph[b]){s("Analyse du march DOM-TOM..."),await new Promise(S=>setTimeout(S,1e3));const j=Ph[b],R=h.propertyType==="Appartement"?"appartement":"maison",T=j[R];let k=T.mid,P=null;if(h.city&&j.cities){const S=h.city.toLowerCase().trim();for(const[D,M]of Object.entries(j.cities))if(D.toLowerCase().includes(S)||S.includes(D.toLowerCase())){k=M[R],P=D;break}}let I=m*k;const E=Bl.find(S=>S.value===h.condition);E&&(I*=E.multiplier);const A=h.features.reduce((S,D)=>{const M=$l.find(C=>C.id===D);return S+((M==null?void 0:M.value)||0)},0);I+=A;const O=.12,W=Math.round(I*(1-O)),_=Math.round(I*(1+O)),N=Math.round(I),q=Math.round(N/m),z=(q-k)/k*100;a({lowEstimate:W,midEstimate:N,highEstimate:_,pricePerSqm:q,marketAvg:k,marketComparison:z,confidence:P?78:70,totalTransactions:"N/A (donnes agrges)",dateRange:{from:j.lastUpdate,to:"Actualis"},isDomTom:!0,region:j.name,cityMatch:P,dataSource:j.source}),l([{type:"March",description:`Prix moyen ${h.propertyType.toLowerCase()}s en ${j.name}`,pricePerSqm:T.mid,range:`${T.low.toLocaleString("fr-FR")} - ${T.high.toLocaleString("fr-FR")} /m`},...P?[{type:"Ville",description:`Prix spcifique  ${P}`,pricePerSqm:k,range:"Donnes locales"}]:[]])}else{const j=await x();if(!j||j.length===0)throw new Error("Impossible de rcuprer les donnes DVF");s("Calcul de l'estimation...");const R=j.map(Q=>Q.valeur_fonciere/Q.surface_reelle_bati),T=[...R].sort((Q,ut)=>Q-ut),k=T[Math.floor(T.length*.25)],P=T[Math.floor(T.length*.75)],I=P-k,E=k-1.5*I,A=P+1.5*I,O=R.filter(Q=>Q>=E&&Q<=A),W=[...O].sort((Q,ut)=>Q-ut),_=W[Math.floor(W.length/2)],N=O.reduce((Q,ut)=>Q+ut,0)/O.length,q=_*.6+N*.4;let z=m*q;const S=Bl.find(Q=>Q.value===h.condition);S&&(z*=S.multiplier);const D=h.features.reduce((Q,ut)=>{const Wt=$l.find(ge=>ge.id===ut);return Q+((Wt==null?void 0:Wt.value)||0)},0);z+=D;const M=Math.min(100,j.length*3),C=j.filter(Q=>Math.abs(Q.surface_reelle_bati-m)<m*.3).length,F=Math.min(20,C*2),L=Math.min(95,40+M/2+F),X=O.reduce((Q,ut)=>Q+Math.pow(ut-q,2),0)/O.length,Z=Math.sqrt(X)/q,Ze=Math.max(.08,Math.min(.18,Z)),rr=Math.round(z*(1-Ze)),oe=Math.round(z*(1+Ze)),Se=Math.round(z),$=Math.round(Se/m),bt=Math.round(q),Re=($-bt)/bt*100,ke=j.map(Q=>Q.date_mutation?new Date(Q.date_mutation):null).filter(Q=>Q&&!isNaN(Q.getTime())),Fe=ke.length>0?new Date(Math.min(...ke.map(Q=>Q.getTime()))):null,mr=ke.length>0?new Date(Math.max(...ke.map(Q=>Q.getTime()))):null;a({lowEstimate:rr,midEstimate:Se,highEstimate:oe,pricePerSqm:$,marketAvg:bt,marketComparison:Re,confidence:Math.round(L),totalTransactions:j.length,dateRange:Fe&&mr?{from:Fe.toLocaleDateString("fr-FR"),to:mr.toLocaleDateString("fr-FR")}:null,isDomTom:!1,dataSource:"DVF (data.gouv.fr)"}),l(j.slice(0,5).map(Q=>({date:Q.date_mutation?new Date(Q.date_mutation).toLocaleDateString("fr-FR"):"N/A",address:`${Q.adresse_numero||""} ${Q.adresse_nom_voie||""}, ${Q.code_postal||""} ${Q.nom_commune||""}`.trim(),price:Q.valeur_fonciere,area:Q.surface_reelle_bati,rooms:Q.nombre_pieces_principales,pricePerSqm:Math.round(Q.valeur_fonciere/Q.surface_reelle_bati),type:Q.type_local})))}}catch(m){u(m.message||"Une erreur est survenue")}finally{r(!1),s("")}},v=g=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(g);return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Sa,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Estimation IA"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Estimation base sur les transactions DVF relles"})]})]}),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)",borderRadius:"8px",marginTop:"12px"},children:[n.jsx(os,{size:14,style:{color:"#22c55e"}}),n.jsx("span",{style:{fontSize:"12px",color:"#22c55e",fontWeight:"500"},children:"Donnes officielles DVF (data.gouv.fr)"}),n.jsx("a",{href:"https://app.dvf.etalab.gouv.fr/",target:"_blank",rel:"noopener noreferrer",style:{color:"#22c55e"},children:n.jsx(ot,{size:12})})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 420px",gap:"32px"},children:[n.jsxs("div",{style:{padding:"28px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"24px"},children:"Caractristiques du bien"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Type de bien"}),n.jsx("div",{style:{display:"flex",gap:"8px"},children:iS.map(g=>n.jsx("button",{onClick:()=>p({...h,propertyType:g.value}),style:{padding:"12px 24px",background:h.propertyType===g.value?"var(--gold)":"var(--bg-tertiary)",border:"1px solid "+(h.propertyType===g.value?"var(--gold)":"var(--border-color)"),borderRadius:"8px",color:h.propertyType===g.value?"var(--bg-primary)":"var(--text-secondary)",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:g.label},g.value))})]}),n.jsxs("div",{children:[n.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:[n.jsx(it,{size:14,style:{display:"inline",marginRight:"6px"}}),"Localisation"]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"140px 1fr",gap:"12px"},children:[n.jsx("input",{type:"text",placeholder:"Code postal",value:h.postalCode,onChange:g=>p({...h,postalCode:g.target.value.replace(/\D/g,"").slice(0,5)}),style:{padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}}),n.jsx("input",{type:"text",placeholder:"Ville (ex: Paris, Lyon, Marseille)",value:h.city,onChange:g=>p({...h,city:g.target.value}),style:{padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsx("p",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"6px"},children:"Entrez un code postal OU une ville pour rechercher les transactions"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[n.jsxs("div",{children:[n.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:[n.jsx(Vs,{size:14,style:{display:"inline",marginRight:"6px"}}),"Surface (m) *"]}),n.jsx("input",{type:"number",placeholder:"75",value:h.area,onChange:g=>p({...h,area:g.target.value}),style:{width:"100%",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("div",{children:[n.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:[n.jsx(tr,{size:14,style:{display:"inline",marginRight:"6px"}}),"Pices"]}),n.jsx("input",{type:"number",placeholder:"3",value:h.rooms,onChange:g=>p({...h,rooms:g.target.value}),style:{width:"100%",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"tat gnral"}),n.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Bl.map(g=>n.jsx("button",{onClick:()=>p({...h,condition:g.value}),style:{padding:"10px 14px",background:h.condition===g.value?"var(--gold)":"var(--bg-tertiary)",border:"1px solid "+(h.condition===g.value?"var(--gold)":"var(--border-color)"),borderRadius:"8px",color:h.condition===g.value?"var(--bg-primary)":"var(--text-secondary)",fontSize:"12px",fontWeight:"500",cursor:"pointer"},children:g.label},g.value))})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"quipements (ajustent l'estimation)"}),n.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:$l.map(g=>n.jsxs("button",{onClick:()=>f(g.id),style:{padding:"10px 12px",background:h.features.includes(g.id)?"rgba(212, 175, 55, 0.15)":"var(--bg-tertiary)",border:"1px solid "+(h.features.includes(g.id)?"rgba(212, 175, 55, 0.3)":"var(--border-color)"),borderRadius:"8px",color:h.features.includes(g.id)?"var(--gold)":"var(--text-secondary)",fontSize:"12px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[h.features.includes(g.id)&&n.jsx(re,{size:14}),g.label]},g.id))})]}),c&&n.jsxs("div",{style:{padding:"12px 16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"8px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(Oe,{size:18,style:{color:"#ef4444"}}),n.jsx("span",{style:{color:"#ef4444",fontSize:"14px"},children:c})]}),n.jsx("button",{onClick:y,disabled:e||!h.area,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"16px",background:e||!h.area?"var(--bg-tertiary)":"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"12px",color:e||!h.area?"var(--text-muted)":"var(--bg-primary)",fontSize:"15px",fontWeight:"600",cursor:e||!h.area?"not-allowed":"pointer",marginTop:"8px"},children:e?n.jsxs(n.Fragment,{children:[n.jsx(Ie,{size:20,style:{animation:"spin 1s linear infinite"}}),i||"Analyse en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(En,{size:20}),"Rechercher et estimer"]})})]})]}),n.jsx("div",{children:o?n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[n.jsxs("div",{style:{padding:"28px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[n.jsx(He,{size:18,style:{color:"var(--gold)"}}),n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600"},children:"Estimation"}),o.isDomTom&&n.jsxs("span",{style:{padding:"4px 8px",background:"rgba(34, 197, 94, 0.1)",borderRadius:"4px",fontSize:"11px",color:"#22c55e"},children:[" ",o.region]})]}),n.jsxs("div",{style:{padding:"24px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.02) 100%)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"12px",textAlign:"center",marginBottom:"20px"},children:[n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)",marginBottom:"8px"},children:"Valeur estime"}),n.jsx("p",{style:{fontSize:"36px",fontWeight:"700",color:"var(--gold)",marginBottom:"8px"},children:v(o.midEstimate)}),n.jsxs("p",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:[v(o.lowEstimate)," - ",v(o.highEstimate)]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"20px"},children:[n.jsxs("div",{style:{padding:"16px",background:"var(--bg-tertiary)",borderRadius:"10px"},children:[n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"4px"},children:"Prix/m"}),n.jsx("p",{style:{fontSize:"18px",fontWeight:"600"},children:v(o.pricePerSqm)})]}),n.jsxs("div",{style:{padding:"16px",background:"var(--bg-tertiary)",borderRadius:"10px"},children:[n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"4px"},children:o.isDomTom?"Moyenne rgion":"Moyenne DVF"}),n.jsxs("p",{style:{fontSize:"18px",fontWeight:"600"},children:[v(o.marketAvg),"/m"]})]})]}),n.jsxs("div",{style:{padding:"16px",background:"var(--bg-tertiary)",borderRadius:"10px",marginBottom:"20px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsx("span",{style:{fontSize:"13px",color:"var(--text-muted)"},children:"vs. Prix moyen local"}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:o.marketComparison>0?"#22c55e":o.marketComparison<0?"#ef4444":"var(--text-muted)"},children:[o.marketComparison>0?n.jsx(Hs,{size:16}):o.marketComparison<0?n.jsx(uy,{size:16}):n.jsx(rw,{size:16}),n.jsxs("span",{style:{fontWeight:"600"},children:[o.marketComparison>0?"+":"",o.marketComparison.toFixed(1),"%"]})]})]}),n.jsx("div",{style:{height:"8px",background:"var(--border-color)",borderRadius:"4px",overflow:"hidden"},children:n.jsx("div",{style:{width:`${Math.min(Math.max(50+o.marketComparison,10),90)}%`,height:"100%",background:o.marketComparison>0?"#22c55e":o.marketComparison<0?"#ef4444":"var(--gold)",borderRadius:"4px"}})})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",background:o.isDomTom?"rgba(59, 130, 246, 0.1)":"rgba(34, 197, 94, 0.1)",border:`1px solid ${o.isDomTom?"rgba(59, 130, 246, 0.2)":"rgba(34, 197, 94, 0.2)"}`,borderRadius:"10px",marginBottom:"12px"},children:[o.isDomTom?n.jsx(vi,{size:16,style:{color:"#3b82f6"}}):n.jsx(os,{size:16,style:{color:"#22c55e"}}),n.jsxs("div",{children:[n.jsxs("p",{style:{fontSize:"13px",fontWeight:"500",color:o.isDomTom?"#3b82f6":"#22c55e"},children:["Confiance: ",o.confidence,"%"]}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:o.isDomTom?`Source: ${o.dataSource}`:`Bas sur ${o.totalTransactions} transactions relles`})]})]}),o.cityMatch&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 12px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"8px",marginBottom:"12px"},children:[n.jsx(it,{size:14,style:{color:"var(--gold)"}}),n.jsxs("span",{style:{fontSize:"12px",color:"var(--gold)"},children:["Prix ajust pour ",o.cityMatch]})]}),o.dateRange&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 12px",background:"var(--bg-tertiary)",borderRadius:"8px"},children:[n.jsx(ct,{size:14,style:{color:"var(--text-muted)"}}),n.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:o.isDomTom?`Mise  jour: ${o.dateRange.from}`:`Donnes: ${o.dateRange.from}  ${o.dateRange.to}`})]})]}),d.length>0&&n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"15px",fontWeight:"600",marginBottom:"16px"},children:o.isDomTom?" Donnes du march":" Ventes comparables (donnes relles)"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:o.isDomTom?d.map((g,m)=>n.jsxs("div",{style:{padding:"14px",background:"var(--bg-tertiary)",borderRadius:"10px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[n.jsx("span",{style:{fontSize:"13px",fontWeight:"500",color:"var(--text-primary)"},children:g.type}),n.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--gold)"},children:[v(g.pricePerSqm),"/m"]})]}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:g.description}),g.range&&n.jsxs("p",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"4px"},children:["Fourchette: ",g.range]})]},m)):d.map((g,m)=>n.jsxs("div",{style:{padding:"14px",background:"var(--bg-tertiary)",borderRadius:"10px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[n.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--gold)"},children:v(g.price)}),n.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:g.date})]}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"6px"},children:g.address}),n.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"11px",color:"var(--text-muted)"},children:[n.jsxs("span",{children:[g.area," m"]}),g.rooms&&n.jsxs("span",{children:[g.rooms," pices"]}),n.jsxs("span",{style:{color:"var(--gold)"},children:[v(g.pricePerSqm),"/m"]})]})]},m))})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"15px",fontWeight:"600",marginBottom:"12px"},children:" Comparer avec les annonces actuelles"}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"16px"},children:"Vrifiez les prix rels sur les sites d'annonces immobilires"}),n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[{name:"SeLoger",url:`https://www.seloger.com/list.htm?types=${h.propertyType==="Appartement"?"1":"2"}&places=[{ci:${h.postalCode||h.city}}]&surface=${h.area||50}/${parseInt(h.area||50)+30}`,color:"#e4002b"},{name:"LeBonCoin",url:`https://www.leboncoin.fr/recherche?category=9&locations=${encodeURIComponent(h.city||"France")}&real_estate_type=${h.propertyType==="Appartement"?"1":"2"}&square=${h.area||50}-${parseInt(h.area||50)+30}`,color:"#ff6e14"},{name:"PAP",url:`https://www.pap.fr/annonce/vente-${h.propertyType==="Appartement"?"appartement":"maison"}-${h.city?h.city.toLowerCase().replace(/\s/g,"-"):"france"}`,color:"#0066cc"},{name:"Bien'ici",url:`https://www.bienici.com/recherche/achat/${h.city?h.city.toLowerCase().replace(/\s/g,"-"):"france"}/${h.propertyType==="Appartement"?"appartement":"maison"}?surface-min=${h.area||50}`,color:"#00a19a"},...o.isDomTom?[{name:"Immo DOM-TOM",url:"https://www.netvendeur.com/prix/region-outre-mer-23/",color:"#9333ea"}]:[{name:"DVF Officiel",url:"https://app.dvf.etalab.gouv.fr/",color:"#22c55e"}]].map((g,m)=>n.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"10px 14px",background:`${g.color}15`,border:`1px solid ${g.color}30`,borderRadius:"8px",color:g.color,fontSize:"13px",fontWeight:"500",textDecoration:"none",transition:"all 0.2s"},children:[g.name,n.jsx(ot,{size:14})]},m))})]})]}):n.jsxs("div",{style:{padding:"40px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",textAlign:"center"},children:[n.jsx("div",{style:{width:"64px",height:"64px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:n.jsx(os,{size:28,style:{color:"var(--gold)"}})}),n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"Estimation base sur donnes relles"}),n.jsx("p",{style:{fontSize:"14px",color:"var(--text-muted)",lineHeight:"1.6",marginBottom:"16px"},children:"Entrez les caractristiques du bien pour obtenir une estimation base sur les vraies transactions immobilires."}),n.jsx("div",{style:{padding:"12px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"8px"},children:n.jsx("p",{style:{fontSize:"12px",color:"#3b82f6"},children:" Les donnes DVF contiennent toutes les ventes immobilires en France depuis 2014"})})]})})]}),n.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
      `})]})}const lS=t=>{let e=0;t.email&&(e+=10),t.phone&&(e+=15),t.message&&t.message.length>20&&(e+=10);const r=Math.floor((Date.now()-new Date(t.created_at).getTime())/(1e3*60*60*24));return r<=7?e+=30:r<=30&&(e+=15),t.budget&&t.budget>0&&(e+=15),t.property_type&&(e+=10),t.source==="website"&&(e+=5),t.source==="referral"&&(e+=10),Math.min(100,e)},Ah=t=>t>=70?{label:"Chaud",color:"#ef4444",icon:Gj}:t>=40?{label:"Tide",color:"#f59e0b",icon:Hs}:{label:"Froid",color:"#3b82f6",icon:Rn};function dS(){const[t,e]=w.useState([]),[r,i]=w.useState(!0),[s,o]=w.useState(null),[a,d]=w.useState("all"),[l,c]=w.useState(null);w.useEffect(()=>{u()},[]);const u=async()=>{i(!0),o(null);try{const{data:{user:y}}=await G.auth.getUser();if(!y){o("Veuillez vous connecter"),i(!1);return}const{data:v,error:g}=await G.from("leads").select("*").eq("user_id",y.id).order("created_at",{ascending:!1});if(g)throw g;const m=(v||[]).map(b=>({...b,score:lS(b)}));m.sort((b,j)=>j.score-b.score),e(m)}catch(y){console.error("Error loading leads:",y),o("Erreur lors du chargement des leads")}finally{i(!1)}},h=a==="all"?t:t.filter(y=>(Ah(y.score),a==="hot"?y.score>=70:a==="warm"?y.score>=40&&y.score<70:a==="cold"?y.score<40:!0)),p={total:t.length,hot:t.filter(y=>y.score>=70).length,warm:t.filter(y=>y.score>=40&&y.score<70).length,cold:t.filter(y=>y.score<40).length,avgScore:t.length>0?Math.round(t.reduce((y,v)=>y+v.score,0)/t.length):0},f=y=>{const v=new Date(y),m=new Date-v,b=Math.floor(m/6e4),j=Math.floor(b/60),R=Math.floor(j/24);return b<60?`${b}min`:j<24?`${j}h`:R<7?`${R}j`:v.toLocaleDateString("fr-FR")},x=y=>y?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(y):"Non spcifi";return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsx("div",{style:{marginBottom:"32px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(pc,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Scoring des leads"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Priorisation automatique de vos contacts"})]})]}),n.jsxs("button",{onClick:u,disabled:r,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-secondary)",fontSize:"14px",cursor:"pointer"},children:[n.jsx(Ur,{size:16,style:{animation:r?"spin 1s linear infinite":"none"}}),"Actualiser"]})]})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px",marginBottom:"24px"},children:[n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"4px"},children:"Total Leads"}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700"},children:p.total})]}),n.jsxs("div",{style:{padding:"20px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"12px"},children:[n.jsx("p",{style:{fontSize:"12px",color:"#ef4444",marginBottom:"4px"},children:"Chauds (70+)"}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700",color:"#ef4444"},children:p.hot})]}),n.jsxs("div",{style:{padding:"20px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.2)",borderRadius:"12px"},children:[n.jsx("p",{style:{fontSize:"12px",color:"#f59e0b",marginBottom:"4px"},children:"Tides (40-69)"}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700",color:"#f59e0b"},children:p.warm})]}),n.jsxs("div",{style:{padding:"20px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"12px"},children:[n.jsx("p",{style:{fontSize:"12px",color:"#3b82f6",marginBottom:"4px"},children:"Froids (<40)"}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700",color:"#3b82f6"},children:p.cold})]}),n.jsxs("div",{style:{padding:"20px",background:"rgba(212, 175, 55, 0.1)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"12px"},children:[n.jsx("p",{style:{fontSize:"12px",color:"var(--gold)",marginBottom:"4px"},children:"Score moyen"}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700",color:"var(--gold)"},children:p.avgScore})]})]}),n.jsx("div",{style:{padding:"16px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"10px",marginBottom:"24px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px"},children:[n.jsx(Ei,{size:18,style:{color:"#3b82f6",marginTop:"2px"}}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"13px",fontWeight:"500",color:"#3b82f6",marginBottom:"4px"},children:"Comment le score est calcul"}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",lineHeight:"1.5"},children:"Email (+10)  Tlphone (+15)  Message dtaill (+10)  Lead rcent (+15  +30)  Budget spcifi (+15)  Type de bien (+10)  Source (+5  +10)"})]})]})}),n.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"20px"},children:[{value:"all",label:"Tous"},{value:"hot",label:" Chauds",color:"#ef4444"},{value:"warm",label:" Tides",color:"#f59e0b"},{value:"cold",label:" Froids",color:"#3b82f6"}].map(y=>n.jsx("button",{onClick:()=>d(y.value),style:{padding:"8px 16px",background:a===y.value?y.color||"var(--gold)":"var(--bg-tertiary)",border:"1px solid "+(a===y.value?y.color||"var(--gold)":"var(--border-color)"),borderRadius:"8px",color:a===y.value?"white":"var(--text-secondary)",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:y.label},y.value))}),r&&n.jsxs("div",{style:{padding:"60px",textAlign:"center"},children:[n.jsx(Ie,{size:32,style:{color:"var(--gold)",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),n.jsx("p",{style:{color:"var(--text-muted)"},children:"Chargement des leads..."})]}),s&&n.jsxs("div",{style:{padding:"16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"10px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(Oe,{size:18,style:{color:"#ef4444"}}),n.jsx("span",{style:{color:"#ef4444"},children:s})]}),!r&&!s&&t.length===0&&n.jsxs("div",{style:{padding:"60px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",textAlign:"center"},children:[n.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"20px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:n.jsx(pc,{size:36,style:{color:"var(--gold)"}})}),n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Aucun lead  scorer"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px",maxWidth:"400px",margin:"0 auto"},children:"Les leads capturs via vos annonces apparatront ici avec leur score de priorit."})]}),!r&&h.length>0&&n.jsx("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",overflow:"hidden"},children:h.map((y,v)=>{const g=Ah(y.score);return g.icon,n.jsxs("div",{onClick:()=>c((l==null?void 0:l.id)===y.id?null:y),style:{padding:"20px",borderBottom:v<h.length-1?"1px solid var(--border-color)":"none",cursor:"pointer",background:(l==null?void 0:l.id)===y.id?"var(--bg-tertiary)":"transparent",transition:"background 0.2s"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[n.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",background:`${g.color}20`,border:`3px solid ${g.color}`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:n.jsx("span",{style:{fontSize:"18px",fontWeight:"700",color:g.color},children:y.score})}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600"},children:y.name||"Sans nom"}),n.jsx("span",{style:{padding:"3px 8px",background:`${g.color}20`,color:g.color,borderRadius:"4px",fontSize:"11px",fontWeight:"600"},children:g.label})]}),n.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"13px",color:"var(--text-muted)"},children:[y.email&&n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(Rt,{size:12})," ",y.email]}),y.phone&&n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(Ps,{size:12})," ",y.phone]})]})]}),n.jsxs("div",{style:{textAlign:"right"},children:[n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"4px"},children:f(y.created_at)}),n.jsx(wn,{size:18,style:{color:"var(--text-muted)",transform:(l==null?void 0:l.id)===y.id?"rotate(90deg)":"none",transition:"transform 0.2s"}})]})]}),(l==null?void 0:l.id)===y.id&&n.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border-color)"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"2px"},children:"Budget"}),n.jsx("p",{style:{fontSize:"14px",fontWeight:"500"},children:x(y.budget)})]}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"2px"},children:"Type recherch"}),n.jsx("p",{style:{fontSize:"14px",fontWeight:"500"},children:y.property_type||"Non spcifi"})]}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"2px"},children:"Source"}),n.jsx("p",{style:{fontSize:"14px",fontWeight:"500"},children:y.source||"Direct"})]}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"2px"},children:"Cr le"}),n.jsx("p",{style:{fontSize:"14px",fontWeight:"500"},children:new Date(y.created_at).toLocaleDateString("fr-FR")})]})]}),y.message&&n.jsxs("div",{style:{marginTop:"12px"},children:[n.jsx("p",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"4px"},children:"Message"}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",background:"var(--bg-primary)",padding:"10px",borderRadius:"8px"},children:y.message})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[y.phone&&n.jsxs("a",{href:`tel:${y.phone}`,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)",borderRadius:"6px",color:"#22c55e",fontSize:"12px",textDecoration:"none"},children:[n.jsx(Ps,{size:14})," Appeler"]}),y.email&&n.jsxs("a",{href:`mailto:${y.email}`,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"6px",color:"#3b82f6",fontSize:"12px",textDecoration:"none"},children:[n.jsx(Rt,{size:14})," Email"]}),y.phone&&n.jsxs("a",{href:`https://wa.me/${y.phone.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:"rgba(37, 211, 102, 0.1)",border:"1px solid rgba(37, 211, 102, 0.2)",borderRadius:"6px",color:"#25d366",fontSize:"12px",textDecoration:"none"},children:[n.jsx(kn,{size:14})," WhatsApp"]})]})]})]},y.id)})}),n.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
      `})]})}const Oh=(t,e,r,i)=>{e.clearRect(0,0,t.width,t.height),e.save(),e.translate(t.width/2,t.height/2),e.rotate(i.rotation*Math.PI/180),e.scale(i.flipH?-1:1,1),e.translate(-t.width/2,-t.height/2);const s=`
    brightness(${i.brightness}%)
    contrast(${i.contrast}%)
    saturate(${i.saturation}%)
    sepia(${i.warmth}%)
    blur(${i.blur}px)
  `;e.filter=s,e.drawImage(r,0,0,t.width,t.height),e.restore()},Kt={brightness:100,contrast:100,saturation:100,warmth:0,blur:0,rotation:0,flipH:!1},cS=[{name:"Original",filters:{...Kt}},{name:"Lumineux",filters:{...Kt,brightness:120,contrast:105}},{name:"HDR",filters:{...Kt,brightness:105,contrast:130,saturation:120}},{name:"Chaleureux",filters:{...Kt,warmth:20,saturation:110}},{name:"Immobilier",filters:{...Kt,brightness:110,contrast:110,saturation:105}},{name:"clatant",filters:{...Kt,brightness:108,saturation:130,contrast:108}},{name:"Naturel",filters:{...Kt,brightness:102,contrast:95,saturation:95}}];function uS(){const[t,e]=w.useState([]),[r,i]=w.useState(0),[s,o]=w.useState({...Kt}),[a,d]=w.useState(!1),[l,c]=w.useState(!1),u=w.useRef(null),h=w.useRef(null),p=w.useRef(null),f=w.useRef(null),x=t[r];w.useEffect(()=>{if(x&&u.current&&f.current){const k=u.current,P=k.getContext("2d");Oh(k,P,f.current,s)}},[s,x]);const y=w.useCallback(k=>{Array.from(k.target.files).forEach(I=>{const E=new FileReader;E.onload=A=>{const O=new window.Image;O.onload=()=>{e(W=>[...W,{id:Date.now()+Math.random(),name:I.name,src:A.target.result,width:O.width,height:O.height}])},O.src=A.target.result},E.readAsDataURL(I)}),k.target.value=""},[]);w.useEffect(()=>{if(x){const k=new window.Image;k.onload=()=>{f.current=k;const P=1200,I=k.width>P?P/k.width:1,E=k.width*I,A=k.height*I;if(u.current){u.current.width=E,u.current.height=A;const O=u.current.getContext("2d");Oh(u.current,O,k,s)}h.current&&(h.current.width=E,h.current.height=A,h.current.getContext("2d").drawImage(k,0,0,E,A))},k.src=x.src,o({...Kt})}},[x==null?void 0:x.id]);const v=(k,P)=>{o(I=>({...I,[k]:P}))},g=k=>{o({...k.filters})},m=()=>{o({...Kt})},b=()=>{o(k=>({...k,rotation:(k.rotation+90)%360}))},j=()=>{o(k=>({...k,flipH:!k.flipH}))},R=()=>{if(!u.current)return;const k=document.createElement("a");k.download=`enhanced_${(x==null?void 0:x.name)||"image.jpg"}`,k.href=u.current.toDataURL("image/jpeg",.95),k.click()},T=k=>{e(P=>P.filter(I=>I.id!==k)),r>=t.length-1&&i(Math.max(0,r-1))};return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsx("div",{style:{marginBottom:"32px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(li,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Retouche photo"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Amliorez vos photos immobilires en temps rel"})]})]}),n.jsx("input",{ref:p,type:"file",accept:"image/*",multiple:!0,onChange:y,style:{display:"none"}}),n.jsxs("button",{onClick:()=>{var k;return(k=p.current)==null?void 0:k.click()},style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[n.jsx(hc,{size:18}),"Importer des photos"]})]})}),n.jsxs("div",{style:{padding:"12px 16px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"10px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(Ei,{size:16,style:{color:"#3b82f6"}}),n.jsx("p",{style:{fontSize:"13px",color:"#3b82f6"},children:"Traitement 100% local dans votre navigateur. Vos photos ne sont jamais envoyes sur un serveur."})]}),t.length===0?n.jsxs("div",{onClick:()=>{var k;return(k=p.current)==null?void 0:k.click()},style:{padding:"80px",background:"var(--bg-card)",border:"2px dashed var(--border-color)",borderRadius:"16px",textAlign:"center",cursor:"pointer",transition:"border-color 0.2s"},children:[n.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"20px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:n.jsx(hc,{size:36,style:{color:"var(--gold)"}})}),n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Glissez vos photos ici"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"ou cliquez pour slectionner des fichiers"})]}):n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 320px",gap:"24px"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{position:"relative",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",overflow:"hidden",marginBottom:"16px"},children:[n.jsx("canvas",{ref:h,style:{position:"absolute",top:0,left:0,width:"100%",height:"auto",opacity:l?1:0,transition:"opacity 0.2s",pointerEvents:"none"}}),n.jsx("canvas",{ref:u,style:{width:"100%",height:"auto",display:"block"}}),n.jsxs("button",{onMouseDown:()=>c(!0),onMouseUp:()=>c(!1),onMouseLeave:()=>c(!1),style:{position:"absolute",bottom:"16px",left:"16px",display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:"rgba(0,0,0,0.7)",border:"none",borderRadius:"6px",color:"white",fontSize:"12px",cursor:"pointer"},children:[n.jsx(jw,{size:14}),"Maintenir pour voir l'original"]})]}),t.length>1&&n.jsx("div",{style:{display:"flex",gap:"8px",overflowX:"auto",padding:"8px 0"},children:t.map((k,P)=>n.jsxs("div",{onClick:()=>i(P),style:{position:"relative",width:"80px",height:"60px",borderRadius:"8px",overflow:"hidden",border:P===r?"2px solid var(--gold)":"2px solid transparent",cursor:"pointer",flexShrink:0},children:[n.jsx("img",{src:k.src,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}),n.jsx("button",{onClick:I=>{I.stopPropagation(),T(k.id)},style:{position:"absolute",top:"2px",right:"2px",padding:"2px",background:"rgba(239, 68, 68, 0.9)",border:"none",borderRadius:"4px",color:"white",cursor:"pointer"},children:n.jsx(Et,{size:10})})]},k.id))}),n.jsxs("div",{style:{padding:"16px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[n.jsx("p",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"12px"},children:"Prrglages"}),n.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:cS.map(k=>n.jsx("button",{onClick:()=>g(k),style:{padding:"8px 14px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"6px",color:"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:k.name},k.name))})]})]}),n.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"20px",height:"fit-content"},children:[n.jsx("h3",{style:{fontSize:"15px",fontWeight:"600",marginBottom:"20px"},children:"Ajustements"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[n.jsx(wo,{icon:n.jsx(fw,{size:16}),label:"Luminosit",value:s.brightness,min:50,max:150,onChange:k=>v("brightness",k)}),n.jsx(wo,{icon:n.jsx(Uj,{size:16}),label:"Contraste",value:s.contrast,min:50,max:150,onChange:k=>v("contrast",k)}),n.jsx(wo,{icon:n.jsx(ly,{size:16}),label:"Saturation",value:s.saturation,min:0,max:200,onChange:k=>v("saturation",k)}),n.jsx(wo,{icon:n.jsx(He,{size:16}),label:"Chaleur",value:s.warmth,min:0,max:50,onChange:k=>v("warmth",k)})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"24px",paddingTop:"20px",borderTop:"1px solid var(--border-color)"},children:[n.jsxs("button",{onClick:b,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:[n.jsx(cw,{size:14}),"Rotation"]}),n.jsxs("button",{onClick:j,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px",background:s.flipH?"rgba(212, 175, 55, 0.15)":"var(--bg-tertiary)",border:`1px solid ${s.flipH?"var(--gold)":"var(--border-color)"}`,borderRadius:"8px",color:s.flipH?"var(--gold)":"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:[n.jsx(Kj,{size:14}),"Miroir"]})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"20px"},children:[n.jsxs("button",{onClick:m,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer"},children:[n.jsx(Ur,{size:16}),"Rinitialiser"]}),n.jsxs("button",{onClick:R,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"8px",color:"var(--bg-primary)",fontSize:"13px",fontWeight:"600",cursor:"pointer"},children:[n.jsx(qs,{size:16}),"Tlcharger"]})]})]})]})]})}function wo({icon:t,label:e,value:r,min:i,max:s,onChange:o}){return n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{color:"var(--text-muted)"},children:t}),n.jsx("span",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:e})]}),n.jsxs("span",{style:{fontSize:"12px",color:"var(--gold)",fontWeight:"500"},children:[r,"%"]})]}),n.jsx("input",{type:"range",min:i,max:s,value:r,onChange:a=>o(parseInt(a.target.value)),style:{width:"100%",height:"4px",background:`linear-gradient(to right, var(--gold) ${(r-i)/(s-i)*100}%, var(--border-color) ${(r-i)/(s-i)*100}%)`,borderRadius:"4px",outline:"none",cursor:"pointer",WebkitAppearance:"none"}})]})}const Lh=[{code:"en",name:"Anglais",flag:""},{code:"es",name:"Espagnol",flag:""},{code:"pt",name:"Portugais",flag:""},{code:"it",name:"Italien",flag:""},{code:"de",name:"Allemand",flag:""},{code:"nl",name:"Nerlandais",flag:""},{code:"ru",name:"Russe",flag:""},{code:"zh",name:"Chinois",flag:""},{code:"ar",name:"Arabe",flag:""}],pS=`Magnifique appartement T3 de 75m situ au cur de Nice,  deux pas de la Promenade des Anglais. 

Ce bien d'exception offre :
- Un sjour lumineux de 30m avec balcon vue mer
- Une cuisine quipe moderne
- Deux chambres spacieuses avec placards intgrs
- Une salle de bain refaite  neuf
- Un parking en sous-sol

Idalement plac, proche commerces, transports et plages. Parfait pour rsidence principale ou investissement locatif.

DPE : C | GES : B | Charges : 150/mois`;function hS(){const[t,e]=w.useState(pS),[r,i]=w.useState(["en","es"]),[s,o]=w.useState({}),[a,d]=w.useState(!1),[l,c]=w.useState(null),u=x=>{i(y=>y.includes(x)?y.filter(v=>v!==x):[...y,x])},h=async()=>{if(!t.trim()||r.length===0)return;d(!0),await new Promise(v=>setTimeout(v,2500));const x={en:`Magnificent 3-room apartment of 75m located in the heart of Nice, steps from the Promenade des Anglais.

This exceptional property offers:
- A bright 30m living room with sea view balcony
- A modern fitted kitchen
- Two spacious bedrooms with built-in closets
- A newly renovated bathroom
- Underground parking

Ideally located, close to shops, transport and beaches. Perfect for primary residence or rental investment.

EPC: C | GHG: B | Charges: 150/month`,es:`Magnfico apartamento de 3 habitaciones de 75m situado en el corazn de Niza, a pocos pasos de la Promenade des Anglais.

Esta propiedad excepcional ofrece:
- Un luminoso saln de 30m con balcn con vistas al mar
- Una cocina moderna equipada
- Dos amplios dormitorios con armarios empotrados
- Un bao renovado
- Aparcamiento subterrneo

Ubicacin ideal, cerca de comercios, transporte y playas. Perfecto para residencia principal o inversin de alquiler.

DPE: C | GES: B | Gastos: 150/mes`,pt:`Magnfico apartamento T3 de 75m situado no corao de Nice, a poucos passos da Promenade des Anglais.

Esta propriedade excepcional oferece:
- Uma sala luminosa de 30m com varanda vista mar
- Uma cozinha moderna equipada
- Dois quartos espaosos com roupeiros embutidos
- Uma casa de banho renovada
- Estacionamento subterrneo

Localizao ideal, perto de comrcio, transportes e praias. Perfeito para residncia principal ou investimento para arrendamento.

DPE: C | GES: B | Encargos: 150/ms`},y={};r.forEach(v=>{y[v]=x[v]||`[Traduction ${v}] ${t}`}),o(y),d(!1)},p=x=>{navigator.clipboard.writeText(s[x]),c(x),setTimeout(()=>c(null),2e3)},f=x=>Lh.find(y=>y.code===x);return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsx("div",{style:{marginBottom:"32px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(ay,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Traduction multi-langue"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Traduisez vos annonces pour les acheteurs internationaux"})]})]})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"20px"},children:""}),n.jsx("h3",{style:{fontSize:"15px",fontWeight:"600"},children:"Franais (original)"})]})}),n.jsx("textarea",{value:t,onChange:x=>e(x.target.value),placeholder:"Collez votre description d'annonce ici...",style:{width:"100%",minHeight:"300px",padding:"16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"12px",color:"var(--text-primary)",fontSize:"14px",lineHeight:"1.6",resize:"vertical",fontFamily:"inherit"}}),n.jsxs("div",{style:{marginTop:"20px"},children:[n.jsx("h4",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"12px",color:"var(--text-muted)"},children:"TRADUIRE EN :"}),n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Lh.map(x=>n.jsxs("button",{onClick:()=>u(x.code),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:r.includes(x.code)?"rgba(212, 175, 55, 0.1)":"var(--bg-tertiary)",border:"1px solid "+(r.includes(x.code)?"var(--gold)":"var(--border-color)"),borderRadius:"8px",color:r.includes(x.code)?"var(--gold)":"var(--text-secondary)",fontSize:"13px",cursor:"pointer"},children:[n.jsx("span",{children:x.flag}),n.jsx("span",{children:x.name}),r.includes(x.code)&&n.jsx(re,{size:14})]},x.code))})]}),n.jsx("button",{onClick:h,disabled:a||r.length===0,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"16px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"12px",color:"var(--bg-primary)",fontSize:"15px",fontWeight:"600",cursor:a?"wait":"pointer",marginTop:"20px"},children:a?n.jsxs(n.Fragment,{children:[n.jsx(Ie,{size:20,style:{animation:"spin 1s linear infinite"}}),"Traduction en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(He,{size:20}),"Traduire (",r.length," langues)"]})})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:r.length===0?n.jsxs("div",{style:{padding:"60px 20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",textAlign:"center"},children:[n.jsx(vi,{size:48,style:{color:"var(--text-muted)",opacity:.3,marginBottom:"16px"}}),n.jsx("p",{style:{color:"var(--text-muted)"},children:"Slectionnez des langues pour commencer"})]}):r.map(x=>{const y=f(x),v=s[x];return n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"20px"},children:y==null?void 0:y.flag}),n.jsx("h3",{style:{fontSize:"14px",fontWeight:"600"},children:y==null?void 0:y.name})]}),v&&n.jsxs("button",{onClick:()=>p(x),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:l===x?"#22c55e":"var(--bg-tertiary)",border:"1px solid "+(l===x?"#22c55e":"var(--border-color)"),borderRadius:"6px",color:l===x?"white":"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:[l===x?n.jsx(re,{size:14}):n.jsx(hr,{size:14}),l===x?"Copi !":"Copier"]})]}),v?n.jsx("div",{style:{padding:"14px",background:"var(--bg-tertiary)",borderRadius:"10px",fontSize:"13px",lineHeight:"1.6",color:"var(--text-secondary)",maxHeight:"200px",overflowY:"auto",whiteSpace:"pre-wrap"},children:s[x]}):n.jsx("div",{style:{padding:"30px",background:"var(--bg-tertiary)",borderRadius:"10px",textAlign:"center",color:"var(--text-muted)",fontSize:"13px"},children:'Cliquez sur "Traduire" pour gnrer'})]},x)})})]}),n.jsxs("div",{style:{marginTop:"24px",padding:"20px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.02) 100%)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"16px",display:"flex",alignItems:"start",gap:"16px"},children:[n.jsx(vi,{size:24,style:{color:"#3b82f6",flexShrink:0}}),n.jsxs("div",{children:[n.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:"Conseil pour les acheteurs internationaux"}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",lineHeight:"1.6"},children:"En publiant vos annonces en plusieurs langues, vous touchez les acheteurs trangers qui reprsentent jusqu' 30% des transactions sur la Cte d'Azur et aux Antilles. Les acheteurs anglais, allemands et russes sont particulirement actifs sur le march du luxe."})]})]}),n.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
      `})]})}const Fl="csx_followup_sequences",Dh=[{id:"welcome",name:"Bienvenue",description:"Squence d'accueil pour les nouveaux leads",trigger:"new_lead",active:!1,steps:[{delay:0,type:"email",subject:"Bienvenue chez CSX Immobilier",content:"Merci pour votre intrt..."},{delay:1,type:"email",subject:"Avez-vous des questions ?",content:"Je me permets de revenir vers vous..."},{delay:3,type:"sms",content:"Bonjour, avez-vous eu le temps de consulter nos biens ?"}]},{id:"visit_reminder",name:"Rappel visite",description:"Rappels avant et aprs une visite",trigger:"visit_scheduled",active:!1,steps:[{delay:-1,type:"sms",content:"Rappel: Votre visite est prvue demain.  bientt !"},{delay:1,type:"email",subject:"Comment s'est passe la visite ?",content:"Suite  notre rencontre..."}]}],hy=[{value:"new_lead",label:"Nouveau lead"},{value:"visit_scheduled",label:"Visite planifie"},{value:"inactive_7_days",label:"Inactif 7 jours"},{value:"inactive_30_days",label:"Inactif 30 jours"},{value:"manual",label:"Dclenchement manuel"}];function fS(){const[t,e]=w.useState([]),[r,i]=w.useState(null),[s,o]=w.useState(!1),[a,d]=w.useState(null);w.useEffect(()=>{const f=localStorage.getItem(Fl);f?e(JSON.parse(f)):(e(Dh),localStorage.setItem(Fl,JSON.stringify(Dh)))},[]);const l=f=>{e(f),localStorage.setItem(Fl,JSON.stringify(f))},c=f=>{const x=t.map(y=>y.id===f?{...y,active:!y.active}:y);l(x)},u=f=>{if(confirm("Supprimer cette squence ?")){const x=t.filter(y=>y.id!==f);l(x),(r==null?void 0:r.id)===f&&i(null)}},h=f=>{if(a){const x=t.map(y=>y.id===a.id?{...f,id:y.id}:y);l(x)}else{const x={...f,id:`seq_${Date.now()}`,active:!1};l([...t,x])}o(!1),d(null)},p=t.filter(f=>f.active);return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsx("div",{style:{marginBottom:"32px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(xn,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Relances automatiques"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Crez des squences de suivi pour vos leads"})]})]}),n.jsxs("button",{onClick:()=>{d(null),o(!0)},style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[n.jsx($t,{size:18}),"Nouvelle squence"]})]})}),n.jsxs("div",{style:{padding:"16px 20px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"12px",marginBottom:"24px",display:"flex",alignItems:"flex-start",gap:"12px"},children:[n.jsx(Ei,{size:20,style:{color:"#3b82f6",flexShrink:0,marginTop:"2px"}}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#3b82f6",marginBottom:"4px"},children:"Planificateur de squences"}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",lineHeight:"1.5"},children:"Crez et organisez vos squences de relance ici. Pour l'envoi automatique d'emails et SMS, une intgration avec SendGrid (email) ou Twilio (SMS) sera ncessaire. Les squences sont sauvegardes localement."})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px",marginBottom:"24px"},children:[n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[n.jsx(xn,{size:16,style:{color:"var(--gold)"}}),n.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Squences"})]}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700"},children:t.length})]}),n.jsxs("div",{style:{padding:"20px",background:p.length>0?"rgba(34, 197, 94, 0.1)":"var(--bg-card)",border:`1px solid ${p.length>0?"rgba(34, 197, 94, 0.2)":"var(--border-color)"}`,borderRadius:"12px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[n.jsx(_n,{size:16,style:{color:"#22c55e"}}),n.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Actives"})]}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700",color:p.length>0?"#22c55e":"inherit"},children:p.length})]}),n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[n.jsx(Rt,{size:16,style:{color:"#3b82f6"}}),n.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"tapes email"})]}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700"},children:t.reduce((f,x)=>f+x.steps.filter(y=>y.type==="email").length,0)})]}),n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[n.jsx(kn,{size:16,style:{color:"#8b5cf6"}}),n.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"tapes SMS"})]}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700"},children:t.reduce((f,x)=>f+x.steps.filter(y=>y.type==="sms").length,0)})]})]}),n.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",overflow:"hidden"},children:[n.jsx("div",{style:{padding:"16px 20px",borderBottom:"1px solid var(--border-color)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600"},children:"Mes squences"})}),t.length===0?n.jsxs("div",{style:{padding:"60px 20px",textAlign:"center"},children:[n.jsx(xn,{size:40,style:{color:"var(--text-muted)",marginBottom:"16px",opacity:.5}}),n.jsx("p",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"8px"},children:"Aucune squence cre"}),n.jsx("p",{style:{fontSize:"14px",color:"var(--text-muted)",marginBottom:"20px"},children:"Crez votre premire squence de relance automatique"}),n.jsx("button",{onClick:()=>{d(null),o(!0)},style:{padding:"10px 20px",background:"var(--gold)",border:"none",borderRadius:"8px",color:"var(--bg-primary)",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Crer une squence"})]}):n.jsx("div",{children:t.map((f,x)=>{var y;return n.jsx("div",{style:{padding:"20px",borderBottom:x<t.length-1?"1px solid var(--border-color)":"none"},children:n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[n.jsx("h4",{style:{fontSize:"15px",fontWeight:"600"},children:f.name}),n.jsx("span",{style:{padding:"3px 8px",background:f.active?"rgba(34, 197, 94, 0.15)":"var(--bg-tertiary)",color:f.active?"#22c55e":"var(--text-muted)",borderRadius:"4px",fontSize:"11px",fontWeight:"500"},children:f.active?"Active":"Inactive"})]}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)",marginBottom:"10px"},children:f.description}),n.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px",color:"var(--text-muted)"},children:[n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(ct,{size:12}),"Dclencheur: ",(y=hy.find(v=>v.value===f.trigger))==null?void 0:y.label]}),n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(Rn,{size:12}),f.steps.length," tape(s)"]})]}),n.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"12px",flexWrap:"wrap"},children:f.steps.map((v,g)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 10px",background:"var(--bg-tertiary)",borderRadius:"6px",fontSize:"11px"},children:[v.type==="email"?n.jsx(Rt,{size:12,style:{color:"#3b82f6"}}):n.jsx(kn,{size:12,style:{color:"#8b5cf6"}}),n.jsxs("span",{children:["J",v.delay>=0?"+":"",v.delay]})]},g))})]}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{onClick:()=>c(f.id),style:{padding:"8px",background:f.active?"rgba(239, 68, 68, 0.1)":"rgba(34, 197, 94, 0.1)",border:"none",borderRadius:"6px",color:f.active?"#ef4444":"#22c55e",cursor:"pointer"},title:f.active?"Dsactiver":"Activer",children:f.active?n.jsx(Pu,{size:16}):n.jsx(_n,{size:16})}),n.jsx("button",{onClick:()=>{d(f),o(!0)},style:{padding:"8px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"6px",color:"var(--text-secondary)",cursor:"pointer"},children:n.jsx(Is,{size:16})}),n.jsx("button",{onClick:()=>u(f.id),style:{padding:"8px",background:"rgba(239, 68, 68, 0.1)",border:"none",borderRadius:"6px",color:"#ef4444",cursor:"pointer"},children:n.jsx(Et,{size:16})})]})]})},f.id)})})]}),s&&n.jsx(gS,{sequence:a,onSave:h,onClose:()=>{o(!1),d(null)}})]})}function gS({sequence:t,onSave:e,onClose:r}){const[i,s]=w.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",trigger:(t==null?void 0:t.trigger)||"new_lead",steps:(t==null?void 0:t.steps)||[{delay:0,type:"email",subject:"",content:""}]}),o=()=>{const c=i.steps.length>0?i.steps[i.steps.length-1].delay:0;s({...i,steps:[...i.steps,{delay:c+1,type:"email",subject:"",content:""}]})},a=(c,u,h)=>{const p=[...i.steps];p[c]={...p[c],[u]:h},s({...i,steps:p})},d=c=>{s({...i,steps:i.steps.filter((u,h)=>h!==c)})},l=c=>{if(c.preventDefault(),!i.name||i.steps.length===0){alert("Veuillez remplir le nom et ajouter au moins une tape");return}e(i)};return n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:n.jsxs("div",{style:{width:"100%",maxWidth:"600px",background:"var(--bg-card)",borderRadius:"16px",maxHeight:"90vh",overflow:"auto"},children:[n.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid var(--border-color)",display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,background:"var(--bg-card)",zIndex:1},children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600"},children:t?"Modifier la squence":"Nouvelle squence"}),n.jsx("button",{onClick:r,style:{padding:"8px",background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:n.jsx(Nt,{size:20})})]}),n.jsxs("form",{onSubmit:l,style:{padding:"20px",display:"flex",flexDirection:"column",gap:"20px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Nom de la squence *"}),n.jsx("input",{type:"text",value:i.name,onChange:c=>s({...i,name:c.target.value}),placeholder:"Ex: Bienvenue nouveaux leads",style:{width:"100%",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Description"}),n.jsx("input",{type:"text",value:i.description,onChange:c=>s({...i,description:c.target.value}),placeholder:"Description de la squence...",style:{width:"100%",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Dclencheur"}),n.jsx("select",{value:i.trigger,onChange:c=>s({...i,trigger:c.target.value}),style:{width:"100%",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"},children:hy.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[n.jsx("label",{style:{fontSize:"13px",fontWeight:"500"},children:"tapes"}),n.jsxs("button",{type:"button",onClick:o,style:{display:"flex",alignItems:"center",gap:"4px",padding:"6px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"6px",color:"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:[n.jsx($t,{size:14})," Ajouter"]})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:i.steps.map((c,u)=>n.jsxs("div",{style:{padding:"14px",background:"var(--bg-tertiary)",borderRadius:"10px",borderLeft:`3px solid ${c.type==="email"?"#3b82f6":"#8b5cf6"}`},children:[n.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[n.jsxs("select",{value:c.type,onChange:h=>a(u,"type",h.target.value),style:{padding:"8px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"6px",color:"var(--text-primary)",fontSize:"13px"},children:[n.jsx("option",{value:"email",children:"Email"}),n.jsx("option",{value:"sms",children:"SMS"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Jour"}),n.jsx("input",{type:"number",value:c.delay,onChange:h=>a(u,"delay",parseInt(h.target.value)||0),style:{width:"60px",padding:"8px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"6px",color:"var(--text-primary)",fontSize:"13px",textAlign:"center"}})]}),n.jsx("div",{style:{flex:1}}),n.jsx("button",{type:"button",onClick:()=>d(u),style:{padding:"6px",background:"transparent",border:"none",color:"#ef4444",cursor:"pointer"},children:n.jsx(Et,{size:14})})]}),c.type==="email"&&n.jsx("input",{type:"text",value:c.subject||"",onChange:h=>a(u,"subject",h.target.value),placeholder:"Objet de l'email",style:{width:"100%",padding:"8px",marginBottom:"8px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"6px",color:"var(--text-primary)",fontSize:"13px"}}),n.jsx("textarea",{value:c.content||"",onChange:h=>a(u,"content",h.target.value),placeholder:c.type==="email"?"Contenu de l'email...":"Message SMS...",rows:2,style:{width:"100%",padding:"8px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"6px",color:"var(--text-primary)",fontSize:"13px",resize:"vertical"}})]},u))})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[n.jsx("button",{type:"button",onClick:r,style:{flex:1,padding:"14px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Annuler"}),n.jsxs("button",{type:"submit",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"14px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[n.jsx(dy,{size:18}),"Enregistrer"]})]})]})]})})}const fc=[{id:"visit",label:"Visite",color:"#3b82f6",icon:tr},{id:"call",label:"Appel",color:"#22c55e",icon:Ps},{id:"video",label:"Visio",color:"#8b5cf6",icon:xw},{id:"meeting",label:"RDV",color:"var(--gold)",icon:$r}],gc=[];for(let t=8;t<=20;t++)gc.push(`${t.toString().padStart(2,"0")}:00`),gc.push(`${t.toString().padStart(2,"0")}:30`);const Nh="csx_calendar_events";function xS(){const[t,e]=w.useState(new Date),[r,i]=w.useState(new Date),[s,o]=w.useState([]),[a,d]=w.useState(!1),[l,c]=w.useState(null),[u,h]=w.useState(null),[p,f]=w.useState(!1),[x,y]=w.useState(!0);w.useEffect(()=>{(async()=>{try{const{data:{user:A}}=await G.auth.getUser();A&&h(A.id);const O=localStorage.getItem(Nh);if(O){const _=JSON.parse(O).map(N=>({...N,date:new Date(N.date)}));o(_)}}catch(A){console.error("Error loading events:",A)}finally{y(!1)}})()},[]),w.useEffect(()=>{x||localStorage.setItem(Nh,JSON.stringify(s))},[s,x]);const v=E=>{const A=E.getFullYear(),O=E.getMonth(),W=new Date(A,O,1),_=new Date(A,O+1,0),N=[],q=W.getDay()===0?6:W.getDay()-1;for(let z=0;z<q;z++)N.push(null);for(let z=1;z<=_.getDate();z++)N.push(new Date(A,O,z));return N},g=E=>E?s.filter(A=>A.date.toDateString()===E.toDateString()).sort((A,O)=>A.time.localeCompare(O.time)):[],m=E=>E.toLocaleDateString("fr-FR",{month:"long",year:"numeric"}),b=E=>{const A=new Date(t);A.setMonth(A.getMonth()+E),e(A)},j=E=>{if(l)o(A=>A.map(O=>O.id===l.id?{...E,id:O.id,date:new Date(E.date)}:O));else{const A={...E,id:Date.now(),date:new Date(E.date)};o(O=>[...O,A])}d(!1),c(null)},R=E=>{confirm("Supprimer ce rendez-vous ?")&&o(A=>A.filter(O=>O.id!==E))},T=E=>{c(E),d(!0)},k=`${window.location.origin}/book/${(u==null?void 0:u.slice(0,8))||"agent"}`,P=async()=>{try{await navigator.clipboard.writeText(k),f(!0),setTimeout(()=>f(!1),2e3)}catch(E){console.error("Copy failed:",E)}};g(new Date);const I=g(r);return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsx("div",{style:{marginBottom:"32px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(ct,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Calendrier"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Grez vos rendez-vous et visites"})]})]}),n.jsxs("button",{onClick:()=>{c(null),d(!0)},style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[n.jsx($t,{size:18}),"Nouveau RDV"]})]})}),n.jsxs("div",{style:{padding:"16px 20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(Sn,{size:18,style:{color:"var(--gold)"}}),n.jsx("span",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"Lien de rservation ( partager avec vos clients)"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("code",{style:{padding:"8px 12px",background:"var(--bg-tertiary)",borderRadius:"6px",fontSize:"12px",color:"var(--text-muted)"},children:k}),n.jsxs("button",{onClick:P,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:p?"rgba(34, 197, 94, 0.1)":"var(--bg-tertiary)",border:`1px solid ${p?"rgba(34, 197, 94, 0.2)":"var(--border-color)"}`,borderRadius:"6px",color:p?"#22c55e":"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:[p?n.jsx(re,{size:14}):n.jsx(hr,{size:14}),p?"Copi":"Copier"]})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 380px",gap:"24px"},children:[n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[n.jsx("button",{onClick:()=>b(-1),style:{padding:"8px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-secondary)",cursor:"pointer"},children:n.jsx(ka,{size:20})}),n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",textTransform:"capitalize"},children:m(t)}),n.jsx("button",{onClick:()=>b(1),style:{padding:"8px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-secondary)",cursor:"pointer"},children:n.jsx(wn,{size:20})})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"8px"},children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(E=>n.jsx("div",{style:{textAlign:"center",padding:"8px",fontSize:"12px",fontWeight:"600",color:"var(--text-muted)"},children:E},E))}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},children:v(t).map((E,A)=>{const O=E?g(E):[],W=E&&E.toDateString()===new Date().toDateString(),_=E&&E.toDateString()===r.toDateString();return n.jsx("div",{onClick:()=>E&&i(E),style:{aspectRatio:"1",padding:"4px",background:_?"var(--gold)":W?"rgba(212, 175, 55, 0.1)":"transparent",border:W&&!_?"1px solid var(--gold)":"1px solid transparent",borderRadius:"8px",cursor:E?"pointer":"default",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",gap:"2px"},children:E&&n.jsxs(n.Fragment,{children:[n.jsx("span",{style:{fontSize:"14px",fontWeight:W||_?"600":"400",color:_?"var(--bg-primary)":"var(--text-primary)"},children:E.getDate()}),O.length>0&&n.jsx("div",{style:{display:"flex",gap:"2px"},children:O.slice(0,3).map((N,q)=>{const z=fc.find(S=>S.id===N.type);return n.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:(z==null?void 0:z.color)||"var(--gold)"}},q)})})]})},A)})})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"20px"},children:r.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})}),I.length===0?n.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"var(--text-muted)"},children:[n.jsx(ct,{size:32,style:{marginBottom:"12px",opacity:.5}}),n.jsx("p",{style:{fontSize:"14px"},children:"Aucun rendez-vous ce jour"}),n.jsx("button",{onClick:()=>{c(null),d(!0)},style:{marginTop:"12px",padding:"8px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer"},children:"+ Ajouter un RDV"})]}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:I.map(E=>{var W;const A=fc.find(_=>_.id===E.type),O=(A==null?void 0:A.icon)||ct;return n.jsxs("div",{style:{padding:"16px",background:"var(--bg-tertiary)",borderRadius:"12px",borderLeft:`4px solid ${(A==null?void 0:A.color)||"var(--gold)"}`},children:[n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(O,{size:16,style:{color:A==null?void 0:A.color}}),n.jsx("span",{style:{fontWeight:"600",fontSize:"14px"},children:E.title})]}),n.jsxs("div",{style:{display:"flex",gap:"4px"},children:[n.jsx("button",{onClick:()=>T(E),style:{padding:"4px",background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:n.jsx(Is,{size:14})}),n.jsx("button",{onClick:()=>R(E.id),style:{padding:"4px",background:"transparent",border:"none",color:"#ef4444",cursor:"pointer"},children:n.jsx(Et,{size:14})})]})]}),n.jsxs("div",{style:{fontSize:"12px",color:"var(--text-muted)",display:"flex",flexDirection:"column",gap:"4px"},children:[n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(Rn,{size:12})," ",E.time," (",E.duration||30," min)"]}),((W=E.client)==null?void 0:W.name)&&n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx($r,{size:12})," ",E.client.name]}),E.address&&n.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(it,{size:12})," ",E.address]})]})]},E.id)})})]})]}),a&&n.jsx(mS,{event:l,selectedDate:r,onSave:j,onClose:()=>{d(!1),c(null)}}),n.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
      `})]})}function mS({event:t,selectedDate:e,onSave:r,onClose:i}){var d;const[s,o]=w.useState({title:(t==null?void 0:t.title)||"",type:(t==null?void 0:t.type)||"visit",date:((d=t==null?void 0:t.date)==null?void 0:d.toISOString().split("T")[0])||e.toISOString().split("T")[0],time:(t==null?void 0:t.time)||"10:00",duration:(t==null?void 0:t.duration)||60,client:(t==null?void 0:t.client)||{name:"",phone:"",email:""},address:(t==null?void 0:t.address)||"",notes:(t==null?void 0:t.notes)||""}),a=l=>{if(l.preventDefault(),!s.title||!s.date||!s.time){alert("Veuillez remplir les champs obligatoires");return}r(s)};return n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:n.jsxs("div",{style:{width:"100%",maxWidth:"500px",background:"var(--bg-card)",borderRadius:"16px",maxHeight:"90vh",overflow:"auto"},children:[n.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid var(--border-color)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600"},children:t?"Modifier le RDV":"Nouveau rendez-vous"}),n.jsx("button",{onClick:i,style:{padding:"8px",background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:n.jsx(Nt,{size:20})})]}),n.jsxs("form",{onSubmit:a,style:{padding:"20px",display:"flex",flexDirection:"column",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Titre *"}),n.jsx("input",{type:"text",value:s.title,onChange:l=>o({...s,title:l.target.value}),placeholder:"Ex: Visite appartement T3",style:{width:"100%",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Type"}),n.jsx("div",{style:{display:"flex",gap:"8px"},children:fc.map(l=>n.jsx("button",{type:"button",onClick:()=>o({...s,type:l.id}),style:{flex:1,padding:"10px",background:s.type===l.id?l.color:"var(--bg-tertiary)",border:"1px solid "+(s.type===l.id?l.color:"var(--border-color)"),borderRadius:"8px",color:s.type===l.id?"white":"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:l.label},l.id))})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Date *"}),n.jsx("input",{type:"date",value:s.date,onChange:l=>o({...s,date:l.target.value}),style:{width:"100%",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Heure *"}),n.jsx("select",{value:s.time,onChange:l=>o({...s,time:l.target.value}),style:{width:"100%",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"},children:gc.map(l=>n.jsx("option",{value:l,children:l},l))})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Dure"}),n.jsxs("select",{value:s.duration,onChange:l=>o({...s,duration:parseInt(l.target.value)}),style:{width:"100%",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"},children:[n.jsx("option",{value:15,children:"15 min"}),n.jsx("option",{value:30,children:"30 min"}),n.jsx("option",{value:45,children:"45 min"}),n.jsx("option",{value:60,children:"1h"}),n.jsx("option",{value:90,children:"1h30"}),n.jsx("option",{value:120,children:"2h"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Client"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[n.jsx("input",{type:"text",value:s.client.name,onChange:l=>o({...s,client:{...s.client,name:l.target.value}}),placeholder:"Nom",style:{padding:"10px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"13px"}}),n.jsx("input",{type:"tel",value:s.client.phone,onChange:l=>o({...s,client:{...s.client,phone:l.target.value}}),placeholder:"Tlphone",style:{padding:"10px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"13px"}})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Adresse"}),n.jsx("input",{type:"text",value:s.address,onChange:l=>o({...s,address:l.target.value}),placeholder:"Lieu du rendez-vous",style:{width:"100%",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Notes"}),n.jsx("textarea",{value:s.notes,onChange:l=>o({...s,notes:l.target.value}),placeholder:"Notes internes...",rows:3,style:{width:"100%",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px",resize:"vertical"}})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[n.jsx("button",{type:"button",onClick:i,style:{flex:1,padding:"14px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Annuler"}),n.jsx("button",{type:"submit",style:{flex:1,padding:"14px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:t?"Enregistrer":"Crer le RDV"})]})]})]})})}const yS=[{id:1,name:"Marie Dupont",email:"marie.dupont@email.com",phone:"06 12 34 56 78",portalActive:!0,lastLogin:"2024-01-15 14:30",savedProperties:5,viewedProperties:12,scheduledVisits:2,documents:3,status:"active"},{id:2,name:"Jean Martin",email:"jean.martin@email.com",phone:"06 98 76 54 32",portalActive:!0,lastLogin:"2024-01-14 10:15",savedProperties:3,viewedProperties:8,scheduledVisits:1,documents:1,status:"active"},{id:3,name:"Sophie Bernard",email:"sophie.b@email.com",phone:"06 55 44 33 22",portalActive:!1,lastLogin:null,savedProperties:0,viewedProperties:0,scheduledVisits:0,documents:0,status:"pending"}];function vS(){const[t,e]=w.useState(yS),[r,i]=w.useState(""),[s,o]=w.useState(null),[a,d]=w.useState(!1),[l,c]=w.useState(""),u=t.filter(f=>f.name.toLowerCase().includes(r.toLowerCase())||f.email.toLowerCase().includes(r.toLowerCase())),h=f=>{const x=`${window.location.origin}/portal/${f}`;navigator.clipboard.writeText(x),alert("Lien copi !")},p=()=>{l&&(alert(`Invitation envoye  ${l}`),d(!1),c(""))};return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsx("div",{style:{marginBottom:"32px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(xt,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Portail Client"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Grez l'accs de vos clients  leur espace personnel"})]})]}),n.jsxs("button",{onClick:()=>d(!0),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"var(--gold)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontWeight:"600",fontSize:"14px",cursor:"pointer"},children:[n.jsx($t,{size:18}),"Inviter un client"]})]})}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:[{label:"Clients actifs",value:t.filter(f=>f.portalActive).length,icon:xt,color:"#22c55e"},{label:"Invitations en attente",value:t.filter(f=>!f.portalActive).length,icon:Rn,color:"#f97316"},{label:"Proprits sauvegardes",value:t.reduce((f,x)=>f+x.savedProperties,0),icon:Ll,color:"#ef4444"},{label:"Visites planifies",value:t.reduce((f,x)=>f+x.scheduledVisits,0),icon:ct,color:"var(--gold)"}].map((f,x)=>n.jsx("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",background:`${f.color}15`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(f.icon,{size:20,style:{color:f.color}})}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"24px",fontWeight:"700"},children:f.value}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:f.label})]})]})},x))}),n.jsx("div",{style:{display:"flex",gap:"12px",marginBottom:"24px"},children:n.jsxs("div",{style:{flex:1,position:"relative"},children:[n.jsx(En,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"text",placeholder:"Rechercher un client...",value:r,onChange:f=>i(f.target.value),style:{width:"100%",padding:"14px 14px 14px 44px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px"}})]})}),n.jsx("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",overflow:"hidden"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.jsx("th",{style:{padding:"16px 20px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase"},children:"Client"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase"},children:"Statut"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase"},children:"Favoris"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase"},children:"Visites"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase"},children:"Documents"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase"},children:"Dernire connexion"}),n.jsx("th",{style:{padding:"16px 20px",textAlign:"right",fontSize:"12px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase"},children:"Actions"})]})}),n.jsx("tbody",{children:u.map((f,x)=>n.jsxs("tr",{style:{borderBottom:x<u.length-1?"1px solid var(--border-color)":"none"},children:[n.jsx("td",{style:{padding:"16px 20px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--gold)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--bg-primary)",fontWeight:"700",fontSize:"14px"},children:f.name.split(" ").map(y=>y[0]).join("")}),n.jsxs("div",{children:[n.jsx("p",{style:{fontWeight:"600",fontSize:"14px"},children:f.name}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:f.email})]})]})}),n.jsx("td",{style:{padding:"16px 20px",textAlign:"center"},children:n.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",background:f.portalActive?"rgba(34, 197, 94, 0.1)":"rgba(249, 115, 22, 0.1)",color:f.portalActive?"#22c55e":"#f97316"},children:f.portalActive?"Actif":"En attente"})}),n.jsx("td",{style:{padding:"16px 20px",textAlign:"center"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[n.jsx(Ll,{size:14,style:{color:"#ef4444"}}),n.jsx("span",{style:{fontWeight:"600"},children:f.savedProperties})]})}),n.jsx("td",{style:{padding:"16px 20px",textAlign:"center"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[n.jsx(ct,{size:14,style:{color:"var(--gold)"}}),n.jsx("span",{style:{fontWeight:"600"},children:f.scheduledVisits})]})}),n.jsx("td",{style:{padding:"16px 20px",textAlign:"center"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[n.jsx(Yt,{size:14,style:{color:"#3b82f6"}}),n.jsx("span",{style:{fontWeight:"600"},children:f.documents})]})}),n.jsx("td",{style:{padding:"16px 20px",textAlign:"center",fontSize:"13px",color:"var(--text-muted)"},children:f.lastLogin||"-"}),n.jsx("td",{style:{padding:"16px 20px",textAlign:"right"},children:n.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[n.jsx("button",{onClick:()=>h(f.id),title:"Copier le lien",style:{width:"32px",height:"32px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-muted)"},children:n.jsx(Sn,{size:14})}),n.jsx("button",{title:"Envoyer un message",style:{width:"32px",height:"32px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-muted)"},children:n.jsx(kn,{size:14})})]})})]},f.id))})]})}),n.jsxs("div",{style:{marginTop:"24px",padding:"24px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.02) 100%)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Fonctionnalits du portail client"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:[{icon:Ll,label:"Sauvegarder des favoris",desc:"Vos clients peuvent sauvegarder les biens qui les intressent"},{icon:ct,label:"Planifier des visites",desc:"Rservation directe de crneaux disponibles"},{icon:Yt,label:"Accs aux documents",desc:"Mandats, diagnostics, plans accessibles 24/7"},{icon:Yr,label:"Historique de visites",desc:"Retrouver tous les biens visits avec notes"}].map((f,x)=>n.jsxs("div",{style:{padding:"16px",background:"var(--bg-card)",borderRadius:"10px"},children:[n.jsx(f.icon,{size:20,style:{color:"var(--gold)",marginBottom:"8px"}}),n.jsx("p",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"4px"},children:f.label}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:f.desc})]},x))})]}),a&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>d(!1),children:n.jsxs("div",{style:{width:"450px",background:"var(--bg-card)",borderRadius:"16px",overflow:"hidden"},onClick:f=>f.stopPropagation(),children:[n.jsx("div",{style:{padding:"24px",borderBottom:"1px solid var(--border-color)"},children:n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600"},children:"Inviter un client"})}),n.jsxs("div",{style:{padding:"24px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Email du client"}),n.jsx("input",{type:"email",value:l,onChange:f=>c(f.target.value),placeholder:"client@email.com",style:{width:"100%",padding:"14px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px"}}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"8px"},children:"Le client recevra un email avec un lien pour crer son compte et accder  son espace personnel."})]}),n.jsxs("div",{style:{padding:"16px 24px",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[n.jsx("button",{onClick:()=>d(!1),style:{padding:"10px 20px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px",cursor:"pointer"},children:"Annuler"}),n.jsxs("button",{onClick:p,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",background:"var(--gold)",border:"none",borderRadius:"8px",color:"var(--bg-primary)",fontWeight:"600",fontSize:"14px",cursor:"pointer"},children:[n.jsx(As,{size:16}),"Envoyer l'invitation"]})]})]})})]})}const Mh="csx_reviews",Bh="csx_review_clients",$h=[{id:"google",name:"Google",color:"#4285f4",icon:""},{id:"facebook",name:"Facebook",color:"#1877f2",icon:""},{id:"internal",name:"Interne",color:"var(--gold)",icon:""}];function bS(){const[t,e]=w.useState([]),[r,i]=w.useState([]),[s,o]=w.useState(!1),[a,d]=w.useState(!1),[l,c]=w.useState({name:"",email:"",phone:""}),[u,h]=w.useState({client:"",rating:5,platform:"internal",comment:""}),[p,f]=w.useState(!1),[x,y]=w.useState(!0),[v,g]=w.useState(null);w.useEffect(()=>{(async()=>{try{const{data:{user:N}}=await G.auth.getUser();N&&g(N.id);const q=localStorage.getItem(Mh);q&&e(JSON.parse(q));const z=localStorage.getItem(Bh);z&&i(JSON.parse(z))}catch(N){console.error("Error loading data:",N)}finally{y(!1)}})()},[]);const m=_=>{e(_),localStorage.setItem(Mh,JSON.stringify(_))},b=_=>{i(_),localStorage.setItem(Bh,JSON.stringify(_))},j={avgRating:t.length>0?(t.reduce((_,N)=>_+N.rating,0)/t.length).toFixed(1):"-",totalReviews:t.length,pendingRequests:r.filter(_=>!_.reviewReceived).length,fiveStars:t.filter(_=>_.rating===5).length},R=_=>{if(_.preventDefault(),!l.name||!l.email){alert("Veuillez remplir le nom et l'email");return}const N={...l,id:Date.now(),addedAt:new Date().toISOString(),requestSent:!1,reviewReceived:!1};b([...r,N]),c({name:"",email:"",phone:""}),o(!1)},T=_=>{const N=r.map(q=>q.id===_?{...q,requestSent:!0,requestSentAt:new Date().toISOString()}:q);b(N),alert("Demande d'avis marque comme envoye. Envoyez manuellement l'email avec le lien ci-dessous.")},k=_=>{if(_.preventDefault(),!u.client||!u.comment){alert("Veuillez remplir tous les champs");return}const N={...u,id:Date.now(),date:new Date().toISOString()};m([N,...t]);const q=r.map(z=>z.name===u.client?{...z,reviewReceived:!0}:z);b(q),h({client:"",rating:5,platform:"internal",comment:""}),d(!1)},P=_=>{confirm("Supprimer cet avis ?")&&m(t.filter(N=>N.id!==_))},I=_=>{confirm("Supprimer ce client ?")&&b(r.filter(N=>N.id!==_))},E=`${window.location.origin}/review/${(v==null?void 0:v.slice(0,8))||"agent"}`,A=async()=>{try{await navigator.clipboard.writeText(E),f(!0),setTimeout(()=>f(!1),2e3)}catch(_){console.error("Copy failed:",_)}},O=_=>`Bonjour ${_.name},

Merci d'avoir fait appel  nos services pour votre projet immobilier.

Votre avis compte beaucoup pour nous ! Pourriez-vous prendre quelques instants pour partager votre exprience ?

Laissez votre avis ici : ${E}

Merci beaucoup,
Votre agent CSX Immobilier`,W=async _=>{try{await navigator.clipboard.writeText(O(_)),alert("Template d'email copi !")}catch(N){console.error("Copy failed:",N)}};return x?n.jsx("div",{style:{padding:"60px",textAlign:"center"},children:n.jsx(Ie,{size:32,style:{color:"var(--gold)",animation:"spin 1s linear infinite"}})}):n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsx("div",{style:{marginBottom:"32px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Jt,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Collecte d'avis"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Grez et collectez les avis de vos clients"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsxs("button",{onClick:()=>o(!0),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:[n.jsx(xt,{size:18}),"Ajouter client"]}),n.jsxs("button",{onClick:()=>d(!0),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[n.jsx($t,{size:18}),"Ajouter avis"]})]})]})}),n.jsxs("div",{style:{padding:"16px 20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(Jt,{size:18,style:{color:"var(--gold)"}}),n.jsx("span",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"Lien de collecte d'avis ( partager)"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("code",{style:{padding:"8px 12px",background:"var(--bg-tertiary)",borderRadius:"6px",fontSize:"12px",color:"var(--text-muted)"},children:E}),n.jsxs("button",{onClick:A,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:p?"rgba(34, 197, 94, 0.1)":"var(--bg-tertiary)",border:`1px solid ${p?"rgba(34, 197, 94, 0.2)":"var(--border-color)"}`,borderRadius:"6px",color:p?"#22c55e":"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:[p?n.jsx(re,{size:14}):n.jsx(hr,{size:14}),p?"Copi":"Copier"]})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px",marginBottom:"24px"},children:[n.jsxs("div",{style:{padding:"20px",background:"rgba(212, 175, 55, 0.1)",border:"1px solid rgba(212, 175, 55, 0.2)",borderRadius:"12px",textAlign:"center"},children:[n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",marginBottom:"8px"},children:[1,2,3,4,5].map(_=>n.jsx(Jt,{size:14,fill:"var(--gold)",color:"var(--gold)"},_))}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700",color:"var(--gold)"},children:j.avgRating}),n.jsx("p",{style:{fontSize:"11px",color:"var(--text-muted)"},children:"Note moyenne"})]}),n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",textAlign:"center"},children:[n.jsx(kn,{size:20,style:{color:"#3b82f6",marginBottom:"8px"}}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700"},children:j.totalReviews}),n.jsx("p",{style:{fontSize:"11px",color:"var(--text-muted)"},children:"Avis collects"})]}),n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",textAlign:"center"},children:[n.jsx(As,{size:20,style:{color:"#f59e0b",marginBottom:"8px"}}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700"},children:j.pendingRequests}),n.jsx("p",{style:{fontSize:"11px",color:"var(--text-muted)"},children:"En attente"})]}),n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",textAlign:"center"},children:[n.jsx($j,{size:20,style:{color:"#22c55e",marginBottom:"8px"}}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700"},children:j.fiveStars}),n.jsx("p",{style:{fontSize:"11px",color:"var(--text-muted)"},children:"5 toiles"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[n.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",overflow:"hidden"},children:[n.jsx("div",{style:{padding:"16px 20px",borderBottom:"1px solid var(--border-color)"},children:n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600"},children:"Clients  solliciter"})}),r.length===0?n.jsxs("div",{style:{padding:"40px 20px",textAlign:"center"},children:[n.jsx(xt,{size:32,style:{color:"var(--text-muted)",marginBottom:"12px",opacity:.5}}),n.jsx("p",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"Ajoutez des clients pour leur demander un avis"})]}):n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:r.map(_=>n.jsxs("div",{style:{padding:"14px 20px",borderBottom:"1px solid var(--border-color)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"2px"},children:_.name}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:_.email}),_.requestSent&&n.jsx("span",{style:{display:"inline-block",marginTop:"4px",padding:"2px 6px",background:_.reviewReceived?"rgba(34, 197, 94, 0.1)":"rgba(245, 158, 11, 0.1)",color:_.reviewReceived?"#22c55e":"#f59e0b",borderRadius:"4px",fontSize:"10px"},children:_.reviewReceived?" Avis reu":"Demande envoye"})]}),n.jsxs("div",{style:{display:"flex",gap:"6px"},children:[n.jsx("button",{onClick:()=>W(_),title:"Copier l'email",style:{padding:"6px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"4px",color:"var(--text-muted)",cursor:"pointer"},children:n.jsx(Rt,{size:14})}),!_.requestSent&&n.jsx("button",{onClick:()=>T(_.id),style:{padding:"6px 10px",background:"var(--gold)",border:"none",borderRadius:"4px",color:"var(--bg-primary)",fontSize:"11px",cursor:"pointer"},children:n.jsx(As,{size:12})}),n.jsx("button",{onClick:()=>I(_.id),style:{padding:"6px",background:"rgba(239, 68, 68, 0.1)",border:"none",borderRadius:"4px",color:"#ef4444",cursor:"pointer"},children:n.jsx(Et,{size:12})})]})]},_.id))})]}),n.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",overflow:"hidden"},children:[n.jsx("div",{style:{padding:"16px 20px",borderBottom:"1px solid var(--border-color)"},children:n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600"},children:"Avis reus"})}),t.length===0?n.jsxs("div",{style:{padding:"40px 20px",textAlign:"center"},children:[n.jsx(Jt,{size:32,style:{color:"var(--text-muted)",marginBottom:"12px",opacity:.5}}),n.jsx("p",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"Aucun avis collect pour le moment"})]}):n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:t.map(_=>{const N=$h.find(q=>q.id===_.platform);return n.jsxs("div",{style:{padding:"14px 20px",borderBottom:"1px solid var(--border-color)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[n.jsx("span",{style:{fontWeight:"500",fontSize:"14px"},children:_.client}),n.jsxs("span",{style:{padding:"2px 6px",background:`${N==null?void 0:N.color}20`,color:N==null?void 0:N.color,borderRadius:"4px",fontSize:"10px"},children:[N==null?void 0:N.icon," ",N==null?void 0:N.name]})]}),n.jsx("div",{style:{display:"flex",gap:"2px"},children:[1,2,3,4,5].map(q=>n.jsx(Jt,{size:12,fill:q<=_.rating?"var(--gold)":"transparent",color:q<=_.rating?"var(--gold)":"var(--text-muted)"},q))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"11px",color:"var(--text-muted)"},children:new Date(_.date).toLocaleDateString("fr-FR")}),n.jsx("button",{onClick:()=>P(_.id),style:{padding:"4px",background:"transparent",border:"none",color:"#ef4444",cursor:"pointer"},children:n.jsx(Et,{size:12})})]})]}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",lineHeight:"1.5"},children:_.comment})]},_.id)})})]})]}),s&&n.jsx(Fh,{title:"Ajouter un client",onClose:()=>o(!1),children:n.jsxs("form",{onSubmit:R,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Nom *"}),n.jsx("input",{type:"text",value:l.name,onChange:_=>c({...l,name:_.target.value}),placeholder:"Nom du client",style:Bi})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Email *"}),n.jsx("input",{type:"email",value:l.email,onChange:_=>c({...l,email:_.target.value}),placeholder:"email@example.com",style:Bi})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Tlphone"}),n.jsx("input",{type:"tel",value:l.phone,onChange:_=>c({...l,phone:_.target.value}),placeholder:"06 12 34 56 78",style:Bi})]}),n.jsx("button",{type:"submit",style:Wh,children:"Ajouter"})]})}),a&&n.jsx(Fh,{title:"Ajouter un avis",onClose:()=>d(!1),children:n.jsxs("form",{onSubmit:k,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Client *"}),n.jsx("input",{type:"text",value:u.client,onChange:_=>h({...u,client:_.target.value}),placeholder:"Nom du client",list:"clients-list",style:Bi}),n.jsx("datalist",{id:"clients-list",children:r.map(_=>n.jsx("option",{value:_.name},_.id))})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Note"}),n.jsx("div",{style:{display:"flex",gap:"8px"},children:[1,2,3,4,5].map(_=>n.jsx("button",{type:"button",onClick:()=>h({...u,rating:_}),style:{padding:"8px",background:"transparent",border:"none",cursor:"pointer"},children:n.jsx(Jt,{size:24,fill:_<=u.rating?"var(--gold)":"transparent",color:_<=u.rating?"var(--gold)":"var(--text-muted)"})},_))})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Plateforme"}),n.jsx("div",{style:{display:"flex",gap:"8px"},children:$h.map(_=>n.jsxs("button",{type:"button",onClick:()=>h({...u,platform:_.id}),style:{flex:1,padding:"10px",background:u.platform===_.id?`${_.color}20`:"var(--bg-tertiary)",border:`1px solid ${u.platform===_.id?_.color:"var(--border-color)"}`,borderRadius:"8px",color:u.platform===_.id?_.color:"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:[_.icon," ",_.name]},_.id))})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px"},children:"Commentaire *"}),n.jsx("textarea",{value:u.comment,onChange:_=>h({...u,comment:_.target.value}),placeholder:"L'avis du client...",rows:4,style:{...Bi,resize:"vertical"}})]}),n.jsx("button",{type:"submit",style:Wh,children:"Ajouter l'avis"})]})}),n.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
      `})]})}function Fh({title:t,children:e,onClose:r}){return n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:n.jsxs("div",{style:{width:"100%",maxWidth:"450px",background:"var(--bg-card)",borderRadius:"16px",overflow:"hidden"},children:[n.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid var(--border-color)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600"},children:t}),n.jsx("button",{onClick:r,style:{padding:"8px",background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer"},children:""})]}),n.jsx("div",{style:{padding:"20px"},children:e})]})})}const Bi={width:"100%",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"},Wh={padding:"14px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:"pointer"},So=[{name:"Paris",code:"75001",label:"Paris (75)"},{name:"Lyon",code:"69001",label:"Lyon (69)"},{name:"Marseille",code:"13001",label:"Marseille (13)"},{name:"Bordeaux",code:"33000",label:"Bordeaux (33)"},{name:"Nice",code:"06000",label:"Nice (06)"},{name:"Toulouse",code:"31000",label:"Toulouse (31)"},{name:"Nantes",code:"44000",label:"Nantes (44)"},{name:"Lille",code:"59000",label:"Lille (59)"},{name:"Strasbourg",code:"67000",label:"Strasbourg (67)"},{name:"Montpellier",code:"34000",label:"Montpellier (34)"}],jS=[{value:"Appartement",label:"Appartement"},{value:"Maison",label:"Maison"}];function wS(){const[t,e]=w.useState(So[0]),[r,i]=w.useState("Appartement"),[s,o]=w.useState(!1),[a,d]=w.useState(null),[l,c]=w.useState(null),[u,h]=w.useState([]),p=async()=>{o(!0),d(null),c(null),h([]);try{const x=`https://api.cquest.org/dvf?code_postal=${t.code}`,y=await fetch(x);if(!y.ok)throw new Error("Erreur de connexion  l'API DVF");const v=await y.json();if(!v.resultats||v.resultats.length===0)throw new Error("Aucune donne disponible pour cette ville");let g=v.resultats.filter(C=>!(r==="Appartement"&&C.type_local!=="Appartement"||r==="Maison"&&C.type_local!=="Maison"||!C.surface_reelle_bati||!C.valeur_fonciere||C.surface_reelle_bati<10||C.valeur_fonciere<2e4));if(g.length===0)throw new Error(`Aucune transaction de type "${r}" trouve`);const m=g.map(C=>C.valeur_fonciere),b=g.map(C=>C.valeur_fonciere/C.surface_reelle_bati),j=g.map(C=>C.surface_reelle_bati),R=[...b].sort((C,F)=>C-F),T=R[Math.floor(R.length*.25)],k=R[Math.floor(R.length*.75)],P=k-T,I=b.filter(C=>C>=T-1.5*P&&C<=k+1.5*P),E=Math.round(I.reduce((C,F)=>C+F,0)/I.length),A=Math.round(R[Math.floor(R.length/2)]),O=Math.round(Math.min(...I)),W=Math.round(Math.max(...I)),_=Math.round(m.reduce((C,F)=>C+F,0)/m.length),N=Math.round(j.reduce((C,F)=>C+F,0)/j.length),q={};g.forEach(C=>{const F=C.nombre_pieces_principales||"N/A";q[F]||(q[F]={count:0,totalPrice:0,totalSurface:0}),q[F].count++,q[F].totalPrice+=C.valeur_fonciere/C.surface_reelle_bati,q[F].totalSurface+=C.surface_reelle_bati});const z=Object.entries(q).filter(([C])=>C!=="N/A"&&C!=="null").map(([C,F])=>({rooms:`T${C}`,avgPrice:Math.round(F.totalPrice/F.count),avgSurface:Math.round(F.totalSurface/F.count),count:F.count})).sort((C,F)=>parseInt(C.rooms.slice(1))-parseInt(F.rooms.slice(1))),S=g.map(C=>C.date_mutation?new Date(C.date_mutation):null).filter(C=>C&&!isNaN(C.getTime())),D=S.length>0?new Date(Math.min(...S.map(C=>C.getTime()))):null,M=S.length>0?new Date(Math.max(...S.map(C=>C.getTime()))):null;c({totalTransactions:g.length,avgPricePerSqm:E,medianPricePerSqm:A,minPrice:O,maxPrice:W,avgPrice:_,avgSurface:N,priceByRooms:z,dateRange:D&&M?{from:D.toLocaleDateString("fr-FR"),to:M.toLocaleDateString("fr-FR")}:null}),h(g.slice(0,10).map(C=>({date:C.date_mutation?new Date(C.date_mutation).toLocaleDateString("fr-FR"):"N/A",address:`${C.adresse_numero||""} ${C.adresse_nom_voie||""}`.trim(),price:C.valeur_fonciere,surface:C.surface_reelle_bati,rooms:C.nombre_pieces_principales,pricePerSqm:Math.round(C.valeur_fonciere/C.surface_reelle_bati)})))}catch(x){d(x.message||"Une erreur est survenue")}finally{o(!1)}},f=x=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(x);return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(yi,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Analyse de march"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Statistiques bases sur les transactions DVF relles"})]})]}),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)",borderRadius:"8px",marginTop:"12px"},children:[n.jsx(os,{size:14,style:{color:"#22c55e"}}),n.jsx("span",{style:{fontSize:"12px",color:"#22c55e",fontWeight:"500"},children:"Donnes officielles DVF (data.gouv.fr)"}),n.jsx("a",{href:"https://app.dvf.etalab.gouv.fr/",target:"_blank",rel:"noopener noreferrer",style:{color:"#22c55e"},children:n.jsx(ot,{size:12})})]})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",marginBottom:"24px"},children:[n.jsxs("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap",alignItems:"flex-end"},children:[n.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[n.jsxs("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"8px"},children:[n.jsx(it,{size:14,style:{display:"inline",marginRight:"6px"}}),"Ville"]}),n.jsx("select",{value:t.name,onChange:x=>e(So.find(y=>y.name===x.target.value)||So[0]),style:{width:"100%",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"},children:So.map(x=>n.jsx("option",{value:x.name,children:x.label},x.name))})]}),n.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[n.jsxs("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"8px"},children:[n.jsx(tr,{size:14,style:{display:"inline",marginRight:"6px"}}),"Type de bien"]}),n.jsx("div",{style:{display:"flex",gap:"8px"},children:jS.map(x=>n.jsx("button",{onClick:()=>i(x.value),style:{flex:1,padding:"12px",background:r===x.value?"var(--gold)":"var(--bg-tertiary)",border:"1px solid "+(r===x.value?"var(--gold)":"var(--border-color)"),borderRadius:"8px",color:r===x.value?"var(--bg-primary)":"var(--text-secondary)",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:x.label},x.value))})]}),n.jsx("button",{onClick:p,disabled:s,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",background:s?"var(--bg-tertiary)":"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"8px",color:s?"var(--text-muted)":"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:s?"not-allowed":"pointer",height:"46px"},children:s?n.jsxs(n.Fragment,{children:[n.jsx(Ie,{size:18,style:{animation:"spin 1s linear infinite"}}),"Chargement..."]}):n.jsxs(n.Fragment,{children:[n.jsx(En,{size:18}),"Analyser"]})})]}),a&&n.jsxs("div",{style:{marginTop:"16px",padding:"12px 16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"8px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(Oe,{size:18,style:{color:"#ef4444"}}),n.jsx("span",{style:{color:"#ef4444",fontSize:"14px"},children:a})]})]}),l&&n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[n.jsx(Tu,{size:18,style:{color:"var(--gold)"}}),n.jsx("span",{style:{fontSize:"13px",color:"var(--text-muted)"},children:"Prix moyen /m"})]}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700",color:"var(--gold)"},children:f(l.avgPricePerSqm)}),n.jsxs("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px"},children:["Mdiane: ",f(l.medianPricePerSqm),"/m"]})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[n.jsx(we,{size:18,style:{color:"#3b82f6"}}),n.jsx("span",{style:{fontSize:"13px",color:"var(--text-muted)"},children:"Prix moyen"})]}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700",color:"#3b82f6"},children:f(l.avgPrice)}),n.jsxs("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px"},children:["Surface moy.: ",l.avgSurface," m"]})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[n.jsx(os,{size:18,style:{color:"#22c55e"}}),n.jsx("span",{style:{fontSize:"13px",color:"var(--text-muted)"},children:"Transactions"})]}),n.jsx("p",{style:{fontSize:"28px",fontWeight:"700",color:"#22c55e"},children:l.totalTransactions}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px"},children:"Ventes analyses"})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[n.jsx(Hs,{size:18,style:{color:"#f59e0b"}}),n.jsx("span",{style:{fontSize:"13px",color:"var(--text-muted)"},children:"Fourchette"})]}),n.jsxs("p",{style:{fontSize:"18px",fontWeight:"600",color:"#f59e0b"},children:[f(l.minPrice)," - ",f(l.maxPrice)]}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px"},children:"Prix au m (hors aberrants)"})]})]}),l.dateRange&&n.jsxs("div",{style:{padding:"12px 16px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"10px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(ct,{size:16,style:{color:"var(--text-muted)"}}),n.jsxs("span",{style:{fontSize:"13px",color:"var(--text-muted)"},children:["Priode analyse: ",l.dateRange.from,"  ",l.dateRange.to]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[l.priceByRooms.length>0&&n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"20px"},children:"Prix par typologie"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:l.priceByRooms.map((x,y)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px",background:"var(--bg-tertiary)",borderRadius:"10px"},children:[n.jsxs("div",{children:[n.jsx("span",{style:{fontSize:"15px",fontWeight:"600"},children:x.rooms}),n.jsxs("span",{style:{fontSize:"12px",color:"var(--text-muted)",marginLeft:"8px"},children:["(",x.count," ventes, ~",x.avgSurface,"m)"]})]}),n.jsxs("span",{style:{fontSize:"15px",fontWeight:"600",color:"var(--gold)"},children:[f(x.avgPrice),"/m"]})]},y))})]}),u.length>0&&n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"20px"},children:"Transactions rcentes"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px",maxHeight:"400px",overflowY:"auto"},children:u.map((x,y)=>n.jsxs("div",{style:{padding:"12px",background:"var(--bg-tertiary)",borderRadius:"10px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[n.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--gold)"},children:f(x.price)}),n.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:x.date})]}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"4px"},children:x.address||"Adresse non prcise"}),n.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"11px",color:"var(--text-muted)"},children:[n.jsxs("span",{children:[x.surface," m"]}),x.rooms&&n.jsxs("span",{children:[x.rooms," pices"]}),n.jsxs("span",{style:{color:"var(--gold)"},children:[f(x.pricePerSqm),"/m"]})]})]},y))})]})]}),n.jsxs("div",{style:{padding:"20px 24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:" Explorer les donnes"}),n.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[n.jsxs("a",{href:"https://app.dvf.etalab.gouv.fr/",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"10px 14px",background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)",borderRadius:"8px",color:"#22c55e",fontSize:"13px",fontWeight:"500",textDecoration:"none"},children:["DVF Etalab",n.jsx(ot,{size:14})]}),n.jsxs("a",{href:`https://www.meilleursagents.com/prix-immobilier/${t.name.toLowerCase()}/`,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"10px 14px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px",color:"#3b82f6",fontSize:"13px",fontWeight:"500",textDecoration:"none"},children:["MeilleursAgents",n.jsx(ot,{size:14})]}),n.jsxs("a",{href:`https://www.seloger.com/prix-de-l-immo/vente/${t.name.toLowerCase()}.htm`,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"10px 14px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"8px",color:"#ef4444",fontSize:"13px",fontWeight:"500",textDecoration:"none"},children:["SeLoger",n.jsx(ot,{size:14})]})]})]})]}),!l&&!s&&n.jsxs("div",{style:{padding:"60px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",textAlign:"center"},children:[n.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"20px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:n.jsx(yi,{size:36,style:{color:"var(--gold)"}})}),n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Analysez le march immobilier"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px",maxWidth:"400px",margin:"0 auto 24px"},children:"Slectionnez une ville et un type de bien pour obtenir des statistiques bases sur les vraies transactions immobilires (DVF)."}),n.jsx("div",{style:{padding:"12px 16px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"8px",display:"inline-block"},children:n.jsx("p",{style:{fontSize:"12px",color:"#3b82f6"},children:" Les donnes DVF incluent toutes les ventes immobilires en France depuis 2014"})})]}),n.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
      `})]})}function SS(){const[t,e]=w.useState("month"),[r,i]=w.useState("overview"),s={views:{value:4523,change:12.5,label:"Vues totales"},leads:{value:87,change:8.3,label:"Nouveaux leads"},visits:{value:34,change:-5.2,label:"Visites effectues"},sales:{value:6,change:20,label:"Ventes conclues"}},o=[{id:1,title:"Appartement T3 Vue Mer",views:456,leads:12,visits:5,status:"hot"},{id:2,title:"Villa 5p avec piscine",views:389,leads:8,visits:4,status:"warm"},{id:3,title:"Studio rnov centre",views:234,leads:5,visits:2,status:"normal"},{id:4,title:"Maison 4p jardin",views:178,leads:3,visits:1,status:"cold"}],a=[{day:"Lun",views:120,leads:8},{day:"Mar",views:145,leads:12},{day:"Mer",views:98,leads:6},{day:"Jeu",views:167,leads:15},{day:"Ven",views:189,leads:18},{day:"Sam",views:234,leads:22},{day:"Dim",views:156,leads:10}],d=[{source:"SeLoger",percentage:35,color:"#3b82f6"},{source:"LeBonCoin",percentage:28,color:"#f97316"},{source:"Site web",percentage:22,color:"var(--gold)"},{source:"Facebook",percentage:10,color:"#8b5cf6"},{source:"Autres",percentage:5,color:"#6b7280"}],l=Math.max(...a.map(c=>c.views));return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsx("div",{style:{marginBottom:"32px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(yi,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Performance"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Analysez vos rsultats et optimisez vos performances"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsxs("select",{value:t,onChange:c=>e(c.target.value),style:{padding:"10px 16px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"},children:[n.jsx("option",{value:"week",children:"Cette semaine"}),n.jsx("option",{value:"month",children:"Ce mois"}),n.jsx("option",{value:"quarter",children:"Ce trimestre"}),n.jsx("option",{value:"year",children:"Cette anne"})]}),n.jsxs("button",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px",cursor:"pointer"},children:[n.jsx(qs,{size:16}),"Exporter"]}),n.jsxs("button",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"var(--gold)",border:"none",borderRadius:"8px",color:"var(--bg-primary)",fontWeight:"600",fontSize:"14px",cursor:"pointer"},children:[n.jsx(Rt,{size:16}),"Envoyer rapport"]})]})]})}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:Object.entries(s).map(([c,u])=>n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"12px"},children:[n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:u.label}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:u.change>=0?"#22c55e":"#ef4444",fontSize:"12px",fontWeight:"600"},children:[u.change>=0?n.jsx(Lj,{size:14}):n.jsx(Oj,{size:14}),Math.abs(u.change),"%"]})]}),n.jsx("p",{style:{fontSize:"32px",fontWeight:"700"},children:u.value.toLocaleString()})]},c))}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"24px",marginBottom:"24px"},children:[n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"24px"},children:"Activit de la semaine"}),n.jsx("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",height:"200px",paddingBottom:"30px"},children:a.map((c,u)=>n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,gap:"8px"},children:[n.jsxs("div",{style:{position:"relative",width:"100%",display:"flex",justifyContent:"center",gap:"4px"},children:[n.jsx("div",{style:{width:"24px",height:`${c.views/l*150}px`,background:"linear-gradient(180deg, var(--gold) 0%, rgba(212, 175, 55, 0.5) 100%)",borderRadius:"4px 4px 0 0"}}),n.jsx("div",{style:{width:"24px",height:`${c.leads/25*150}px`,background:"linear-gradient(180deg, #3b82f6 0%, rgba(59, 130, 246, 0.5) 100%)",borderRadius:"4px 4px 0 0"}})]}),n.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:c.day})]},u))}),n.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px",marginTop:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"12px",height:"12px",background:"var(--gold)",borderRadius:"2px"}}),n.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Vues"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"12px",height:"12px",background:"#3b82f6",borderRadius:"2px"}}),n.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Leads"})]})]})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"24px"},children:"Sources de trafic"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:d.map((c,u)=>n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[n.jsx("span",{style:{fontSize:"13px",fontWeight:"500"},children:c.source}),n.jsxs("span",{style:{fontSize:"13px",fontWeight:"600",color:c.color},children:[c.percentage,"%"]})]}),n.jsx("div",{style:{height:"8px",background:"var(--bg-tertiary)",borderRadius:"4px",overflow:"hidden"},children:n.jsx("div",{style:{width:`${c.percentage}%`,height:"100%",background:c.color,borderRadius:"4px"}})})]},u))})]})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600"},children:"Performance par annonce"}),n.jsxs("button",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer"},children:[n.jsx(Hj,{size:14}),"Filtrer"]})]}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.jsx("th",{style:{padding:"12px 0",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase"},children:"Annonce"}),n.jsx("th",{style:{padding:"12px 0",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase"},children:"Vues"}),n.jsx("th",{style:{padding:"12px 0",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase"},children:"Leads"}),n.jsx("th",{style:{padding:"12px 0",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase"},children:"Visites"}),n.jsx("th",{style:{padding:"12px 0",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase"},children:"Conversion"}),n.jsx("th",{style:{padding:"12px 0",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase"},children:"Statut"})]})}),n.jsx("tbody",{children:o.map((c,u)=>{const h=(c.leads/c.views*100).toFixed(1);return n.jsxs("tr",{style:{borderBottom:u<o.length-1?"1px solid var(--border-color)":"none"},children:[n.jsx("td",{style:{padding:"16px 0"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",background:"var(--bg-tertiary)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(tr,{size:18,style:{color:"var(--text-muted)"}})}),n.jsx("span",{style:{fontWeight:"500",fontSize:"14px"},children:c.title})]})}),n.jsx("td",{style:{padding:"16px 0",textAlign:"center"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[n.jsx(Yr,{size:14,style:{color:"var(--text-muted)"}}),n.jsx("span",{style:{fontWeight:"600"},children:c.views})]})}),n.jsx("td",{style:{padding:"16px 0",textAlign:"center"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[n.jsx(xt,{size:14,style:{color:"var(--text-muted)"}}),n.jsx("span",{style:{fontWeight:"600"},children:c.leads})]})}),n.jsx("td",{style:{padding:"16px 0",textAlign:"center"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[n.jsx(ct,{size:14,style:{color:"var(--text-muted)"}}),n.jsx("span",{style:{fontWeight:"600"},children:c.visits})]})}),n.jsx("td",{style:{padding:"16px 0",textAlign:"center"},children:n.jsxs("span",{style:{padding:"4px 10px",background:parseFloat(h)>=3?"rgba(34, 197, 94, 0.1)":parseFloat(h)>=2?"rgba(212, 175, 55, 0.1)":"rgba(239, 68, 68, 0.1)",color:parseFloat(h)>=3?"#22c55e":parseFloat(h)>=2?"var(--gold)":"#ef4444",borderRadius:"4px",fontSize:"13px",fontWeight:"600"},children:[h,"%"]})}),n.jsx("td",{style:{padding:"16px 0",textAlign:"center"},children:n.jsx("span",{style:{padding:"4px 10px",borderRadius:"4px",fontSize:"11px",fontWeight:"600",background:c.status==="hot"?"rgba(239, 68, 68, 0.1)":c.status==="warm"?"rgba(249, 115, 22, 0.1)":c.status==="normal"?"rgba(34, 197, 94, 0.1)":"rgba(107, 114, 128, 0.1)",color:c.status==="hot"?"#ef4444":c.status==="warm"?"#f97316":c.status==="normal"?"#22c55e":"#6b7280"},children:c.status==="hot"?" Trs demand":c.status==="warm"?" Populaire":c.status==="normal"?" Normal":" Faible"})})]},c.id)})})]})]})]})}function kS(){const[t,e]=w.useState(35e4),[r,i]=w.useState(7e4),[s,o]=w.useState(20),[a,d]=w.useState(20),[l,c]=w.useState(3.5),[u,h]=w.useState(.36),[p,f]=w.useState(null);w.useEffect(()=>{const b=r/t*100;o(Math.round(b))},[r,t]);const x=b=>{o(b),i(Math.round(t*(b/100)))};w.useEffect(()=>{y()},[t,r,a,l,u]);const y=()=>{const b=t-r,j=l/100/12,R=a*12,T=b*(j*Math.pow(1+j,R))/(Math.pow(1+j,R)-1),k=b*(u/100)/12,P=T+k,I=T*R-b,E=k*R,A=t+I+E,O=t*.08,W=A+O,_=[];let N=b;for(let q=1;q<=Math.min(12,R);q++){const z=N*j,S=T-z;N-=S,_.push({month:q,payment:T,principal:S,interest:z,balance:Math.max(0,N)})}f({principal:b,monthlyPayment:T,monthlyInsurance:k,totalMonthly:P,totalInterest:I,totalInsurance:E,totalCost:A,notaryFees:O,totalProjectCost:W,schedule:_})},v=b=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(b),g=b=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(b),m=()=>{const b=`
Simulation crdit immobilier
-----------------------------
Prix du bien: ${v(t)}
Apport: ${v(r)} (${s}%)
Montant emprunt: ${v(p.principal)}
Dure: ${a} ans
Taux: ${l}%

Mensualit: ${g(p.totalMonthly)}
Cot total du crdit: ${v(p.totalCost)}
    `.trim();navigator.clipboard.writeText(b),alert("Rsultats copis !")};return n.jsxs("div",{style:{maxWidth:"1100px"},children:[n.jsx("div",{style:{marginBottom:"32px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Sa,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Simulateur de prt"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Calculez les mensualits de vos clients"})]})]}),p&&n.jsxs("button",{onClick:m,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px",cursor:"pointer"},children:[n.jsx(hr,{size:16}),"Copier"]})]})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"24px"},children:[n.jsxs("div",{style:{padding:"28px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("div",{style:{marginBottom:"28px"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:[n.jsx(we,{size:18,style:{color:"var(--gold)"}}),"Prix du bien"]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("input",{type:"range",min:"50000",max:"2000000",step:"10000",value:t,onChange:b=>e(Number(b.target.value)),style:{width:"100%",height:"8px",borderRadius:"4px",background:`linear-gradient(to right, var(--gold) ${(t-5e4)/195e4*100}%, var(--border-color) 0%)`,outline:"none",cursor:"pointer",WebkitAppearance:"none"}}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px"},children:[n.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"50 000 "}),n.jsx("span",{style:{fontSize:"20px",fontWeight:"700",color:"var(--gold)"},children:v(t)}),n.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"2 000 000 "})]})]})]}),n.jsxs("div",{style:{marginBottom:"28px"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:[n.jsx(ow,{size:18,style:{color:"var(--gold)"}}),"Apport personnel"]}),n.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[10,15,20,25,30].map(b=>n.jsxs("button",{onClick:()=>x(b),style:{flex:1,padding:"10px",background:s===b?"var(--gold)":"var(--bg-tertiary)",border:"1px solid "+(s===b?"var(--gold)":"var(--border-color)"),borderRadius:"8px",color:s===b?"var(--bg-primary)":"var(--text-secondary)",fontSize:"13px",fontWeight:"600",cursor:"pointer"},children:[b,"%"]},b))}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(Tu,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"number",value:r,onChange:b=>i(Number(b.target.value)),style:{width:"100%",padding:"14px 14px 14px 40px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"16px",fontWeight:"600"}})]})]}),n.jsxs("div",{style:{marginBottom:"28px"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:[n.jsx(ct,{size:18,style:{color:"var(--gold)"}}),"Dure du prt"]}),n.jsx("div",{style:{display:"flex",gap:"8px"},children:[10,15,20,25].map(b=>n.jsxs("button",{onClick:()=>d(b),style:{flex:1,padding:"14px",background:a===b?"var(--gold)":"var(--bg-tertiary)",border:"1px solid "+(a===b?"var(--gold)":"var(--border-color)"),borderRadius:"10px",color:a===b?"var(--bg-primary)":"var(--text-secondary)",fontSize:"15px",fontWeight:"600",cursor:"pointer"},children:[b," ans"]},b))})]}),n.jsxs("div",{style:{marginBottom:"28px"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:[n.jsx(sw,{size:18,style:{color:"var(--gold)"}}),"Taux d'intrt"]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[n.jsx("input",{type:"range",min:"1",max:"7",step:"0.1",value:l,onChange:b=>c(Number(b.target.value)),style:{flex:1,height:"8px",borderRadius:"4px",background:`linear-gradient(to right, var(--gold) ${(l-1)/6*100}%, var(--border-color) 0%)`,outline:"none",cursor:"pointer",WebkitAppearance:"none"}}),n.jsxs("div",{style:{padding:"10px 16px",background:"var(--bg-tertiary)",borderRadius:"8px",fontSize:"16px",fontWeight:"700",color:"var(--gold)",minWidth:"80px",textAlign:"center"},children:[l.toFixed(1),"%"]})]})]}),n.jsxs("div",{children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:[n.jsx(uy,{size:18,style:{color:"var(--gold)"}}),"Taux assurance"]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[n.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.01",value:u,onChange:b=>h(Number(b.target.value)),style:{flex:1,height:"8px",borderRadius:"4px",background:`linear-gradient(to right, var(--gold) ${(u-.1)/.9*100}%, var(--border-color) 0%)`,outline:"none",cursor:"pointer",WebkitAppearance:"none"}}),n.jsxs("div",{style:{padding:"10px 16px",background:"var(--bg-tertiary)",borderRadius:"8px",fontSize:"16px",fontWeight:"700",color:"var(--text-primary)",minWidth:"80px",textAlign:"center"},children:[u.toFixed(2),"%"]})]})]})]}),p&&n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[n.jsxs("div",{style:{padding:"28px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 100%)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"16px",textAlign:"center"},children:[n.jsx("p",{style:{fontSize:"14px",color:"var(--text-muted)",marginBottom:"8px"},children:"Mensualit totale"}),n.jsx("p",{style:{fontSize:"42px",fontWeight:"700",color:"var(--gold)",marginBottom:"8px"},children:g(p.totalMonthly)}),n.jsxs("p",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:["Dont ",g(p.monthlyInsurance)," d'assurance"]})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"15px",fontWeight:"600",marginBottom:"16px"},children:"Dtail du financement"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[[{label:"Montant emprunt",value:p.principal},{label:"Cot total intrts",value:p.totalInterest},{label:"Cot total assurance",value:p.totalInsurance},{label:"Frais de notaire (8%)",value:p.notaryFees}].map((b,j)=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px",background:"var(--bg-tertiary)",borderRadius:"8px"},children:[n.jsx("span",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:b.label}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:v(b.value)})]},j)),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"14px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"8px",marginTop:"4px"},children:[n.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--gold)"},children:"Cot total du projet"}),n.jsx("span",{style:{fontSize:"16px",fontWeight:"700",color:"var(--gold)"},children:v(p.totalProjectCost)})]})]})]}),n.jsxs("div",{style:{padding:"16px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"12px",display:"flex",gap:"12px"},children:[n.jsx(Ei,{size:18,style:{color:"#3b82f6",flexShrink:0,marginTop:"2px"}}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-secondary)",lineHeight:"1.5"},children:"Cette simulation est indicative. Les taux et conditions peuvent varier selon les banques et votre profil emprunteur."})]})]})]}),n.jsx("style",{children:`
        input[type="range"]::-webkit-slider-thumb {
          -webkit-appearance: none;
          width: 20px;
          height: 20px;
          background: var(--gold);
          border-radius: 50%;
          cursor: pointer;
          box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        input[type="range"]::-moz-range-thumb {
          width: 20px;
          height: 20px;
          background: var(--gold);
          border-radius: 50%;
          cursor: pointer;
          border: none;
        }
      `})]})}const _S="modulepreload",CS=function(t){return"/"+t},Uh={},zS=function(e,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),d=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=CS(l),l in Uh)return;Uh[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":_S,c||(h.as="script"),h.crossOrigin="",h.href=l,d&&h.setAttribute("nonce",d),document.head.appendChild(h),c)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return s.then(a=>{for(const d of a||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})},Wl="csx_documents",qh="csx_agency_info",Ul=[{id:"mandat_simple_vente",name:"Mandat simple de vente",description:"Mandat non exclusif conforme UNIS - MAJ dcembre 2024",category:"Mandats Vente",icon:en,pages:7,source:"UNIS/CNACIM",legal:"Loi n70-9 du 2 janvier 1970 (Hoguet)"},{id:"mandat_exclusif_vente",name:"Mandat exclusif de vente",description:"Mandat exclusif avec clause pnale - MAJ dcembre 2024",category:"Mandats Vente",icon:en,pages:7,source:"UNIS/CNACIM",legal:"Loi n70-9 du 2 janvier 1970 (Hoguet)"},{id:"mandat_simple_vente_distance",name:"Mandat simple -  distance",description:"Conclu  distance ou hors tablissement (14j rtractation)",category:"Mandats Vente",icon:en,pages:8,source:"UNIS/CNACIM",legal:"Loi Hoguet + Code de la consommation L221-18"},{id:"mandat_exclusif_vente_distance",name:"Mandat exclusif -  distance",description:"Exclusif conclu  distance (14j rtractation)",category:"Mandats Vente",icon:en,pages:8,source:"UNIS/CNACIM",legal:"Loi Hoguet + Code de la consommation L221-18"},{id:"mandat_recherche_simple",name:"Mandat de recherche simple",description:"Mandat acqureur non exclusif (chasseur immobilier)",category:"Mandats Recherche",icon:en,pages:4,source:"Loi Hoguet",legal:"Loi n70-9 du 2 janvier 1970, art. 6"},{id:"mandat_recherche_exclusif",name:"Mandat de recherche exclusif",description:"Mandat acqureur exclusif avec clause pnale",category:"Mandats Recherche",icon:en,pages:5,source:"Loi Hoguet",legal:"Loi n70-9 du 2 janvier 1970, art. 6 et 78"},{id:"mandat_location",name:"Mandat de location",description:"Mandat pour mise en location d'un bien",category:"Location",icon:en,pages:4,source:"Loi Hoguet",legal:"Loi n70-9 du 2 janvier 1970"},{id:"bail_habitation_vide",name:"Bail d'habitation vide",description:"Contrat type conforme loi ALUR (logement non meubl)",category:"Location",icon:Yt,pages:6,source:"Dcret 2015-587",legal:"Loi n89-462 du 6 juillet 1989 modifie par loi ALUR"},{id:"bail_habitation_meuble",name:"Bail d'habitation meubl",description:"Contrat type conforme loi ALUR (logement meubl)",category:"Location",icon:Yt,pages:6,source:"Dcret 2015-587",legal:"Loi n89-462 du 6 juillet 1989 modifie par loi ALUR"},{id:"etat_des_lieux",name:"tat des lieux",description:"Entre/sortie conforme dcret 2016-382",category:"Location",icon:Rh,pages:4,source:"Dcret 2016-382",legal:"Loi n89-462, art. 3-2"},{id:"quittance_loyer",name:"Quittance de loyer",description:"Attestation de paiement du loyer",category:"Location",icon:Yt,pages:1,source:"Loi 89-462",legal:"Loi n89-462, art. 21"},{id:"bon_visite",name:"Bon de visite",description:"Attestation de visite avec clause non-contournement",category:"Visites",icon:Rh,pages:1,source:"Usage professionnel",legal:"Recommand FNAIM/UNIS"},{id:"offre_achat",name:"Offre d'achat",description:"Proposition d'acquisition (Art. 1583 Code civil)",category:"Transactions",icon:Yt,pages:2,source:"Code civil",legal:"Art. 1583 et 1589 Code civil"},{id:"attestation_bien",name:"Attestation de bien",description:"Fiche descriptive du bien (surface, DPE, prix)",category:"Transactions",icon:Yt,pages:1,source:"Loi Hoguet",legal:"Dcret n72-678, art. 72"}],RS=["Tous","Mandats Vente","Mandats Recherche","Location","Visites","Transactions"];function ES(){const[t,e]=w.useState("Tous"),[r,i]=w.useState(null),[s,o]=w.useState(1),[a,d]=w.useState({}),[l,c]=w.useState(!1),[u,h]=w.useState([]),[p,f]=w.useState(!1),[x,y]=w.useState([]),[v,g]=w.useState(null),[m,b]=w.useState({nom:"",forme_juridique:"SARL",capital:"",siege:"",rcs:"",tva:"",telephone:"",email:"",carte_pro:"",carte_delivree_par:"",garantie_nom:"",garantie_montant:"",garantie_adresse:"",assurance_nom:"",assurance_adresse:"",compte_sequestre:"",banque_sequestre:"",mediateur_nom:"",mediateur_adresse:"",mediateur_email:"",site_web:""});w.useEffect(()=>{const z=localStorage.getItem(Wl);z&&h(JSON.parse(z));const S=localStorage.getItem(qh);S&&b(JSON.parse(S)),(async()=>{const{data:{user:M}}=await G.auth.getUser();if(M){const{data:C}=await G.from("profiles").select("*").eq("id",M.id).single();C&&!S&&b(L=>({...L,nom:C.company_name||"",telephone:C.phone||"",email:M.email}));const{data:F}=await G.from("listings").select("*").eq("user_id",M.id).limit(50);F&&y(F)}})()},[]);const j=()=>{localStorage.setItem(qh,JSON.stringify(m)),f(!1)},R=t==="Tous"?Ul:Ul.filter(z=>z.category===t),T=z=>{i(z),o(1);const S=new Date;d({mandat_numero:`M${S.getFullYear()}-${String(u.filter(D=>{var M;return(M=D.templateId)==null?void 0:M.includes("mandat")}).length+1).padStart(4,"0")}`,mandat_date:S.toISOString().split("T")[0],mandat_duree:3,mandat_tacite:"non",honoraires_charge:"acquereur",honoraires_pourcentage:5,bien_libre:"oui",diagnostics_charge:"mandant",sequestre:"notaire",lieu_signature:""})},k=(z,S)=>{d(D=>{const M={...D,[z]:S};return z==="prix_vente"&&D.honoraires_pourcentage&&(M.honoraires_montant=Math.round(S*D.honoraires_pourcentage/100)),z==="honoraires_pourcentage"&&D.prix_vente&&(M.honoraires_montant=Math.round(D.prix_vente*S/100)),M})},P=z=>{g(z),d(S=>({...S,bien_type:z.property_type||"",bien_adresse:z.location||"",bien_description:z.description||"",bien_surface:z.surface||"",prix_vente:z.price||""}))},I=z=>z?new Intl.NumberFormat("fr-FR").format(z)+" euros":"..........",E=z=>{if(!z)return"....................";const S=new Date(z),D=["janvier","fevrier","mars","avril","mai","juin","juillet","aout","septembre","octobre","novembre","decembre"];return`${S.getDate()} ${D[S.getMonth()]} ${S.getFullYear()}`},A=z=>z?String(z).replace(//g,"euros").replace(//g,"e").replace(//g,"e").replace(//g,"e").replace(//g,"e").replace(//g,"a").replace(//g,"a").replace(//g,"u").replace(//g,"u").replace(//g,"o").replace(//g,"i").replace(//g,"i").replace(//g,"c").replace(//g,"oe").replace(//g,"E").replace(//g,"E").replace(//g,"E").replace(//g,"A").replace(//g,"U").replace(//g,"O").replace(//g,"I").replace(//g,"C").replace(/'/g,"'").replace(//g,'"').replace(//g,'"').replace(//g,"-").replace(//g,"-").replace(//g,"..."):"",O=async()=>{c(!0);try{const{default:z}=await zS(async()=>{const{default:ge}=await import("./jspdf.es.min-Br3Cr78x.js");return{default:ge}},[]),S=new z({unit:"mm",format:"a4"}),D=S.internal.pageSize.getWidth(),M=S.internal.pageSize.getHeight(),C=15,F=D-2*C;let L=C,X=1;const Le=r.id.includes("exclusif"),Z=r.id.includes("distance"),Ze=r.id.includes("mandat"),rr=()=>{S.setFontSize(8),S.setTextColor(128),S.text(A(`UNIS - Mandat ${Le?"exclusif":"simple"}${Z?" a distance":""} - Page ${X} sur ${r.pages}`),C,M-8),S.text(A("MAJ decembre 2024 (clause penale)"),D-C,M-8,{align:"right"})},oe=()=>{rr(),S.addPage(),X++,L=C},Se=ge=>{L>M-ge-15&&oe()},$=(ge,yr={})=>{const{size:Tn=9,bold:Au=!1,italic:Ou=!1,color:et=[0,0,0],indent:Ut=0,center:vr=!1,box:Lu=!1}=yr;S.setFontSize(Tn),S.setFont("helvetica",Au?"bold":Ou?"italic":"normal"),S.setTextColor(...et);const tl=A(ge);S.splitTextToSize(tl,F-Ut).forEach(Du=>{Se(5),vr?S.text(Du,D/2,L,{align:"center"}):S.text(Du,C+Ut,L),L+=Tn*.4}),L+=1},bt=ge=>{Se(12),$(ge,{size:12,bold:!0,center:!0}),L+=3},Re=ge=>{Se(10),L+=3,$(ge,{size:10,bold:!0}),L+=1},ke=(ge,yr)=>{$(`${ge} : ${yr||"............................"}`,{size:9})},Fe=(ge,yr=!1)=>{Se(5),S.rect(C,L-2.5,3,3),yr&&(S.setFontSize(10),S.text("x",C+.5,L)),S.setFontSize(9);const Tn=A(ge);S.text(Tn,C+5,L),L+=4};if(Ze){if(S.setFillColor(255,252,240),S.setDrawColor(200,180,100),S.rect(C,L,F,18,"FD"),S.setFontSize(8),S.setTextColor(120,100,40),S.text("ATTENTION",C+2,L+5),S.setFontSize(7),S.text(A("Ce document est une trame susceptible d'etre adaptee par l'agent immobilier a chaque situation ou dossier."),C+2,L+9),S.text(A("Il ne pourra etre utilise en l'etat. En consequence, la responsabilite de l'UNIS ne pourra etre engagee du fait de son utilisation."),C+2,L+13),L+=22,bt(`MANDAT ${Le?"EXCLUSIF":"SIMPLE"} DE VENTE`),Z&&bt("CONCLU A DISTANCE OU HORS ETABLISSEMENT"),L+=2,Z&&($(`${m.nom||"Socit ............................."} (${m.forme_juridique||"........."})`,{size:9,bold:!0}),$(`Capital : ${m.capital||".........."} euros - RCS : ${m.rcs||".........."} - TVA : ${m.tva||".........."}`,{size:8}),$(`Sige : ${m.siege||".........."}`,{size:8}),$(`Tl : ${m.telephone||".........."} - Email : ${m.email||".........."}`,{size:8}),$(`Carte professionnelle n ${m.carte_pro||".........."} dlivre par la CCI ${m.carte_delivree_par||".........."}`,{size:8}),$(`Garantie financire : ${m.garantie_nom||".........."} - ${I(m.garantie_montant)}`,{size:8}),$(`Assurance RCP : ${m.assurance_nom||".........."}`,{size:8}),L+=3),$(`"Le titulaire de la carte Transactions sur immeubles et fonds de commerce ne peut ngocier ou s'engager  l'occasion d'oprations d'achat, vente, change, location ou sous-location, de biens et droits immobiliers ou de fonds de commerce, sans dtenir un mandat crit pralablement dlivr  cet effet par l'une des parties..."`,{size:8,italic:!0,color:[80,80,80]}),$("(Loi n70-9 du 2 janvier 1970  article 6 - dcret n72-678 du 20 juillet 1972  article 72)",{size:7,italic:!0,color:[100,100,100]}),L+=5,$(`N de mandat : ${a.mandat_numero||"____________"}`,{size:11,bold:!0}),L+=5,$("ENTRE LES SOUSSIGNS",{size:10,bold:!0}),L+=2,$(`${a.mandant_civilite||"M./Mme"} ${a.mandant_nom||"............................"}`,{size:9}),a.mandant_naissance&&$(`N(e) le ${E(a.mandant_naissance)}  ${a.mandant_lieu_naissance||"............"}, nationalit ${a.mandant_nationalite||"franaise"}`,{size:8}),$(`Rgime matrimonial : ${a.mandant_regime||"............................"}`,{size:8}),$(`Demeurant : ${a.mandant_adresse||"............................"}`,{size:8}),$(`Tl : ${a.mandant_telephone||".........."} - Email : ${a.mandant_email||".........."}`,{size:8}),L+=2,$("Ci-aprs dnomm  Le Mandant  d'une part,",{size:9,italic:!0}),L+=4,$("ET",{size:10,bold:!0,center:!0}),L+=2,Z?$("Le Cabinet/l'agence dont les informations sont dtailles en en-tte du prsent contrat,",{size:9}):($(`Le Cabinet/l'agence ${m.nom||"............................."} (${m.forme_juridique||"........."})`,{size:9}),$(`Capital : ${m.capital||".........."} euros - Siege : ${m.siege||".........."}`,{size:8}),$(`RCS : ${m.rcs||".........."} - Carte pro n ${m.carte_pro||".........."} (CCI ${m.carte_delivree_par||".........."})`,{size:8}),$(`Garantie : ${m.garantie_nom||".........."} pour ${I(m.garantie_montant)}`,{size:8}),$(`Compte squestre n ${m.compte_sequestre||".........."} - ${m.banque_sequestre||".........."}`,{size:8})),$("Ci-aprs dnomm  Le Mandataire  d'autre part.",{size:9,italic:!0}),L+=5,$("IL A T CONVENU CE QUI SUIT",{size:10,bold:!0}),L+=2,$(Le?"Le Mandant donne au Mandataire, ci-dessus dnomm, MANDAT EXCLUSIF  l'effet de rechercher un acqureur et de ngocier au mieux de ses intrts avec la collaboration ventuelle de ses confrres, en vue d'aboutir  la signature d'une promesse de vente ou d'un compromis de vente portant sur les biens suivants :":"Le Mandant donne au Mandataire, mandat sans exclusivit  l'effet de rechercher un acqureur et de ngocier au mieux de ses intrts avec la collaboration ventuelle de ses confrres, en vue d'aboutir  la signature d'une promesse de vente ou d'un compromis de vente portant sur les biens suivants :",{size:9}),L+=3,Re("Art. 1er. Dsignation"),$("(En cas de lot de coproprit, mentionner la superficie de la partie privative du lot)",{size:8,italic:!0,color:[100,100,100]}),L+=2,$(`Type de bien : ${a.bien_type||"............................"}`,{size:9}),$(`Adresse : ${a.bien_adresse||"............................"}`,{size:9}),a.bien_surface&&$(`Surface Carrez : ${a.bien_surface} m`,{size:9}),a.bien_description&&($("Description :",{size:9}),$(a.bien_description,{size:8,indent:5})),L+=3,$("tant prcis qu' la signature de l'acte authentique, les biens vendus seront :",{size:9}),Fe("libres de toute occupation, location ou rquisition",a.bien_libre==="oui"),Fe("lous",a.bien_libre==="non"),L+=3,$("Dossier de diagnostics techniques",{size:9,bold:!0}),Fe("Le Mandant se charge de faire raliser  ses frais et sous sa responsabilit l'ensemble des constats, tats, diagnostics, mesurage requis par la loi et s'engage  les communiquer au Mandataire sans dlai.",a.diagnostics_charge==="mandant"),Fe("Le Mandant charge le Mandataire de faire effectuer l'ensemble des constats, tats, diagnostics et mesurage requis par la loi. Les frais d'tablissement sont  la charge exclusive du Mandant.",a.diagnostics_charge==="mandataire"),oe(),Re("Art. 2. Duree - Revocation"),$("A - Duree",{size:9,bold:!0}),Fe(`Le present mandat est conclu pour une duree de ${a.mandat_duree||"__"} mois a compter du ${E(a.mandat_date)}.`,a.mandat_tacite==="non"),Fe(`Le present mandat est conclu pour une duree de ${a.mandat_duree||"__"} mois a compter du ${E(a.mandat_date)}. Il se renouvellera par tacite reconduction par periode de ${a.mandat_duree||"__"} mois.`,a.mandat_tacite==="oui"),L+=3,a.mandat_tacite==="oui"){S.setFillColor(245,245,245),S.rect(C,L,F,35,"F"),S.setFontSize(7),S.setTextColor(60,60,60);const Ut=A("POUR LES CONTRATS DE PRESTATIONS DE SERVICES CONCLUS POUR UNE DUREE DETERMINEE AVEC UNE CLAUSE DE RECONDUCTION TACITE, LE PROFESSIONNEL PRESTATAIRE DE SERVICES INFORME LE CONSOMMATEUR PAR ECRIT, PAR LETTRE NOMINATIVE OU COURRIER ELECTRONIQUE DEDIES, AU PLUS TOT TROIS MOIS ET AU PLUS TARD UN MOIS AVANT LE TERME DE LA PERIODE AUTORISANT LE REJET DE LA RECONDUCTION, DE LA POSSIBILITE DE NE PAS RECONDUIRE LE CONTRAT QU'IL A CONCLU AVEC UNE CLAUSE DE RECONDUCTION TACITE. (article L215-1 du code de la consommation)");S.splitTextToSize(Ut,F-4).forEach((Lu,tl)=>{S.text(Lu,C+2,L+4+tl*3)}),L+=38}$("B - Revocation",{size:9,bold:!0}),Le?(S.setFillColor(255,250,240),S.rect(C,L,F,15,"F"),S.setFontSize(8),S.setFont("helvetica","bold"),S.setTextColor(100,60,0),S.text(A("PASSE UN DELAI DE TROIS MOIS A COMPTER DE SA SIGNATURE, LE MANDAT PEUT ETRE DENONCE"),C+2,L+5),S.text(A("A TOUT MOMENT PAR CHACUNE DES PARTIES, A CHARGE POUR CELLE QUI ENTEND Y METTRE FIN"),C+2,L+9),S.text(A("D'EN AVISER L'AUTRE PARTIE QUINZE JOURS A L'AVANCE PAR LETTRE RECOMMANDEE AVEC AR."),C+2,L+13),L+=18):$("Passe un delai de trois mois a compter de sa signature, le mandat peut etre denonce a tout moment par chacune des parties, a charge pour celle qui entend y mettre fin d'en aviser l'autre partie quinze jours a l'avance par lettre recommandee avec demande d'avis de reception.",{size:8}),Re("Art. 3. Obligations du Mandant"),$("Pour permettre au Mandataire d'excuter sa mission, le Mandant lui donne pouvoir pour effectuer toutes dmarches auprs des tiers afin d'obtenir les pices, actes, certificats concernant le bien objet des prsentes et s'engage  :",{size:8}),L+=2,["Reconnat avoir reu du Mandataire le document d'informations prcontractuelles pralablement  la conclusion du prsent mandat.","S'engage  rpondre  toute demande du Mandataire pour l'accomplissement de son obligation de vigilance dans le cadre du dispositif de lutte contre le blanchiment de capitaux.","Autorise la dlgation du prsent mandat sans que les pouvoirs et obligations dlgus excdent ceux prvus au prsent mandat.","Autorise le Mandataire  signer tout mandat de recherche avec un acqureur ventuel conformment aux dispositions de l'article 1161 du code civil.","S'engage  lui fournir le DPE, lorsque la loi l'exige, afin de permettre au Mandataire la diffusion d'annonces relatives  la vente du bien.","En coproprit : fournir le rglement de coproprit, les trois derniers appels de charges, les trois derniers procs-verbaux d'assemble gnrale.","S'engage  lui fournir toutes justifications relatives  la proprit des biens mis en vente.","S'engage  lui signaler immdiatement toutes modifications juridiques ou matrielles touchant les biens.","Laisser effectuer la publicit et autoriser les photographies du bien.","Communiquer les lments prvus aux articles L721-2 et L271-4 du CCH.","S'engage  signer aux conditions prvues tout compromis ou promesse de vente."].forEach((Ut,vr)=>{$(`${vr+1}. ${Ut}`,{size:7,indent:3})}),Le?$("12. Compte tenu de l'exclusivit consentie, s'engage  ne pas ngocier directement ou indirectement la vente du bien pendant la dure du mandat.",{size:7,indent:3,bold:!0}):$("12. S'engage  informer sans dlai le mandataire que la vente a t conclue directement ou par un autre intermdiaire.",{size:7,indent:3}),$("13. S'engage  ne pas conclure l'acquisition, pendant la dure du prsent mandat et les douze mois suivants, directement avec un acqureur prsent par le Mandataire.",{size:7,indent:3,bold:!0}),L+=3,S.setFillColor(255,245,245),S.setDrawColor(200,100,100),Se(30),S.rect(C,L,F,25,"FD"),S.setFontSize(9),S.setFont("helvetica","bold"),S.setTextColor(150,50,50),S.text("CLAUSE PENALE",C+2,L+5),S.setFontSize(7),S.setFont("helvetica","normal"),S.setTextColor(80,40,40);const Tn=A("En cas de non-respect des obligations enoncees ci-dessus le Mandant s'engage expressement a verser au Mandataire, en vertu des articles 1217 et 1221 et 1231-5 du code civil, une indemnite compensatrice egale au montant de la remuneration prevue aux presentes, si le manquement se trouve a l'origine de la perte de remuneration par le Mandataire. Le Mandant sera tenu au paiement notamment en cas de manquement aux obligations 11, 12 et 13.");S.splitTextToSize(Tn,F-4).forEach((Ut,vr)=>S.text(Ut,C+2,L+10+vr*3)),L+=28,oe(),Re("Art. 4. Obligations du Mandataire"),$("Le Mandataire s'engage  :",{size:8}),["Conseiller et assister le mandant durant toute la dure du mandat.","Effectuer toutes les dmarches ncessaires  l'accomplissement de sa mission.","Raliser les actions suivantes : visites, ngociation, rception et communication des offres.",`Promouvoir le bien en diffusant les annonces auprs du public : ${a.diffusion||"internet, vitrine, rseaux partenaires"}.`,"Informer le mandant de l'accomplissement de son mandat dans les conditions de l'article 77 du dcret du 20 juillet 1972."].forEach((Ut,vr)=>$(`${vr+1}. ${Ut}`,{size:7,indent:3})),Le&&a.actions_exclusives&&$(`Actions spcifiques dans le cadre de l'exclusivit : ${a.actions_exclusives}`,{size:8,indent:3}),Re("Art. 5. Squestre"),$("La somme verse par l'acqureur  titre de dpt de garantie (10% max) sera dtenue par :",{size:8}),Fe("Le Mandataire (ds lors qu'il dtient une garantie financire)",a.sequestre==="mandataire"),Fe(`Le notaire dsign : ${a.notaire||"............................"}`,a.sequestre==="notaire"),Re("Art. 6. Dclaration d'aliner"),$("Le Mandant charge spcialement le Mandataire d'accomplir, le cas chant, les formalits relatives  la dclaration d'aliner comme de ngocier avec tout titulaire d'un droit de premption.",{size:8}),Re("Art. 7. Prix"),$(`Les biens ci-dessus dsigns seront prsents au prix de ${I(a.prix_vente)} TTC.`,{size:9,bold:!0}),$("Dans le cas o les biens seraient soumis  la TVA, celle-ci sera  la charge du vendeur. Les frais d'actes, droits d'enregistrement sont  la charge de l'acheteur.",{size:8}),Re("Art. 8. Rmunration"),$(`En cas de ralisation de la vente, le Mandataire percevra une rmunration de ${I(a.honoraires_montant)} TTC (soit ${a.honoraires_pourcentage||"__"}% du prix de vente).`,{size:9}),L+=2,a.honoraires_charge==="vendeur"?$("La rmunration sera  la charge du Mandant.",{size:9}):a.honoraires_charge==="acquereur"?$("La rmunration sera  la charge de l'Acqureur.",{size:9}):$("La rmunration sera partage entre le Mandant et l'Acqureur.",{size:9}),$("Elle sera verse au Mandataire une fois l'acte authentique de vente effectivement sign devant notaire aprs que toutes les conditions suspensives aient t leves.",{size:8}),L+=3,$("Rappel des tarifs appliqus par le mandataire au jour de la conclusion du mandat :",{size:8,italic:!0}),$(m.tarifs||"............................",{size:8,indent:3}),oe(),Re("Art. 9. Rglement des litiges"),$("Le contrat est rgi par la loi franaise. Tout diffrend sera port devant le tribunal comptent.",{size:8}),$("En application de l'ordonnance n2015-1033 du 20 aot 2015, le mandant peut saisir le mdiateur de la consommation :",{size:8}),$(`${m.mediateur_nom||"............................"}`,{size:8,indent:3}),$(`${m.mediateur_adresse||"............................"}`,{size:8,indent:3}),Z&&(Re("Art. 10. Droit de retractation"),S.setFillColor(240,248,255),S.rect(C,L,F,30,"F"),S.setFontSize(8),S.setTextColor(0,60,120),S.text(A("Le Mandant a le droit de se retracter du present contrat sans donner de motif dans un delai de QUATORZE JOURS."),C+2,L+5),S.text(A("Le delai de retractation expire quatorze jours apres le jour de la conclusion du contrat."),C+2,L+10),S.text(A("Pour exercer ce droit, le Mandant doit notifier au Mandataire sa decision par declaration denuee d'ambiguite"),C+2,L+15),S.text(A("(lettre recommandee, telecopie ou courrier electronique)."),C+2,L+20),S.text(A("Un formulaire de retractation est joint en annexe du present contrat."),C+2,L+25),L+=33),Re(Z?"Art. 11. Traitement des donnees personnelles":"Art. 10. Traitement des donnees personnelles"),$("Conformement a la loi n 78-17 du 6 janvier 1978 et au Reglement europeen (UE) 2016/679 (RGPD), le Mandant est informe que le Mandataire procede au traitement de ses donnees personnelles. Ces donnees seront conservees 5 ans apres la fin de la relation commerciale (10 ans pour les mandats et registres legaux).",{size:7}),$("Le Mandant beneficie d'un droit d'acces, de rectification et d'effacement de ses donnees. Reclamation : CNIL - 3 Place de Fontenoy - 75334 PARIS CEDEX",{size:7}),Re(Z?"Art. 12. Opposition au demarchage":"Art. 11. Opposition au demarchage"),$(`Le Mandant est informe de l'existence de la liste d'opposition au demarchage telephonique "Bloctel" : https://conso.bloctel.fr/`,{size:8}),Re(Z?"Art. 13. Non-discrimination":"Art. 12. Non-discrimination"),$("Aucune personne ne peut se voir refuser l'acquisition d'un logement pour un motif discriminatoire defini a l'article 225-1 du Code penal. Les parties prennent l'engagement expres de n'opposer aucun refus discriminatoire. Toute discrimination est punie de 3 ans d'emprisonnement et 45 000 euros d'amende (art. 225-2 CP).",{size:8}),L+=5,Fe("J'accepte que mes donnees soient utilisees pour m'adresser des offres commerciales.",!1),Fe("J'accepte que mes donnees soient transmises a des partenaires commerciaux.",!1),oe(),L+=10,$(`Fait a ${a.lieu_signature||"............................."} le ${E(a.mandat_date)} en deux originaux.`,{size:10}),$("Un exemplaire numerote, date et signe est remis au Mandant qui le reconnait.",{size:9}),L+=5,$("Approuves ............... mots rayes nuls, ............... lignes.",{size:8,italic:!0}),L+=15;const et=(F-20)/2;S.setFontSize(10),S.setFont("helvetica","bold"),S.setTextColor(0),S.text("Le Mandant",C+et/2,L,{align:"center"}),S.text("Le Mandataire",C+et+20+et/2,L,{align:"center"}),L+=4,S.setFontSize(8),S.setFont("helvetica","italic"),S.text(A("Faire preceder la signature de"),C+et/2,L,{align:"center"}),S.text(A("Faire preceder la signature de"),C+et+20+et/2,L,{align:"center"}),L+=4,S.text(A('"Lu et approuve. Bon pour mandat"'),C+et/2,L,{align:"center"}),S.text(A('"Bon pour acceptation de mandat"'),C+et+20+et/2,L,{align:"center"}),L+=5,S.setDrawColor(180),S.rect(C,L,et,40),S.rect(C+et+20,L,et,40),Z&&(oe(),bt("FORMULAIRE DE RETRACTATION"),$("(Veuillez completer et renvoyer le present formulaire uniquement si vous souhaitez vous retracter du contrat)",{size:8,italic:!0}),L+=5,$(`A l'attention de : ${m.nom||"............................"}`,{size:9}),$(`Adresse : ${m.siege||"............................"}`,{size:9}),$(`Email : ${m.email||"............................"}`,{size:9}),L+=5,$("Je vous notifie par la presente ma retractation du contrat portant sur la prestation de service ci-dessous :",{size:9}),L+=3,$("Commande le / recu le : ............................",{size:9}),$("Nom du consommateur : ............................",{size:9}),$("Adresse du consommateur : ............................",{size:9}),L+=10,$("Signature :",{size:9}),S.rect(C,L+2,60,25),L+=30,$("Date : ............................",{size:9}))}else if(r.id==="bon_visite")bt("BON DE VISITE"),L+=10,$(`Je soussigne(e) ${a.client_civilite||""} ${a.client_nom||"............................"}`,{size:10}),$(`Demeurant : ${a.client_adresse||"............................"}`,{size:9}),$(`Telephone : ${a.client_telephone||".........."} - Email : ${a.client_email||".........."}`,{size:9}),L+=5,$("Reconnais avoir visite le bien suivant :",{size:10,bold:!0}),L+=3,ke("Reference",a.bien_reference),ke("Adresse",a.bien_adresse),ke("Prix affiche",I(a.prix_vente)),L+=5,ke("Date de la visite",E(a.visite_date)),ke("Heure",a.visite_heure),ke("Agent present",a.agent_nom),L+=8,$(`Presente par l'intermediaire de l'agence ${m.nom||"............................"}`,{size:9}),$("Je m'engage a ne pas traiter directement ou indirectement avec le proprietaire ou tout autre intermediaire pour ce bien, pendant la duree du mandat et les 12 mois suivants.",{size:8}),L+=15,$(`Fait a ........................ le ${E(a.visite_date||new Date().toISOString())}`,{size:10}),L+=10,$("Signature du visiteur :",{size:9}),S.rect(C,L+2,70,30);else if(r.id==="offre_achat"){bt("OFFRE D'ACHAT"),$("(Article 1583 du Code civil)",{size:8,italic:!0,center:!0,color:[100,100,100]}),L+=8,$("L'ACQUEREUR",{size:10,bold:!0}),$(`${a.acquereur_civilite||""} ${a.acquereur_nom||"............................"}`,{size:9}),$(`Demeurant : ${a.acquereur_adresse||"............................"}`,{size:9}),$(`Telephone : ${a.acquereur_telephone||".........."} - Email : ${a.acquereur_email||".........."}`,{size:9}),L+=5,$("FAIT L'OFFRE D'ACQUISITION DU BIEN SUIVANT",{size:10,bold:!0}),ke("Adresse du bien",a.bien_adresse),ke("Appartenant a",a.vendeur_nom),L+=5,$("CONDITIONS DE L'OFFRE",{size:10,bold:!0}),ke("Prix demande",I(a.prix_demande)),S.setFontSize(12),S.setFont("helvetica","bold"),L+=3,S.text(A(`PRIX PROPOSE : ${I(a.prix_offre)}`),C,L),L+=8,ke("Mode de financement",a.financement),a.apport&&ke("Apport personnel",I(a.apport)),a.pret&&ke("Montant du pret envisage",I(a.pret)),L+=3,$(`Cette offre est valable ${a.validite||"10"} jours a compter de ce jour.`,{size:9,bold:!0}),L+=3,$("CONDITIONS SUSPENSIVES",{size:10,bold:!0}),$(a.conditions||"Sous reserve de l'obtention d'un pret immobilier aux conditions du marche.",{size:9}),L+=10,$(`Fait a ........................ le ${E(new Date().toISOString())}`,{size:10}),L+=10;const ge=(F-20)/2;S.text(A("Signature de l'acquereur"),C,L),S.text(A("Signature du vendeur (pour acceptation)"),C+ge+20,L),L+=5,S.rect(C,L,ge,35),S.rect(C+ge+20,L,ge,35)}rr();const mr=a.mandant_nom||a.client_nom||a.acquereur_nom||"document",Q=`${r.id}_${mr.replace(/\s+/g,"_")}_${Date.now()}.pdf`;S.save(Q);const Wt=[{id:Date.now(),template:r.name,templateId:r.id,data:a,date:new Date().toISOString(),client:mr},...u].slice(0,30);h(Wt),localStorage.setItem(Wl,JSON.stringify(Wt))}catch(z){console.error("PDF error:",z),alert("Erreur lors de la gnration")}finally{c(!1)}},_=(()=>{if(!r)return[];const z=r.id.includes("mandat"),S=r.id==="bon_visite",D=r.id==="offre_achat";return z?[{id:1,title:"Mandant (vendeur)",fields:[{key:"mandant_civilite",label:"Civilit",type:"select",options:["M.","Mme","M. et Mme"]},{key:"mandant_nom",label:"Nom complet",type:"text",required:!0},{key:"mandant_naissance",label:"Date de naissance",type:"date"},{key:"mandant_lieu_naissance",label:"Lieu de naissance",type:"text"},{key:"mandant_nationalite",label:"Nationalit",type:"text",default:"Franaise"},{key:"mandant_regime",label:"Rgime matrimonial",type:"select",options:["Communaut lgale","Sparation de biens","Communaut universelle","Clibataire","Pacs(e)","Non applicable"]},{key:"mandant_adresse",label:"Adresse complte",type:"text",required:!0},{key:"mandant_telephone",label:"Tlphone",type:"text"},{key:"mandant_email",label:"Email",type:"email"}]},{id:2,title:"Bien immobilier",fields:[{key:"bien_type",label:"Type de bien",type:"select",options:["Appartement","Maison","Villa","Terrain","Local commercial","Immeuble","Parking/Box"]},{key:"bien_adresse",label:"Adresse du bien",type:"text",required:!0},{key:"bien_surface",label:"Surface Carrez (m)",type:"number"},{key:"bien_description",label:"Description dtaille",type:"textarea"},{key:"bien_libre",label:"Bien libre",type:"select",options:[["oui","Libre de toute occupation"],["non","Lou"]]},{key:"diagnostics_charge",label:"Diagnostics",type:"select",options:[["mandant"," la charge du mandant"],["mandataire"," faire par le mandataire"]]}]},{id:3,title:"Conditions du mandat",fields:[{key:"mandat_numero",label:"N de mandat",type:"text",required:!0},{key:"mandat_date",label:"Date de signature",type:"date",required:!0},{key:"mandat_duree",label:"Dure (mois)",type:"number",default:3,required:!0},{key:"mandat_tacite",label:"Tacite reconduction",type:"select",options:[["non","Non"],["oui","Oui"]]},{key:"lieu_signature",label:"Lieu de signature",type:"text"},{key:"diffusion",label:"Moyens de diffusion",type:"text",default:"Internet, vitrine, rseaux partenaires"}]},{id:4,title:"Prix et honoraires",fields:[{key:"prix_vente",label:"Prix de vente ()",type:"number",required:!0},{key:"honoraires_pourcentage",label:"Honoraires (%)",type:"number",default:5},{key:"honoraires_montant",label:"Honoraires ()",type:"number"},{key:"honoraires_charge",label:" la charge de",type:"select",options:[["acquereur","Acqureur"],["vendeur","Vendeur"],["partage","Partags"]]},{key:"sequestre",label:"Squestre",type:"select",options:[["notaire","Notaire"],["mandataire","Mandataire"]]},{key:"notaire",label:"Notaire dsign",type:"text"}]}]:S?[{id:1,title:"Client visiteur",fields:[{key:"client_civilite",label:"Civilit",type:"select",options:["M.","Mme","M. et Mme"]},{key:"client_nom",label:"Nom complet",type:"text",required:!0},{key:"client_adresse",label:"Adresse",type:"text"},{key:"client_telephone",label:"Tlphone",type:"text",required:!0},{key:"client_email",label:"Email",type:"email"}]},{id:2,title:"Bien et visite",fields:[{key:"bien_reference",label:"Rfrence du bien",type:"text"},{key:"bien_adresse",label:"Adresse du bien",type:"text",required:!0},{key:"prix_vente",label:"Prix affich ()",type:"number"},{key:"visite_date",label:"Date de visite",type:"date",required:!0},{key:"visite_heure",label:"Heure",type:"time"},{key:"agent_nom",label:"Agent prsent",type:"text",required:!0}]}]:D?[{id:1,title:"Acqureur",fields:[{key:"acquereur_civilite",label:"Civilit",type:"select",options:["M.","Mme","M. et Mme"]},{key:"acquereur_nom",label:"Nom complet",type:"text",required:!0},{key:"acquereur_adresse",label:"Adresse",type:"text",required:!0},{key:"acquereur_telephone",label:"Tlphone",type:"text"},{key:"acquereur_email",label:"Email",type:"email"}]},{id:2,title:"Bien et offre",fields:[{key:"bien_adresse",label:"Adresse du bien",type:"text",required:!0},{key:"vendeur_nom",label:"Nom du vendeur",type:"text"},{key:"prix_demande",label:"Prix demand ()",type:"number"},{key:"prix_offre",label:"Prix propos ()",type:"number",required:!0},{key:"financement",label:"Mode de financement",type:"select",options:["Comptant","Crdit immobilier","Mixte (apport + crdit)"]},{key:"apport",label:"Apport personnel ()",type:"number"},{key:"pret",label:"Montant du prt ()",type:"number"},{key:"validite",label:"Validit de l'offre (jours)",type:"number",default:10},{key:"conditions",label:"Conditions suspensives",type:"textarea",default:"Sous rserve de l'obtention d'un prt immobilier aux conditions du march."}]}]:[]})(),N=_.find(z=>z.id===s),q=m.nom&&m.carte_pro;return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Yt,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Gnrateur de documents"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Documents conformes UNIS/CNACIM  Loi Hoguet  MAJ dcembre 2024"})]})]}),n.jsxs("button",{onClick:()=>f(!0),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer"},children:[n.jsx(cy,{size:16})," Paramtres agence"]})]}),!q&&n.jsxs("div",{style:{padding:"12px 16px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"8px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(Aj,{size:18,style:{color:"#f59e0b"}}),n.jsx("span",{style:{fontSize:"13px",color:"#f59e0b"},children:"Configurez votre agence (carte pro, garantie...) avant de gnrer des documents conformes."})]}),n.jsxs("a",{href:"https://www.cnacim.immo/modeles-de-mandats/",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"6px",marginTop:"12px",padding:"6px 12px",background:"var(--bg-tertiary)",borderRadius:"6px",color:"var(--text-muted)",fontSize:"12px",textDecoration:"none"},children:[n.jsx(ot,{size:12})," Modles officiels CNACIM"]})]}),p&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:n.jsxs("div",{style:{width:"100%",maxWidth:"700px",background:"var(--bg-card)",borderRadius:"16px",maxHeight:"90vh",overflow:"auto"},children:[n.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid var(--border-color)",display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,background:"var(--bg-card)",zIndex:1},children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600"},children:"Paramtres de l'agence"}),n.jsx("button",{onClick:()=>f(!1),style:{padding:"8px",background:"transparent",border:"none",cursor:"pointer",color:"var(--text-muted)"},children:n.jsx(Nt,{size:20})})]}),n.jsx("div",{style:{padding:"20px",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:[{key:"nom",label:"Nom de l'agence *",span:2},{key:"forme_juridique",label:"Forme juridique",type:"select",options:["SARL","SAS","EURL","EI","Auto-entrepreneur"]},{key:"capital",label:"Capital ()"},{key:"siege",label:"Sige social (adresse complte) *",span:2},{key:"rcs",label:"N RCS"},{key:"tva",label:"N TVA"},{key:"telephone",label:"Tlphone"},{key:"email",label:"Email"},{key:"carte_pro",label:"N carte professionnelle *"},{key:"carte_delivree_par",label:"CCI dlivrant la carte"},{key:"garantie_nom",label:"Organisme garantie financire"},{key:"garantie_montant",label:"Montant garantie ()"},{key:"assurance_nom",label:"Assurance RCP"},{key:"assurance_adresse",label:"Adresse assurance"},{key:"compte_sequestre",label:"N compte squestre"},{key:"banque_sequestre",label:"Banque squestre"},{key:"mediateur_nom",label:"Mdiateur consommation",span:2},{key:"mediateur_adresse",label:"Coordonnes mdiateur",span:2},{key:"tarifs",label:"Barme des honoraires",span:2,type:"textarea"}].map(z=>n.jsxs("div",{style:{gridColumn:z.span===2?"1 / -1":"auto"},children:[n.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",marginBottom:"4px"},children:z.label}),z.type==="select"?n.jsx("select",{value:m[z.key]||"",onChange:S=>b(D=>({...D,[z.key]:S.target.value})),style:{width:"100%",padding:"10px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"6px",color:"var(--text-primary)",fontSize:"13px"},children:z.options.map(S=>n.jsx("option",{value:S,children:S},S))}):z.type==="textarea"?n.jsx("textarea",{value:m[z.key]||"",onChange:S=>b(D=>({...D,[z.key]:S.target.value})),rows:2,style:{width:"100%",padding:"10px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"6px",color:"var(--text-primary)",fontSize:"13px",resize:"vertical"}}):n.jsx("input",{type:"text",value:m[z.key]||"",onChange:S=>b(D=>({...D,[z.key]:S.target.value})),style:{width:"100%",padding:"10px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"6px",color:"var(--text-primary)",fontSize:"13px"}})]},z.key))}),n.jsx("div",{style:{padding:"20px",borderTop:"1px solid var(--border-color)"},children:n.jsx("button",{onClick:j,style:{width:"100%",padding:"14px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"8px",color:"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Enregistrer"})})]})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:r?"280px 1fr":"1fr",gap:"24px"},children:[n.jsxs("div",{children:[!r&&n.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap"},children:RS.map(z=>n.jsx("button",{onClick:()=>e(z),style:{padding:"8px 14px",background:t===z?"var(--gold)":"var(--bg-card)",border:`1px solid ${t===z?"var(--gold)":"var(--border-color)"}`,borderRadius:"8px",color:t===z?"var(--bg-primary)":"var(--text-secondary)",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:z},z))}),r?n.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",overflow:"hidden"},children:[n.jsx("div",{style:{padding:"14px 16px",borderBottom:"1px solid var(--border-color)"},children:n.jsxs("button",{onClick:()=>{i(null),o(1)},style:{padding:"6px 12px",background:"var(--bg-tertiary)",border:"none",borderRadius:"6px",color:"var(--text-muted)",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(ka,{size:14})," Retour"]})}),_.map(z=>n.jsxs("div",{onClick:()=>o(z.id),style:{padding:"12px 16px",borderBottom:"1px solid var(--border-color)",cursor:"pointer",background:s===z.id?"rgba(212, 175, 55, 0.1)":"transparent",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx("span",{style:{width:"24px",height:"24px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:s===z.id?"var(--gold)":"var(--bg-tertiary)",color:s===z.id?"var(--bg-primary)":"var(--text-muted)",fontSize:"12px",fontWeight:"600"},children:z.id}),n.jsx("span",{style:{fontSize:"13px",color:s===z.id?"var(--gold)":"var(--text-secondary)",fontWeight:s===z.id?"500":"400"},children:z.title})]}),z.fields.filter(S=>S.required).every(S=>a[S.key])&&n.jsx(re,{size:14,style:{color:"#22c55e"}})]},z.id))]}):n.jsx("div",{style:{display:"grid",gap:"12px"},children:R.map(z=>n.jsxs("div",{onClick:()=>T(z),style:{padding:"16px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(z.icon,{size:20,style:{color:"var(--gold)"}})}),n.jsxs("div",{style:{flex:1},children:[n.jsx("h3",{style:{fontSize:"14px",fontWeight:"600"},children:z.name}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:z.description}),n.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"6px"},children:[n.jsxs("span",{style:{padding:"2px 6px",background:"var(--bg-tertiary)",borderRadius:"4px",fontSize:"10px",color:"var(--text-muted)"},children:[z.pages," pages"]}),n.jsx("span",{style:{padding:"2px 6px",background:"rgba(34, 197, 94, 0.1)",borderRadius:"4px",fontSize:"10px",color:"#22c55e"},children:z.source})]})]}),n.jsx(wn,{size:18,style:{color:"var(--text-muted)"}})]},z.id))})]}),r&&N&&n.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",overflow:"hidden"},children:[n.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid var(--border-color)"},children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:"600"},children:r.name}),n.jsxs("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:["tape ",s,"/",_.length," : ",N.title]})]}),s===2&&r.id.includes("mandat")&&x.length>0&&n.jsx("div",{style:{padding:"16px 24px",background:"var(--bg-tertiary)",borderBottom:"1px solid var(--border-color)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(we,{size:16,style:{color:"var(--gold)"}}),n.jsx("span",{style:{fontSize:"13px",fontWeight:"500"},children:"Remplir depuis une annonce"}),n.jsxs("select",{onChange:z=>{const S=x.find(D=>D.id===z.target.value);S&&P(S)},value:(v==null?void 0:v.id)||"",style:{flex:1,padding:"8px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"6px",fontSize:"13px",color:"var(--text-primary)"},children:[n.jsx("option",{value:"",children:"Slectionner un bien..."}),x.map(z=>n.jsxs("option",{value:z.id,children:[z.title," - ",z.location]},z.id))]})]})}),n.jsx("div",{style:{padding:"24px",maxHeight:"400px",overflowY:"auto"},children:n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"16px"},children:N.fields.map(z=>n.jsxs("div",{style:{gridColumn:z.type==="textarea"?"1 / -1":"auto"},children:[n.jsxs("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",marginBottom:"6px",color:"var(--text-secondary)"},children:[z.label," ",z.required&&n.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),z.type==="select"?n.jsxs("select",{value:a[z.key]||"",onChange:S=>k(z.key,S.target.value),style:{width:"100%",padding:"10px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"},children:[n.jsx("option",{value:"",children:"Slectionner..."}),z.options.map(S=>Array.isArray(S)?n.jsx("option",{value:S[0],children:S[1]},S[0]):n.jsx("option",{value:S,children:S},S))]}):z.type==="textarea"?n.jsx("textarea",{value:a[z.key]||z.default||"",onChange:S=>k(z.key,S.target.value),rows:3,style:{width:"100%",padding:"10px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px",resize:"vertical"}}):n.jsx("input",{type:z.type,value:a[z.key]||"",onChange:S=>k(z.key,z.type==="number"?parseFloat(S.target.value)||"":S.target.value),style:{width:"100%",padding:"10px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]},z.key))})}),n.jsxs("div",{style:{padding:"20px 24px",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between"},children:[n.jsxs("button",{onClick:()=>o(Math.max(1,s-1)),disabled:s===1,style:{padding:"12px 20px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:s===1?"var(--text-muted)":"var(--text-secondary)",fontSize:"14px",cursor:s===1?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(ka,{size:18})," Prcdent"]}),s<_.length?n.jsxs("button",{onClick:()=>o(s+1),style:{padding:"12px 24px",background:"var(--gold)",border:"none",borderRadius:"8px",color:"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:["Suivant ",n.jsx(wn,{size:18})]}):n.jsxs("button",{onClick:O,disabled:l,style:{padding:"12px 24px",background:l?"var(--bg-tertiary)":"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"8px",color:l?"var(--text-muted)":"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:l?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[l?n.jsx(Ie,{size:18,style:{animation:"spin 1s linear infinite"}}):n.jsx(qs,{size:18}),l?"Gnration...":"Gnrer le PDF"]})]})]})]}),!r&&u.length>0&&n.jsxs("div",{style:{marginTop:"32px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Documents rcents"}),n.jsx("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",overflow:"hidden"},children:u.slice(0,10).map((z,S)=>n.jsxs("div",{style:{padding:"14px 20px",borderBottom:S<9?"1px solid var(--border-color)":"none",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(Vj,{size:18,style:{color:"#ef4444"}}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500"},children:z.template}),n.jsxs("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:[z.client,"  ",new Date(z.date).toLocaleDateString("fr-FR")]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsxs("button",{onClick:()=>{const D=Ul.find(M=>M.id===z.templateId);D&&(T(D),d(z.data))},style:{padding:"6px 12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"6px",color:"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:[n.jsx(Is,{size:12,style:{marginRight:"4px"}})," Modifier"]}),n.jsx("button",{onClick:()=>{if(confirm("Supprimer ?")){const D=u.filter(M=>M.id!==z.id);h(D),localStorage.setItem(Wl,JSON.stringify(D))}},style:{padding:"6px",background:"rgba(239, 68, 68, 0.1)",border:"none",borderRadius:"6px",color:"#ef4444",cursor:"pointer"},children:n.jsx(Et,{size:14})})]})]},z.id))})]}),n.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})}const TS=[{id:"modern",name:"Moderne",preview:""},{id:"classic",name:"Classique",preview:""},{id:"luxury",name:"Luxe",preview:""},{id:"minimal",name:"Minimaliste",preview:""}],Vh=[{id:"gold",primary:"#d4af37",secondary:"#0a0a0f",name:"Or & Noir"},{id:"blue",primary:"#3b82f6",secondary:"#1e3a5f",name:"Bleu Pro"},{id:"green",primary:"#22c55e",secondary:"#0f3d2a",name:"Vert Nature"},{id:"purple",primary:"#8b5cf6",secondary:"#2d1b4e",name:"Violet Luxe"}];function IS(){const[t,e]=w.useState([{id:1,title:"Appartement T3 Vue Mer",price:45e4,location:"Nice - Promenade",image:"https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=400"},{id:2,title:"Villa 5 pices avec piscine",price:89e4,location:"Antibes - Cap",image:"https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=400"},{id:3,title:"Studio rnov centre",price:185e3,location:"Nice - Libration",image:"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400"}]),[r,i]=w.useState(null),[s,o]=w.useState("modern"),[a,d]=w.useState(Vh[0]),[l,c]=w.useState(!1),[u,h]=w.useState(!1),[p,f]=w.useState("Scannez pour plus de photos et infos"),x=async()=>{r&&(c(!0),await new Promise(v=>setTimeout(v,2e3)),h(!0),c(!1))},y=v=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(v);return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsx("div",{style:{marginBottom:"32px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Qi,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Flyers QR Code"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Crez des flyers imprimables avec QR code"})]})]})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"350px 1fr",gap:"24px"},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(we,{size:16}),"Slectionner un bien"]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.map(v=>n.jsxs("button",{onClick:()=>{i(v),h(!1)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:(r==null?void 0:r.id)===v.id?"rgba(212, 175, 55, 0.1)":"var(--bg-tertiary)",border:"1px solid "+((r==null?void 0:r.id)===v.id?"var(--gold)":"var(--border-color)"),borderRadius:"10px",cursor:"pointer",textAlign:"left"},children:[n.jsx("img",{src:v.image,alt:"",style:{width:"50px",height:"50px",borderRadius:"6px",objectFit:"cover"}}),n.jsxs("div",{style:{flex:1,overflow:"hidden"},children:[n.jsx("p",{style:{fontSize:"13px",fontWeight:"500",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:(r==null?void 0:r.id)===v.id?"var(--gold)":"var(--text-primary)"},children:v.title}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:y(v.price)})]}),(r==null?void 0:r.id)===v.id&&n.jsx(re,{size:16,style:{color:"var(--gold)"}})]},v.id))})]}),n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(Xj,{size:16}),"Template"]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:TS.map(v=>n.jsxs("button",{onClick:()=>{o(v.id),h(!1)},style:{padding:"16px",background:s===v.id?"rgba(212, 175, 55, 0.1)":"var(--bg-tertiary)",border:"1px solid "+(s===v.id?"var(--gold)":"var(--border-color)"),borderRadius:"10px",cursor:"pointer",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:v.preview}),n.jsx("p",{style:{fontSize:"12px",fontWeight:"500",color:s===v.id?"var(--gold)":"var(--text-secondary)"},children:v.name})]},v.id))})]}),n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(ly,{size:16}),"Couleurs"]}),n.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Vh.map(v=>n.jsx("button",{onClick:()=>{d(v),h(!1)},style:{width:"50px",height:"50px",borderRadius:"10px",background:`linear-gradient(135deg, ${v.primary} 50%, ${v.secondary} 50%)`,border:a.id===v.id?"3px solid white":"3px solid transparent",cursor:"pointer",boxShadow:a.id===v.id?"0 0 0 2px var(--gold)":"none"},title:v.name},v.id))})]}),n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(gw,{size:16}),"Texte personnalis"]}),n.jsx("input",{type:"text",value:p,onChange:v=>{f(v.target.value),h(!1)},placeholder:"Texte sous le QR code",style:{width:"100%",padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"14px"}})]})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600"},children:"Aperu du flyer"}),n.jsx("div",{style:{display:"flex",gap:"8px"},children:u&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer"},children:[n.jsx(lw,{size:16}),"Imprimer"]}),n.jsxs("button",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer"},children:[n.jsx(qs,{size:16}),"PDF"]})]})})]}),n.jsx("div",{style:{width:"100%",maxWidth:"400px",margin:"0 auto",aspectRatio:"210/297",background:a.secondary,borderRadius:"8px",overflow:"hidden",boxShadow:"0 20px 40px rgba(0,0,0,0.3)"},children:r?n.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[n.jsxs("div",{style:{height:"45%",position:"relative"},children:[n.jsx("img",{src:r.image,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}),n.jsx("div",{style:{position:"absolute",top:"16px",left:"16px",padding:"8px 16px",background:a.primary,color:a.secondary,borderRadius:"6px",fontWeight:"700",fontSize:"14px"},children:y(r.price)})]}),n.jsxs("div",{style:{flex:1,padding:"24px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[n.jsxs("div",{children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:"700",color:"white",marginBottom:"8px"},children:r.title}),n.jsxs("p",{style:{fontSize:"13px",color:"rgba(255,255,255,0.7)"},children:[" ",r.location]})]}),n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{width:"120px",height:"120px",background:"white",borderRadius:"12px",margin:"0 auto 12px",display:"flex",alignItems:"center",justifyContent:"center",padding:"8px"},children:u?n.jsx("div",{style:{width:"100%",height:"100%",background:`repeating-linear-gradient(
                            0deg,
                            #000 0px, #000 8px,
                            #fff 8px, #fff 16px
                          ),
                          repeating-linear-gradient(
                            90deg,
                            #000 0px, #000 8px,
                            #fff 8px, #fff 16px
                          )`,backgroundBlendMode:"difference"}}):n.jsx(Qi,{size:60,style:{color:"#ccc"}})}),n.jsx("p",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)"},children:p})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",paddingTop:"16px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[n.jsx("div",{style:{width:"28px",height:"28px",background:a.primary,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",color:a.secondary,fontSize:"12px"},children:"C"}),n.jsx("span",{style:{color:"white",fontWeight:"600",fontSize:"13px"},children:"CSX Immobilier"})]})]})]}):n.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"rgba(255,255,255,0.4)"},children:[n.jsx(Qi,{size:48,style:{marginBottom:"16px"}}),n.jsx("p",{style:{fontSize:"14px"},children:"Slectionnez un bien"})]})}),r&&n.jsx("div",{style:{textAlign:"center",marginTop:"24px"},children:n.jsx("button",{onClick:x,disabled:l,style:{display:"inline-flex",alignItems:"center",gap:"10px",padding:"16px 32px",background:u?"#22c55e":"var(--gold)",border:"none",borderRadius:"12px",color:u?"white":"var(--bg-primary)",fontWeight:"600",fontSize:"15px",cursor:l?"wait":"pointer"},children:l?n.jsxs(n.Fragment,{children:[n.jsx(Ie,{size:20,style:{animation:"spin 1s linear infinite"}}),"Gnration..."]}):u?n.jsxs(n.Fragment,{children:[n.jsx(re,{size:20}),"QR Code gnr !"]}):n.jsxs(n.Fragment,{children:[n.jsx(Qi,{size:20}),"Gnrer le flyer"]})})})]})]}),n.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
      `})]})}const PS=[{id:"elegant",name:"lgant",description:"Piano doux et cordes"},{id:"modern",name:"Moderne",description:"lectro minimaliste"},{id:"upbeat",name:"Dynamique",description:"Rythme entranant"},{id:"ambient",name:"Ambiance",description:"Sons apaisants"},{id:"luxury",name:"Luxe",description:"Orchestral premium"},{id:"none",name:"Sans musique",description:"Silencieux"}],AS=[{id:"fade",name:"Fondu"},{id:"slide",name:"Glissement"},{id:"zoom",name:"Zoom"},{id:"kenburns",name:"Ken Burns"}],OS=[{id:3,name:"3 sec"},{id:5,name:"5 sec"},{id:7,name:"7 sec"},{id:10,name:"10 sec"}];function LS(){var M;const[t,e]=w.useState([]),[r,i]=w.useState(null),[s,o]=w.useState([]),[a,d]=w.useState("elegant"),[l,c]=w.useState("kenburns"),[u,h]=w.useState(5),[p,f]=w.useState(!1),[x,y]=w.useState(0),[v,g]=w.useState(!1),[m,b]=w.useState(!1),[j,R]=w.useState(null),[T,k]=w.useState(!1),[P,I]=w.useState(!0),[E,A]=w.useState(!0),[O,W]=w.useState(!0);w.useEffect(()=>{_()},[]),w.useEffect(()=>{let C;return p&&s.length>0&&(C=setInterval(()=>{y(F=>(F+1)%s.length)},u*1e3)),()=>clearInterval(C)},[p,u,s.length]);const _=async()=>{const{data:{user:C}}=await G.auth.getUser();if(!C)return;const{data:F,error:L}=await G.from("listings").select("*").eq("user_id",C.id).order("created_at",{ascending:!1});!L&&F&&e(F)},N=C=>{i(C),o(C.images||[]),y(0),f(!1),R(null)},q=(C,F)=>{const L=[...s],X=C+F;X<0||X>=s.length||([L[C],L[X]]=[L[X],L[C]],o(L))},z=C=>{o(s.filter((F,L)=>L!==C))},S=async()=>{s.length<2||(b(!0),await new Promise(C=>setTimeout(C,3e3)),R({id:Date.now(),url:"#",thumbnail:s[0],duration:s.length*u,createdAt:new Date().toISOString()}),b(!1))},D=C=>{const F=Math.floor(C/60),L=C%60;return`${F}:${L.toString().padStart(2,"0")}`};return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsxs(te,{to:"/tools",style:{display:"inline-flex",alignItems:"center",gap:"8px",color:"var(--text-muted)",textDecoration:"none",marginBottom:"16px",fontSize:"14px"},children:[n.jsx(Za,{size:16}),"Retour aux outils"]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(236, 72, 153, 0.2) 0%, rgba(236, 72, 153, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(_n,{size:24,style:{color:"#ec4899"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Visite Virtuelle"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Crez des vidos immersives de vos biens"})]})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"24px"},children:[n.jsx("div",{children:r?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{position:"relative",aspectRatio:"16/9",background:"#000",borderRadius:"16px",overflow:"hidden",marginBottom:"24px"},children:s.length>0?n.jsxs(n.Fragment,{children:[n.jsx("img",{src:s[x],alt:`Slide ${x+1}`,style:{width:"100%",height:"100%",objectFit:"cover",animation:l==="kenburns"?"kenburns 10s ease-in-out infinite":"none"}}),n.jsxs("div",{style:{position:"absolute",bottom:"80px",left:"24px",right:"24px",color:"white",textShadow:"0 2px 4px rgba(0,0,0,0.5)"},children:[P&&n.jsx("h3",{style:{fontSize:"24px",fontWeight:"600",marginBottom:"8px"},children:r.title}),E&&n.jsxs("p",{style:{fontSize:"20px",color:"var(--gold)"},children:[(M=r.price)==null?void 0:M.toLocaleString("fr-FR")," "]}),O&&n.jsxs("p",{style:{fontSize:"14px",opacity:.9,marginTop:"8px"},children:[r.bedrooms," ch  ",r.bathrooms," sdb  ",r.surface," m"]})]}),n.jsxs("div",{style:{position:"absolute",bottom:0,left:0,right:0,padding:"16px 24px",background:"linear-gradient(transparent, rgba(0,0,0,0.8))",display:"flex",alignItems:"center",gap:"16px"},children:[n.jsx("button",{onClick:()=>y(C=>C===0?s.length-1:C-1),style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"8px"},children:n.jsx(uw,{size:20})}),n.jsx("button",{onClick:()=>f(!p),style:{background:"var(--gold)",border:"none",color:"black",cursor:"pointer",padding:"12px",borderRadius:"50%"},children:p?n.jsx(Pu,{size:24}):n.jsx(_n,{size:24})}),n.jsx("button",{onClick:()=>y(C=>(C+1)%s.length),style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"8px"},children:n.jsx(pw,{size:20})}),n.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:"8px"},children:[n.jsxs("span",{style:{fontSize:"12px",color:"white"},children:[x+1,"/",s.length]}),n.jsx("div",{style:{flex:1,height:"4px",background:"rgba(255,255,255,0.3)",borderRadius:"2px"},children:n.jsx("div",{style:{width:`${(x+1)/s.length*100}%`,height:"100%",background:"var(--gold)",borderRadius:"2px",transition:"width 0.3s"}})}),n.jsx("span",{style:{fontSize:"12px",color:"white"},children:D(s.length*u)})]}),n.jsx("button",{onClick:()=>g(!v),style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"8px"},children:v?n.jsx(yw,{size:20}):n.jsx(mw,{size:20})}),n.jsx("button",{onClick:()=>k(!0),style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"8px"},children:n.jsx(tw,{size:20})})]})]}):n.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"var(--text-muted)"},children:[n.jsx(li,{size:48,style:{marginBottom:"16px"}}),n.jsx("p",{children:"Aucune photo disponible"})]})}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[n.jsxs("h3",{style:{fontSize:"16px",fontWeight:"600"},children:["Ordre des photos (",s.length,")"]}),n.jsx("button",{onClick:()=>N(null),style:{padding:"8px 16px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",cursor:"pointer",fontSize:"13px"},children:"Changer de bien"})]}),n.jsx("div",{style:{display:"flex",gap:"12px",overflowX:"auto",paddingBottom:"8px"},children:s.map((C,F)=>n.jsxs("div",{style:{position:"relative",flexShrink:0,width:"120px",borderRadius:"8px",overflow:"hidden",border:x===F?"2px solid var(--gold)":"2px solid transparent"},children:[n.jsx("img",{src:C,alt:`Photo ${F+1}`,style:{width:"100%",aspectRatio:"16/10",objectFit:"cover",cursor:"pointer"},onClick:()=>y(F)}),n.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",background:"rgba(0,0,0,0.7)",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"600"},children:F+1}),n.jsxs("div",{style:{position:"absolute",top:"4px",right:"4px",display:"flex",flexDirection:"column",gap:"2px"},children:[n.jsx("button",{onClick:()=>q(F,-1),disabled:F===0,style:{background:"rgba(0,0,0,0.7)",border:"none",color:"white",cursor:F===0?"not-allowed":"pointer",opacity:F===0?.5:1,padding:"2px",borderRadius:"2px"},children:n.jsx(Fj,{size:12})}),n.jsx("button",{onClick:()=>q(F,1),disabled:F===s.length-1,style:{background:"rgba(0,0,0,0.7)",border:"none",color:"white",cursor:F===s.length-1?"not-allowed":"pointer",opacity:F===s.length-1?.5:1,padding:"2px",borderRadius:"2px"},children:n.jsx(sy,{size:12})})]}),s.length>2&&n.jsx("button",{onClick:()=>z(F),style:{position:"absolute",bottom:"4px",right:"4px",background:"rgba(239,68,68,0.9)",border:"none",color:"white",cursor:"pointer",padding:"4px",borderRadius:"4px"},children:n.jsx(Et,{size:12})})]},F))})]})]}):n.jsxs("div",{style:{padding:"40px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h2",{style:{fontSize:"18px",marginBottom:"24px"},children:"Slectionnez un bien"}),t.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[n.jsx(li,{size:48,style:{color:"var(--text-muted)",marginBottom:"16px"}}),n.jsx("p",{style:{color:"var(--text-muted)"},children:"Aucun bien disponible"}),n.jsx(te,{to:"/listings/new",style:{display:"inline-flex",alignItems:"center",gap:"8px",marginTop:"16px",padding:"12px 24px",background:"var(--gold)",color:"black",borderRadius:"8px",textDecoration:"none",fontWeight:"600"},children:"Crer un bien"})]}):n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"16px"},children:t.map(C=>{var F,L;return n.jsxs("div",{onClick:()=>N(C),style:{padding:"12px",background:"var(--bg-primary)",border:"1px solid var(--border-color)",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:X=>{X.currentTarget.style.borderColor="#ec4899",X.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:X=>{X.currentTarget.style.borderColor="var(--border-color)",X.currentTarget.style.transform="translateY(0)"},children:[n.jsx("div",{style:{width:"100%",aspectRatio:"16/10",borderRadius:"8px",overflow:"hidden",marginBottom:"12px",background:"var(--bg-secondary)"},children:(F=C.images)!=null&&F[0]?n.jsx("img",{src:C.images[0],alt:C.title,style:{width:"100%",height:"100%",objectFit:"cover"}}):n.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(li,{size:24,style:{color:"var(--text-muted)"}})})}),n.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"4px"},children:C.title}),n.jsxs("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:[((L=C.images)==null?void 0:L.length)||0," photos"]})]},C.id)})})]})}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",height:"fit-content"},children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"24px"},children:"Paramtres de la visite"}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:[n.jsx(iw,{size:16}),"Musique de fond"]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:PS.map(C=>n.jsx("div",{onClick:()=>d(C.id),style:{padding:"12px",background:a===C.id?"rgba(236, 72, 153, 0.1)":"var(--bg-primary)",border:a===C.id?"1px solid #ec4899":"1px solid var(--border-color)",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},children:n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500"},children:C.name}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:C.description})]}),a===C.id&&n.jsx(re,{size:16,style:{color:"#ec4899"}})]})},C.id))})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:[n.jsx(Ur,{size:16}),"Transition"]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:AS.map(C=>n.jsx("button",{onClick:()=>c(C.id),style:{padding:"12px",background:l===C.id?"rgba(236, 72, 153, 0.1)":"var(--bg-primary)",border:l===C.id?"1px solid #ec4899":"1px solid var(--border-color)",borderRadius:"8px",cursor:"pointer",color:"var(--text-primary)",fontSize:"14px"},children:C.name},C.id))})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:[n.jsx(Rn,{size:16}),"Dure par photo"]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px"},children:OS.map(C=>n.jsx("button",{onClick:()=>h(C.id),style:{padding:"12px",background:u===C.id?"rgba(236, 72, 153, 0.1)":"var(--bg-primary)",border:u===C.id?"1px solid #ec4899":"1px solid var(--border-color)",borderRadius:"8px",cursor:"pointer",color:"var(--text-primary)",fontSize:"14px"},children:C.name},C.id))})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:[n.jsx(Yr,{size:16}),"Informations affiches"]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[{id:"address",label:"Adresse",value:P,setter:I},{id:"price",label:"Prix",value:E,setter:A},{id:"details",label:"Dtails (chambres, surface...)",value:O,setter:W}].map(C=>n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"var(--bg-primary)",border:"1px solid var(--border-color)",borderRadius:"8px",cursor:"pointer"},children:[n.jsx("input",{type:"checkbox",checked:C.value,onChange:F=>C.setter(F.target.checked),style:{width:"18px",height:"18px",accentColor:"#ec4899"}}),n.jsx("span",{style:{fontSize:"14px"},children:C.label})]},C.id))})]}),n.jsx("button",{onClick:S,disabled:!r||s.length<2||m,style:{width:"100%",padding:"16px",background:!r||s.length<2?"var(--bg-secondary)":"linear-gradient(135deg, #ec4899 0%, #db2777 100%)",border:"none",borderRadius:"12px",color:!r||s.length<2?"var(--text-muted)":"white",fontSize:"16px",fontWeight:"600",cursor:!r||s.length<2?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:m?n.jsxs(n.Fragment,{children:[n.jsx(Ur,{size:20,style:{animation:"spin 1s linear infinite"}}),"Gnration en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(He,{size:20}),"Gnrer la visite virtuelle"]})}),s.length<2&&r&&n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",textAlign:"center",marginTop:"8px"},children:"Minimum 2 photos requises"}),j&&n.jsxs("div",{style:{marginTop:"24px",padding:"16px",background:"linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(34, 197, 94, 0.02) 100%)",border:"1px solid rgba(34, 197, 94, 0.3)",borderRadius:"12px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[n.jsx(re,{size:20,style:{color:"#22c55e"}}),n.jsx("span",{style:{fontWeight:"600",color:"#22c55e"},children:"Visite gnre !"})]}),n.jsxs("p",{style:{fontSize:"13px",color:"var(--text-muted)",marginBottom:"16px"},children:["Dure totale: ",D(j.duration)]}),n.jsx("div",{style:{display:"flex",gap:"8px"},children:n.jsxs("button",{style:{flex:1,padding:"12px",background:"var(--gold)",border:"none",borderRadius:"8px",color:"black",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[n.jsx(qs,{size:16}),"Tlcharger MP4"]})})]})]})]}),n.jsx("style",{children:`
        @keyframes kenburns {
          0% { transform: scale(1) translate(0, 0); }
          50% { transform: scale(1.1) translate(-2%, -1%); }
          100% { transform: scale(1) translate(0, 0); }
        }
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}const Hh="csx_voice_notes",ql=[{id:"apartment",name:"Appartement",icon:we},{id:"house",name:"Maison",icon:tr},{id:"villa",name:"Villa",icon:tr},{id:"commercial",name:"Local commercial",icon:we}];function DS(){const[t,e]=w.useState(!1),[r,i]=w.useState(""),[s,o]=w.useState(""),[a,d]=w.useState(!1),[l,c]=w.useState(""),[u,h]=w.useState("apartment"),[p,f]=w.useState(!1),[x,y]=w.useState([]),[v,g]=w.useState(null),[m,b]=w.useState(!0),j=w.useRef(null);w.useEffect(()=>{const O=window.SpeechRecognition||window.webkitSpeechRecognition;if(!O){b(!1);return}const W=new O;W.continuous=!0,W.interimResults=!0,W.lang="fr-FR",W.onresult=N=>{let q="",z="";for(let S=N.resultIndex;S<N.results.length;S++){const D=N.results[S][0].transcript;N.results[S].isFinal?z+=D+" ":q+=D}z&&i(S=>S+z),o(q)},W.onerror=N=>{console.error("Speech recognition error:",N.error),N.error==="not-allowed"?g("Accs au microphone refus. Veuillez autoriser l'accs dans les paramtres du navigateur."):N.error==="no-speech"||g(`Erreur: ${N.error}`),e(!1)},W.onend=()=>{if(t&&j.current)try{j.current.start()}catch{}},j.current=W;const _=localStorage.getItem(Hh);return _&&y(JSON.parse(_).slice(0,5)),()=>{j.current&&j.current.stop()}},[]);const R=()=>{if(j.current){g(null),o("");try{j.current.start(),e(!0)}catch(O){console.error("Error starting recognition:",O),g("Impossible de dmarrer la reconnaissance vocale.")}}},T=()=>{j.current&&j.current.stop(),e(!1),o("")},k=()=>{i(""),o(""),c(""),g(null)},P=(O,W)=>{var Le;const _=((Le=ql.find(Z=>Z.id===W))==null?void 0:Le.name)||"Bien";let N=O.replace(/\s+/g," ").trim();const q=N.match(/(\d+)\s*(m2|m|mtres?\s*carrs?)/i),z=["luxueux","luxe","prestige","standing","exception"],S=["vue","panorama","mer","montagne"],D=["piscine","terrasse","balcon","parking","garage","cave","ascenseur"],M=z.some(Z=>N.toLowerCase().includes(Z));S.some(Z=>N.toLowerCase().includes(Z));const C=D.filter(Z=>N.toLowerCase().includes(Z));let F=[],L=M?`Magnifique ${_.toLowerCase()} de standing`:`Superbe ${_.toLowerCase()}`;if(q&&(L+=` de ${q[1]} m`),F.push(L+"."),N.toLowerCase().includes("sur ")){const Z=N.match(/sur\s+([^,.\d]+)/i);Z&&F.push(`Idalement situ sur ${Z[1].trim()}.`)}const X=N.match(/vue\s+([^,.\d]+)/i);return X&&F.push(`Vue ${X[1].trim()} exceptionnelle.`),C.length>0&&F.push(`Ce bien dispose de ${C.join(", ")}.`),F.push(M?"Un bien d'exception  dcouvrir sans tarder.":" visiter rapidement."),F.join(`

`)},I=async()=>{var _;if(!r.trim()){g("Veuillez d'abord dicter une description");return}d(!0),g(null);try{const N=await fetch("/api/generate-description",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcription:r.trim(),propertyType:((_=ql.find(z=>z.id===u))==null?void 0:_.name)||"bien immobilier"})});if(!N.ok)throw new Error("API error");const q=await N.json();if(q.description)c(q.description);else throw new Error("No description returned")}catch(N){console.error("AI generation failed, using local formatter:",N);const q=P(r,u);c(q)}const W=[{id:Date.now(),date:new Date().toISOString(),transcription:r.trim(),description:l,template:u},...x].slice(0,5);y(W),localStorage.setItem(Hh,JSON.stringify(W)),d(!1)},E=async O=>{try{await navigator.clipboard.writeText(O),f(!0),setTimeout(()=>f(!1),2e3)}catch(W){console.error("Copy failed:",W)}},A=O=>{i(O.transcription),c(O.description||""),h(O.template||"apartment")};return m?n.jsxs("div",{style:{maxWidth:"1000px"},children:[n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(dc,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Notes vocales"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Dictez vos descriptions, l'IA les transforme en annonces pro"})]})]}),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"8px"},children:[n.jsx(He,{size:14,style:{color:"#8b5cf6"}}),n.jsx("span",{style:{fontSize:"12px",color:"#8b5cf6",fontWeight:"500"},children:"Reconnaissance vocale + IA Claude pour le formatage"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 320px",gap:"24px"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{padding:"16px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",marginBottom:"16px"},children:[n.jsx("p",{style:{fontSize:"13px",fontWeight:"500",marginBottom:"10px"},children:"Type de bien"}),n.jsx("div",{style:{display:"flex",gap:"8px"},children:ql.map(O=>{const W=O.icon;return n.jsxs("button",{onClick:()=>h(O.id),style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px",background:u===O.id?"rgba(212, 175, 55, 0.15)":"var(--bg-tertiary)",border:`1px solid ${u===O.id?"var(--gold)":"var(--border-color)"}`,borderRadius:"8px",color:u===O.id?"var(--gold)":"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:[n.jsx(W,{size:14}),O.name]},O.id)})})]}),n.jsxs("div",{style:{padding:"40px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",marginBottom:"16px",textAlign:"center"},children:[n.jsx("button",{onClick:t?T:R,style:{width:"100px",height:"100px",borderRadius:"50%",background:t?"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)":"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px",boxShadow:t?"0 0 0 8px rgba(239, 68, 68, 0.2)":"none",animation:t?"pulse 2s infinite":"none"},children:t?n.jsx(Vs,{size:32,style:{color:"white"}}):n.jsx(dc,{size:36,style:{color:"var(--bg-primary)"}})}),n.jsx("p",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"4px"},children:t?"Enregistrement en cours...":"Appuyez pour dicter"}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:t?"Appuyez  nouveau pour arrter":"Parlez clairement en franais"})]}),v&&n.jsxs("div",{style:{padding:"12px 16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"8px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(Oe,{size:16,style:{color:"#ef4444"}}),n.jsx("span",{style:{fontSize:"13px",color:"#ef4444"},children:v})]}),n.jsxs("div",{style:{padding:"20px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[n.jsx("h3",{style:{fontSize:"15px",fontWeight:"600"},children:"Transcription"}),n.jsx("div",{style:{display:"flex",gap:"8px"},children:r&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>E(r),style:{padding:"6px 10px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"6px",color:"var(--text-muted)",fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(hr,{size:12})," Copier"]}),n.jsxs("button",{onClick:k,style:{padding:"6px 10px",background:"rgba(239, 68, 68, 0.1)",border:"none",borderRadius:"6px",color:"#ef4444",fontSize:"11px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(Et,{size:12})," Effacer"]})]})})]}),n.jsx("div",{style:{minHeight:"120px",padding:"16px",background:"var(--bg-tertiary)",borderRadius:"10px",fontSize:"14px",lineHeight:"1.6",color:r?"var(--text-primary)":"var(--text-muted)"},children:r||s?n.jsxs(n.Fragment,{children:[r,n.jsx("span",{style:{color:"var(--text-muted)",fontStyle:"italic"},children:s})]}):"Votre transcription apparatra ici en temps rel..."})]}),n.jsx("button",{onClick:I,disabled:!r.trim()||a,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"16px",background:r.trim()&&!a?"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)":"var(--bg-tertiary)",border:"none",borderRadius:"12px",color:r.trim()&&!a?"var(--bg-primary)":"var(--text-muted)",fontSize:"15px",fontWeight:"600",cursor:r.trim()&&!a?"pointer":"not-allowed"},children:a?n.jsxs(n.Fragment,{children:[n.jsx(Ie,{size:20,style:{animation:"spin 1s linear infinite"}}),"L'IA rdige..."]}):n.jsxs(n.Fragment,{children:[n.jsx(He,{size:20}),"Gnrer avec l'IA"]})}),l&&n.jsxs("div",{style:{marginTop:"16px",padding:"20px",background:"var(--bg-card)",border:"1px solid rgba(212, 175, 55, 0.3)",borderRadius:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[n.jsx("h3",{style:{fontSize:"15px",fontWeight:"600",color:"var(--gold)"},children:" Description gnre par l'IA"}),n.jsxs("button",{onClick:()=>E(l),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:p?"rgba(34, 197, 94, 0.1)":"var(--bg-tertiary)",border:`1px solid ${p?"rgba(34, 197, 94, 0.2)":"var(--border-color)"}`,borderRadius:"6px",color:p?"#22c55e":"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:[p?n.jsx(re,{size:14}):n.jsx(hr,{size:14}),p?"Copi !":"Copier"]})]}),n.jsx("div",{style:{padding:"16px",background:"var(--bg-tertiary)",borderRadius:"10px",fontSize:"14px",lineHeight:"1.7",whiteSpace:"pre-wrap"},children:l})]})]}),n.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"20px",height:"fit-content"},children:[n.jsx("h3",{style:{fontSize:"15px",fontWeight:"600",marginBottom:"16px"},children:"Notes rcentes"}),x.length===0?n.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-muted)"},children:[n.jsx(Yt,{size:24,style:{marginBottom:"8px",opacity:.5}}),n.jsx("p",{style:{fontSize:"13px"},children:"Aucune note sauvegarde"})]}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:x.map(O=>n.jsxs("button",{onClick:()=>A(O),style:{padding:"12px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",textAlign:"left",cursor:"pointer"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[n.jsx(Rn,{size:12,style:{color:"var(--text-muted)"}}),n.jsx("span",{style:{fontSize:"11px",color:"var(--text-muted)"},children:new Date(O.date).toLocaleDateString("fr-FR")})]}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:O.transcription})]},O.id))}),n.jsx("div",{style:{marginTop:"20px",padding:"12px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"8px"},children:n.jsxs("p",{style:{fontSize:"11px",color:"#3b82f6",lineHeight:"1.5"},children:[" ",n.jsx("strong",{children:"Conseils:"})," Parlez clairement, mentionnez la surface, le nombre de pices, l'exposition, les quipements et le quartier."]})})]})]}),n.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes pulse {
          0%, 100% { box-shadow: 0 0 0 8px rgba(239, 68, 68, 0.2); }
          50% { box-shadow: 0 0 0 16px rgba(239, 68, 68, 0.1); }
        }
      `})]}):n.jsxs("div",{style:{maxWidth:"800px",padding:"60px 20px",textAlign:"center"},children:[n.jsx(Oe,{size:48,style:{color:"#ef4444",marginBottom:"16px"}}),n.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"8px"},children:"Navigateur non support"}),n.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"20px"},children:"La reconnaissance vocale n'est pas disponible dans ce navigateur. Utilisez Chrome, Edge, ou Safari pour cette fonctionnalit."})]})}const NS=[{id:"greeting",name:"Salutation",message:"Bonjour {name}, je suis {agent} de CSX Immobilier. Suite  votre intrt pour nos biens, je me permets de vous contacter. tes-vous disponible pour en discuter ?"},{id:"property",name:"Prsentation bien",message:"Bonjour {name}, j'ai un bien qui pourrait vous intresser : {property}. Souhaitez-vous plus d'informations ou organiser une visite ?"},{id:"visit_confirm",name:"Confirmation visite",message:"Bonjour {name}, je vous confirme notre rendez-vous pour la visite du {date}  {time}.  bientt !"},{id:"followup",name:"Relance",message:"Bonjour {name}, je reviens vers vous concernant votre recherche immobilire. Avez-vous eu le temps de rflchir ? Je reste  votre disposition."},{id:"documents",name:"Demande documents",message:"Bonjour {name}, pour avancer dans votre dossier, pourriez-vous me transmettre les documents suivants : pice d'identit, 3 derniers bulletins de salaire, dernier avis d'imposition. Merci !"}];function MS(){const[t,e]=w.useState([]),[r,i]=w.useState([]),[s,o]=w.useState(!0),[a,d]=w.useState(""),[l,c]=w.useState(null),[u,h]=w.useState(null),[p,f]=w.useState(""),[x,y]=w.useState(""),[v,g]=w.useState(!1);w.useEffect(()=>{m()},[]);const m=async()=>{o(!0);try{const{data:{user:I}}=await G.auth.getUser();if(!I){o(!1);return}const{data:E}=await G.from("profiles").select("full_name, company_name").eq("id",I.id).single();E&&y(E.full_name||E.company_name||"Votre agent");const{data:A}=await G.from("leads").select("*").eq("user_id",I.id).not("phone","is",null).order("created_at",{ascending:!1});e(A||[]);const{data:O}=await G.from("listings").select("id, title, location, price").eq("user_id",I.id).order("created_at",{ascending:!1}).limit(10);i(O||[])}catch(I){console.error("Error loading data:",I)}finally{o(!1)}},b=I=>{if(!I)return"";let E=I.replace(/\D/g,"");return E.startsWith("0")?E="33"+E.slice(1):!E.startsWith("33")&&!E.startsWith("+")&&(E="33"+E),E},j=(I,E)=>{let A=I.message;return A=A.replace("{name}",(E==null?void 0:E.name)||"Madame, Monsieur"),A=A.replace("{agent}",x),A=A.replace("{property}",(E==null?void 0:E.property_interest)||"notre bien"),A=A.replace("{date}","[DATE]"),A=A.replace("{time}","[HEURE]"),A},R=(I,E)=>{const A=b(I.phone),O=encodeURIComponent(E||p);window.open(`https://wa.me/${A}?text=${O}`,"_blank")},T=async I=>{try{await navigator.clipboard.writeText(I),g(!0),setTimeout(()=>g(!1),2e3)}catch(E){console.error("Copy failed:",E)}},k=t.filter(I=>{var A,O,W;if(!a)return!0;const E=a.toLowerCase();return((A=I.name)==null?void 0:A.toLowerCase().includes(E))||((O=I.phone)==null?void 0:O.includes(E))||((W=I.email)==null?void 0:W.toLowerCase().includes(E))}),P=I=>{const E=new Date(I),O=new Date-E,W=Math.floor(O/(1e3*60*60*24));return W===0?"Aujourd'hui":W===1?"Hier":W<7?`Il y a ${W} jours`:E.toLocaleDateString("fr-FR")};return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsx("div",{style:{marginBottom:"32px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(37, 211, 102, 0.2) 0%, rgba(37, 211, 102, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Fo,{size:24,style:{color:"#25d366"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"WhatsApp"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Contactez vos leads directement sur WhatsApp"})]})]}),n.jsxs("button",{onClick:m,disabled:s,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-secondary)",fontSize:"14px",cursor:"pointer"},children:[n.jsx(Ur,{size:16,style:{animation:s?"spin 1s linear infinite":"none"}}),"Actualiser"]})]})}),n.jsxs("div",{style:{padding:"16px 20px",background:"rgba(37, 211, 102, 0.1)",border:"1px solid rgba(37, 211, 102, 0.2)",borderRadius:"12px",marginBottom:"24px",display:"flex",alignItems:"flex-start",gap:"12px"},children:[n.jsx(Ei,{size:20,style:{color:"#25d366",flexShrink:0,marginTop:"2px"}}),n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500",color:"#25d366",marginBottom:"4px"},children:"Comment a fonctionne"}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",lineHeight:"1.5"},children:"Slectionnez un contact, choisissez un modle de message ou rdigez le vtre, puis cliquez pour ouvrir WhatsApp avec le message pr-rempli. Vos leads avec numro de tlphone s'affichent automatiquement."})]})]}),s?n.jsxs("div",{style:{padding:"60px",textAlign:"center"},children:[n.jsx(Ie,{size:32,style:{color:"#25d366",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),n.jsx("p",{style:{color:"var(--text-muted)"},children:"Chargement des contacts..."})]}):n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"350px 1fr",gap:"24px"},children:[n.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",overflow:"hidden"},children:[n.jsx("div",{style:{padding:"16px",borderBottom:"1px solid var(--border-color)"},children:n.jsxs("div",{style:{position:"relative"},children:[n.jsx(En,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"text",placeholder:"Rechercher un contact...",value:a,onChange:I=>d(I.target.value),style:{width:"100%",padding:"10px 10px 10px 38px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"13px"}})]})}),n.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:k.length===0?n.jsxs("div",{style:{padding:"40px 20px",textAlign:"center"},children:[n.jsx($r,{size:32,style:{color:"var(--text-muted)",marginBottom:"12px",opacity:.5}}),n.jsx("p",{style:{fontSize:"14px",color:"var(--text-muted)"},children:t.length===0?"Aucun lead avec numro de tlphone":"Aucun rsultat"})]}):k.map(I=>n.jsx("div",{onClick:()=>c(I),style:{padding:"14px 16px",borderBottom:"1px solid var(--border-color)",cursor:"pointer",background:(l==null?void 0:l.id)===I.id?"rgba(37, 211, 102, 0.1)":"transparent",transition:"background 0.2s"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"50%",background:"var(--bg-tertiary)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:n.jsx($r,{size:20,style:{color:"var(--text-muted)"}})}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"2px"},children:I.name||"Sans nom"}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:I.phone})]}),n.jsx("div",{style:{textAlign:"right"},children:n.jsx("p",{style:{fontSize:"11px",color:"var(--text-muted)"},children:P(I.created_at)})})]})},I.id))})]}),n.jsx("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"24px"},children:l?n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:"20px",borderBottom:"1px solid var(--border-color)",marginBottom:"20px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"rgba(37, 211, 102, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx($r,{size:24,style:{color:"#25d366"}})}),n.jsxs("div",{children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600"},children:l.name||"Contact"}),n.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:l.phone})]})]}),n.jsxs("a",{href:`https://wa.me/${b(l.phone)}`,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"6px",padding:"10px 16px",background:"#25d366",border:"none",borderRadius:"8px",color:"white",fontSize:"13px",fontWeight:"500",textDecoration:"none"},children:[n.jsx(Fo,{size:16}),"Ouvrir WhatsApp",n.jsx(ot,{size:14})]})]}),(l.email||l.property_interest||l.budget)&&n.jsxs("div",{style:{padding:"12px 16px",background:"var(--bg-tertiary)",borderRadius:"8px",marginBottom:"20px",display:"flex",gap:"20px",flexWrap:"wrap",fontSize:"12px",color:"var(--text-muted)"},children:[l.email&&n.jsxs("span",{children:[" ",l.email]}),l.property_interest&&n.jsxs("span",{children:[" ",l.property_interest]}),l.budget&&n.jsxs("span",{children:[" ",l.budget.toLocaleString(),""]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"10px"},children:"Modles de message"}),n.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:NS.map(I=>n.jsx("button",{onClick:()=>{h(I),f(j(I,l))},style:{padding:"8px 14px",background:(u==null?void 0:u.id)===I.id?"rgba(37, 211, 102, 0.15)":"var(--bg-tertiary)",border:`1px solid ${(u==null?void 0:u.id)===I.id?"#25d366":"var(--border-color)"}`,borderRadius:"6px",color:(u==null?void 0:u.id)===I.id?"#25d366":"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:I.name},I.id))})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"10px"},children:"Message"}),n.jsx("textarea",{value:p,onChange:I=>f(I.target.value),placeholder:"crivez votre message ou slectionnez un modle ci-dessus...",rows:6,style:{width:"100%",padding:"14px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px",resize:"vertical",lineHeight:"1.5"}})]}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsxs("button",{onClick:()=>T(p),disabled:!p,style:{display:"flex",alignItems:"center",gap:"6px",padding:"12px 20px",background:v?"rgba(34, 197, 94, 0.1)":"var(--bg-tertiary)",border:`1px solid ${v?"rgba(34, 197, 94, 0.3)":"var(--border-color)"}`,borderRadius:"8px",color:v?"#22c55e":"var(--text-secondary)",fontSize:"14px",cursor:p?"pointer":"not-allowed",opacity:p?1:.5},children:[v?n.jsx(re,{size:16}):n.jsx(hr,{size:16}),v?"Copi":"Copier"]}),n.jsxs("button",{onClick:()=>R(l,p),disabled:!p,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px 20px",background:p?"#25d366":"var(--bg-tertiary)",border:"none",borderRadius:"8px",color:p?"white":"var(--text-muted)",fontSize:"14px",fontWeight:"600",cursor:p?"pointer":"not-allowed"},children:[n.jsx(As,{size:18}),"Envoyer via WhatsApp"]})]})]}):n.jsxs("div",{style:{padding:"60px 20px",textAlign:"center"},children:[n.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(37, 211, 102, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:n.jsx(Fo,{size:36,style:{color:"#25d366"}})}),n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Slectionnez un contact"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Choisissez un lead dans la liste pour lui envoyer un message WhatsApp"})]})})]}),n.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
      `})]})}const Vt={transport:{label:"Transports",icon:jo,color:"#3b82f6",queries:[{tag:"railway=station",label:"Gare",icon:jo},{tag:"railway=halt",label:"Arrt train",icon:jo},{tag:"highway=bus_stop",label:"Arrt de bus",icon:Ch},{tag:"amenity=bus_station",label:"Gare routire",icon:Ch},{tag:"amenity=ferry_terminal",label:"Ferry",icon:jo},{tag:"amenity=bicycle_rental",label:"Vlos",icon:Nj},{tag:"amenity=car_rental",label:"Location voiture",icon:zh},{tag:"amenity=fuel",label:"Station essence",icon:Jj},{tag:"amenity=parking",label:"Parking",icon:zh}]},schools:{label:"coles",icon:Nn,color:"#22c55e",queries:[{tag:"amenity=school",label:"cole",icon:Nn},{tag:"amenity=kindergarten",label:"Maternelle",icon:Nn},{tag:"amenity=college",label:"Collge/Lyce",icon:Nn},{tag:"amenity=university",label:"Universit",icon:Nn},{tag:"amenity=library",label:"Bibliothque",icon:Nn}]},shopping:{label:"Commerces",icon:Th,color:"#f59e0b",queries:[{tag:"shop=supermarket",label:"Supermarch",icon:Th},{tag:"shop=convenience",label:"picerie",icon:bo},{tag:"shop=bakery",label:"Boulangerie",icon:bo},{tag:"shop=butcher",label:"Boucherie",icon:bo},{tag:"shop=mall",label:"Centre commercial",icon:we},{tag:"amenity=marketplace",label:"March",icon:bo},{tag:"amenity=bank",label:"Banque",icon:as},{tag:"amenity=atm",label:"Distributeur",icon:as}]},restaurants:{label:"Restaurants",icon:Dl,color:"#ec4899",queries:[{tag:"amenity=restaurant",label:"Restaurant",icon:Dl},{tag:"amenity=cafe",label:"Caf",icon:Eh},{tag:"amenity=fast_food",label:"Fast-food",icon:Dl},{tag:"amenity=bar",label:"Bar",icon:Eh}]},parks:{label:"Parcs",icon:tn,color:"#10b981",queries:[{tag:"leisure=park",label:"Parc",icon:tn},{tag:"leisure=garden",label:"Jardin",icon:tn},{tag:"leisure=playground",label:"Aire de jeux",icon:tn},{tag:"leisure=sports_centre",label:"Centre sportif",icon:tn},{tag:"leisure=swimming_pool",label:"Piscine",icon:tn},{tag:"natural=beach",label:"Plage",icon:tn}]},healthcare:{label:"Sant",icon:Mi,color:"#ef4444",queries:[{tag:"amenity=hospital",label:"Hpital",icon:Mi},{tag:"amenity=clinic",label:"Clinique",icon:Mi},{tag:"amenity=pharmacy",label:"Pharmacie",icon:aw},{tag:"amenity=doctors",label:"Mdecin",icon:Mi},{tag:"amenity=dentist",label:"Dentiste",icon:Mi}]},other:{label:"Autres",icon:as,color:"#8b5cf6",queries:[{tag:"amenity=post_office",label:"Poste",icon:we},{tag:"amenity=police",label:"Police",icon:uc},{tag:"amenity=fire_station",label:"Pompiers",icon:uc},{tag:"amenity=place_of_worship",label:"Lieu de culte",icon:Wj},{tag:"tourism=hotel",label:"Htel",icon:we},{tag:"tourism=information",label:"Office tourisme",icon:Ei}]}},BS=(t,e,r,i)=>{const o=t*Math.PI/180,a=r*Math.PI/180,d=(r-t)*Math.PI/180,l=(i-e)*Math.PI/180,c=Math.sin(d/2)*Math.sin(d/2)+Math.cos(o)*Math.cos(a)*Math.sin(l/2)*Math.sin(l/2);return 6371e3*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},$S=t=>t<1e3?`${Math.round(t)}m`:`${(t/1e3).toFixed(1)}km`;function FS(){var N,q;const[t,e]=w.useState([]),[r,i]=w.useState(null),[s,o]=w.useState(""),[a,d]=w.useState(!1),[l,c]=w.useState(""),[u,h]=w.useState(null),[p,f]=w.useState("transport"),[x,y]=w.useState(""),[v,g]=w.useState(!1),[m,b]=w.useState(null),[j,R]=w.useState(null);w.useEffect(()=>{T()},[]);const T=async()=>{try{const{data:{user:z}}=await G.auth.getUser();if(!z)return;const{data:S,error:D}=await G.from("listings").select("id, title, location").eq("user_id",z.id).order("created_at",{ascending:!1}).limit(10);S&&e(S)}catch(z){console.error("Error loading listings:",z)}},k=async z=>{c("Gocodage de l'adresse...");const S=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(z)}&limit=1`,{headers:{"User-Agent":"CSX-Immobilier/1.0"}});if(!S.ok)throw new Error("Erreur de gocodage");const D=await S.json();if(!D||D.length===0)throw new Error("Adresse non trouve. Essayez avec plus de dtails (ville, code postal).");return{lat:parseFloat(D[0].lat),lon:parseFloat(D[0].lon),displayName:D[0].display_name}},P=async(z,S,D,M=1500)=>{const C=Vt[D];if(!C)return[];const L=`
      [out:json][timeout:25];
      (
        ${C.queries.map(oe=>{const[Se,$]=oe.tag.split("=");return`node["${Se}"="${$}"](around:${M},${z},${S});
              way["${Se}"="${$}"](around:${M},${z},${S});`}).join(`
`)}
      );
      out center tags;
    `,X=await fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:`data=${encodeURIComponent(L)}`,headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(!X.ok)return console.error("Overpass API error for",D),[];const Z=(await X.json()).elements.map(oe=>{var Fe,mr,Q,ut;const Se=oe.lat||((Fe=oe.center)==null?void 0:Fe.lat),$=oe.lon||((mr=oe.center)==null?void 0:mr.lon);if(!Se||!$)return null;const bt=BS(z,S,Se,$);let Re="Lieu",ke=as;for(const Wt of C.queries){const[ge,yr]=Wt.tag.split("=");if(oe.tags&&oe.tags[ge]===yr){Re=Wt.label,ke=Wt.icon;break}}return{id:oe.id,name:((Q=oe.tags)==null?void 0:Q.name)||((ut=oe.tags)==null?void 0:ut["name:fr"])||Re,type:Re,icon:ke,distance:bt,distanceText:$S(bt),lat:Se,lon:$,tags:oe.tags||{}}}).filter(Boolean),Ze=[],rr=new Set;Z.sort((oe,Se)=>oe.distance-Se.distance);for(const oe of Z){const Se=`${oe.name}-${oe.type}`;rr.has(Se)||(rr.add(Se),Ze.push(oe))}return Ze.slice(0,15)},I=async()=>{if(!s.trim()){b("Veuillez entrer une adresse");return}d(!0),b(null),h(null),y("");try{const z=await k(s);R(z),c("Recherche des points d'intrt...");const S={},D=Object.keys(Vt);for(let F=0;F<D.length;F++){const L=D[F];c(`Analyse: ${Vt[L].label} (${F+1}/${D.length})...`);try{S[L]=await P(z.lat,z.lon,L)}catch(X){console.error(`Error fetching ${L}:`,X),S[L]=[]}F<D.length-1&&await new Promise(X=>setTimeout(X,500))}const M={};for(const[F,L]of Object.entries(S)){const X=L.length,Le=X>0?L.reduce((Ze,rr)=>Ze+rr.distance,0)/X:2e3;let Z=Math.min(100,Math.round(X*8+(1500-Le)/20));Z=Math.max(0,Math.min(100,Z)),M[F]=Z}const C=Object.values(M).filter(F=>F>0);M.overall=C.length>0?Math.round(C.reduce((F,L)=>F+L,0)/C.length):0,h({address:z.displayName,scores:M,pois:S}),E(z,S,M)}catch(z){b(z.message||"Une erreur est survenue")}finally{d(!1),c("")}},E=(z,S,D)=>{const M=[];if(M.push(" **Analyse du quartier**"),M.push(` **Localisation** - Score global: ${D.overall}/100
`),S.transport&&S.transport.length>0){const C=S.transport[0];M.push(` **Transports** (${D.transport}/100)`),M.push(`${S.transport.length} point(s) de transport  proximit. Le plus proche: ${C.name}  ${C.distanceText}.
`)}else M.push(" **Transports** (0/100)"),M.push(`Aucun transport en commun dtect dans un rayon de 1.5km.
`);if(S.schools&&S.schools.length>0){const C=S.schools[0];M.push(` **coles** (${D.schools}/100)`),M.push(`${S.schools.length} tablissement(s) scolaire(s)  proximit. Le plus proche: ${C.name}  ${C.distanceText}.
`)}else M.push(" **coles** (0/100)"),M.push(`Aucun tablissement scolaire dtect  proximit.
`);if(S.shopping&&S.shopping.length>0){const C=S.shopping[0];M.push(` **Commerces** (${D.shopping}/100)`),M.push(`${S.shopping.length} commerce(s)  proximit. Le plus proche: ${C.name}  ${C.distanceText}.
`)}else M.push(" **Commerces** (0/100)"),M.push(`Peu de commerces dtects  proximit.
`);if(S.parks&&S.parks.length>0){const C=S.parks[0];M.push(` **Espaces verts** (${D.parks}/100)`),M.push(`${S.parks.length} espace(s) vert(s) ou de loisirs. Le plus proche: ${C.name}  ${C.distanceText}.
`)}if(S.healthcare&&S.healthcare.length>0){const C=S.healthcare[0];M.push(` **Sant** (${D.healthcare}/100)`),M.push(`${S.healthcare.length} service(s) de sant. Le plus proche: ${C.name}  ${C.distanceText}.
`)}y(M.join(`
`))},A=async()=>{try{await navigator.clipboard.writeText(x.replace(/\*\*/g,"")),g(!0),setTimeout(()=>g(!1),2e3)}catch(z){console.error("Copy failed:",z)}},O=z=>{i(z),o(z.location||z.title)},W=()=>u!=null&&u.pois?u.pois[p]||[]:[],_=({score:z,label:S,color:D})=>{const M=2*Math.PI*36,C=M-z/100*M;return n.jsxs("div",{style:{textAlign:"center"},children:[n.jsxs("svg",{width:"90",height:"90",viewBox:"0 0 90 90",children:[n.jsx("circle",{cx:"45",cy:"45",r:"36",fill:"none",stroke:"var(--border-color)",strokeWidth:"8"}),n.jsx("circle",{cx:"45",cy:"45",r:"36",fill:"none",stroke:D,strokeWidth:"8",strokeLinecap:"round",strokeDasharray:M,strokeDashoffset:C,style:{transform:"rotate(-90deg)",transformOrigin:"center",transition:"stroke-dashoffset 0.5s ease"}}),n.jsx("text",{x:"45",y:"50",textAnchor:"middle",style:{fill:"var(--text-primary)",fontSize:"18px",fontWeight:"600"},children:z})]}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px"},children:S})]})};return n.jsxs("div",{style:{maxWidth:"1200px"},children:[n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(it,{size:24,style:{color:"var(--gold)"}})}),n.jsxs("div",{children:[n.jsx("h1",{style:{fontSize:"28px",fontWeight:"600"},children:"Infos Quartier"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Donnes relles OpenStreetMap"})]})]}),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)",borderRadius:"8px",marginTop:"12px"},children:[n.jsx(it,{size:14,style:{color:"#22c55e"}}),n.jsx("span",{style:{fontSize:"12px",color:"#22c55e",fontWeight:"500"},children:"Donnes OpenStreetMap en temps rel"}),n.jsx("a",{href:"https://www.openstreetmap.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#22c55e"},children:n.jsx(ot,{size:12})})]})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"12px"},children:"Adresse  analyser"}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsxs("div",{style:{flex:1,position:"relative"},children:[n.jsx(En,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),n.jsx("input",{type:"text",placeholder:"Ex: 15 rue de la Paix, 75002 Paris",value:s,onChange:z=>o(z.target.value),onKeyPress:z=>z.key==="Enter"&&I(),style:{width:"100%",padding:"14px 14px 14px 44px",background:"var(--bg-tertiary)",border:"1px solid var(--border-color)",borderRadius:"10px",color:"var(--text-primary)",fontSize:"14px"}})]}),n.jsx("button",{onClick:I,disabled:a,style:{display:"flex",alignItems:"center",gap:"8px",padding:"14px 24px",background:a?"var(--bg-tertiary)":"var(--gold)",border:"none",borderRadius:"10px",color:a?"var(--text-muted)":"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:a?"not-allowed":"pointer"},children:a?n.jsxs(n.Fragment,{children:[n.jsx(Ie,{size:18,style:{animation:"spin 1s linear infinite"}}),"Analyse..."]}):n.jsxs(n.Fragment,{children:[n.jsx(it,{size:18}),"Analyser"]})})]}),t.length>0&&n.jsxs("div",{style:{marginTop:"16px"},children:[n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"8px"},children:"Ou slectionnez un de vos biens :"}),n.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:t.slice(0,5).map(z=>{var S;return n.jsxs("button",{onClick:()=>O(z),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:(r==null?void 0:r.id)===z.id?"rgba(212, 175, 55, 0.15)":"var(--bg-tertiary)",border:`1px solid ${(r==null?void 0:r.id)===z.id?"var(--gold)":"var(--border-color)"}`,borderRadius:"8px",color:(r==null?void 0:r.id)===z.id?"var(--gold)":"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:[n.jsx(we,{size:14}),((S=z.title)==null?void 0:S.substring(0,20))||"Bien"]},z.id)})})]}),a&&l&&n.jsxs("div",{style:{marginTop:"16px",padding:"12px 16px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"8px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(Ie,{size:16,style:{color:"#3b82f6",animation:"spin 1s linear infinite"}}),n.jsx("span",{style:{fontSize:"13px",color:"#3b82f6"},children:l})]}),m&&n.jsxs("div",{style:{marginTop:"16px",padding:"12px 16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"8px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(Oe,{size:18,style:{color:"#ef4444"}}),n.jsx("span",{style:{color:"#ef4444",fontSize:"14px"},children:m})]})]}),u&&n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 380px",gap:"24px"},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"20px"},children:"Score du quartier"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-around",flexWrap:"wrap",gap:"16px"},children:[n.jsx(_,{score:u.scores.overall,label:"Global",color:"var(--gold)"}),n.jsx(_,{score:u.scores.transport||0,label:"Transport",color:"#3b82f6"}),n.jsx(_,{score:u.scores.schools||0,label:"coles",color:"#22c55e"}),n.jsx(_,{score:u.scores.shopping||0,label:"Commerces",color:"#f59e0b"}),n.jsx(_,{score:u.scores.healthcare||0,label:"Sant",color:"#ef4444"}),n.jsx(_,{score:u.scores.parks||0,label:"Parcs",color:"#10b981"})]})]}),n.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Object.entries(Vt).map(([z,S])=>{var C;const D=S.icon,M=((C=u.pois[z])==null?void 0:C.length)||0;return n.jsxs("button",{onClick:()=>f(z),style:{display:"flex",alignItems:"center",gap:"6px",padding:"10px 14px",background:p===z?S.color:"var(--bg-card)",border:`1px solid ${p===z?S.color:"var(--border-color)"}`,borderRadius:"10px",color:p===z?"white":"var(--text-secondary)",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:[n.jsx(D,{size:16}),S.label,n.jsx("span",{style:{padding:"2px 6px",background:p===z?"rgba(255,255,255,0.2)":"var(--bg-tertiary)",borderRadius:"4px",fontSize:"11px"},children:M})]},z)})}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px"},children:[n.jsxs("h3",{style:{fontSize:"15px",fontWeight:"600",marginBottom:"16px"},children:[(N=Vt[p])==null?void 0:N.label,"  proximit"]}),W().length>0?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:W().map((z,S)=>{var M,C,F,L;const D=z.icon||as;return n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px",padding:"14px",background:"var(--bg-tertiary)",borderRadius:"10px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",background:`${(M=Vt[p])==null?void 0:M.color}20`,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(D,{size:20,style:{color:(C=Vt[p])==null?void 0:C.color}})}),n.jsxs("div",{style:{flex:1},children:[n.jsx("p",{style:{fontSize:"14px",fontWeight:"500"},children:z.name}),n.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)"},children:z.type})]}),n.jsx("div",{style:{padding:"6px 12px",background:`${(F=Vt[p])==null?void 0:F.color}15`,borderRadius:"6px",color:(L=Vt[p])==null?void 0:L.color,fontSize:"13px",fontWeight:"600"},children:z.distanceText})]},z.id||S)})}):n.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"var(--text-muted)"},children:[n.jsx(Oe,{size:32,style:{marginBottom:"12px",opacity:.5}}),n.jsxs("p",{style:{fontSize:"14px"},children:["Aucun ",(q=Vt[p])==null?void 0:q.label.toLowerCase()," trouv dans un rayon de 1.5km"]}),n.jsx("p",{style:{fontSize:"12px",marginTop:"8px"},children:"Les donnes proviennent d'OpenStreetMap. Certains lieux peuvent ne pas tre rfrencs."})]})]}),j&&n.jsxs("a",{href:`https://www.openstreetmap.org/?mlat=${j.lat}&mlon=${j.lon}#map=16/${j.lat}/${j.lon}`,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"14px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"12px",color:"var(--text-secondary)",fontSize:"14px",textDecoration:"none"},children:[n.jsx(it,{size:18}),"Voir sur OpenStreetMap",n.jsx(ot,{size:14})]})]}),n.jsxs("div",{style:{padding:"24px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",height:"fit-content",position:"sticky",top:"24px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[n.jsx("h3",{style:{fontSize:"15px",fontWeight:"600"},children:"Description gnre"}),n.jsxs("button",{onClick:A,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:v?"rgba(34, 197, 94, 0.1)":"var(--bg-tertiary)",border:`1px solid ${v?"rgba(34, 197, 94, 0.3)":"var(--border-color)"}`,borderRadius:"6px",color:v?"#22c55e":"var(--text-secondary)",fontSize:"12px",cursor:"pointer"},children:[v?n.jsx(re,{size:14}):n.jsx(hr,{size:14}),v?"Copi !":"Copier"]})]}),n.jsx("div",{style:{padding:"16px",background:"var(--bg-tertiary)",borderRadius:"10px",maxHeight:"500px",overflowY:"auto"},children:x?n.jsx("div",{style:{fontSize:"13px",lineHeight:"1.7",color:"var(--text-secondary)",whiteSpace:"pre-wrap"},children:x.split(`
`).map((z,S)=>{if(z.includes("**")){const D=z.split("**");return n.jsx("p",{style:{marginBottom:"8px"},children:D.map((M,C)=>C%2===1?n.jsx("strong",{style:{color:"var(--text-primary)"},children:M},C):M)},S)}return n.jsx("p",{style:{marginBottom:z?"8px":"4px"},children:z},S)})}):n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"13px"},children:"Analysez une adresse pour gnrer une description du quartier."})}),x&&n.jsxs("button",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",width:"100%",padding:"14px",marginTop:"16px",background:"linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%)",border:"none",borderRadius:"10px",color:"var(--bg-primary)",fontSize:"14px",fontWeight:"600",cursor:"pointer"},onClick:A,children:[n.jsx(re,{size:18}),"Ajouter  l'annonce"]}),n.jsx("div",{style:{marginTop:"16px",padding:"12px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"8px"},children:n.jsx("p",{style:{fontSize:"11px",color:"#3b82f6",lineHeight:"1.5"},children:" Les donnes proviennent d'OpenStreetMap, une base de donnes collaborative. La couverture peut varier selon les rgions. Les scores sont calculs en fonction du nombre et de la proximit des points d'intrt dtects."})})]})]}),!u&&!a&&n.jsxs("div",{style:{padding:"60px",background:"var(--bg-card)",border:"1px solid var(--border-color)",borderRadius:"16px",textAlign:"center"},children:[n.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"20px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:n.jsx(it,{size:36,style:{color:"var(--gold)"}})}),n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Analysez un quartier"}),n.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px",maxWidth:"400px",margin:"0 auto"},children:"Entrez une adresse pour dcouvrir les transports, commerces, coles et services  proximit. Toutes les donnes sont relles et proviennent d'OpenStreetMap."})]}),n.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg); } }
      `})]})}function le({children:t}){return n.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[n.jsx(Sw,{}),n.jsx("main",{style:{flex:1,marginLeft:"280px",padding:"32px",background:"var(--bg-primary)",minHeight:"100vh"},children:t})]})}function Vl({children:t}){const{user:e,loading:r}=Qr();return r?n.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-primary)"},children:[n.jsx("div",{style:{width:"48px",height:"48px",border:"3px solid var(--border-color)",borderTopColor:"var(--gold)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),n.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):e?n.jsx(xu,{to:"/dashboard",replace:!0}):t}function WS(){return n.jsxs(Mv,{children:[n.jsx(ne,{path:"/",element:n.jsx(kw,{})}),n.jsx(ne,{path:"/login",element:n.jsx(Vl,{children:n.jsx(_w,{})})}),n.jsx(ne,{path:"/signup",element:n.jsx(Vl,{children:n.jsx(Cw,{})})}),n.jsx(ne,{path:"/forgot-password",element:n.jsx(Vl,{children:n.jsx(zw,{})})}),n.jsx(ne,{path:"/p/:id",element:n.jsx(Ew,{})}),n.jsx(ne,{path:"/dashboard",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(Tw,{})})})}),n.jsx(ne,{path:"/listings",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(Fw,{})})})}),n.jsx(ne,{path:"/listings/new",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(Ih,{})})})}),n.jsx(ne,{path:"/listings/:id/edit",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(Ih,{})})})}),n.jsx(ne,{path:"/leads",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(Gw,{})})})}),n.jsx(ne,{path:"/accounts",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(Kw,{})})})}),n.jsx(ne,{path:"/ai-tools",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(tS,{})})})}),n.jsx(ne,{path:"/settings",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(Qw,{})})})}),n.jsx(ne,{path:"/tools",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(nS,{})})})}),n.jsx(ne,{path:"/tools/valuation",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(aS,{})})})}),n.jsx(ne,{path:"/tools/lead-scoring",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(dS,{})})})}),n.jsx(ne,{path:"/tools/photo-enhancement",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(uS,{})})})}),n.jsx(ne,{path:"/tools/translation",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(hS,{})})})}),n.jsx(ne,{path:"/tools/followup",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(fS,{})})})}),n.jsx(ne,{path:"/tools/calendar",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(xS,{})})})}),n.jsx(ne,{path:"/tools/client-portal",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(vS,{})})})}),n.jsx(ne,{path:"/tools/reviews",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(bS,{})})})}),n.jsx(ne,{path:"/tools/market-insights",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(wS,{})})})}),n.jsx(ne,{path:"/tools/performance",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(SS,{})})})}),n.jsx(ne,{path:"/tools/mortgage",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(kS,{})})})}),n.jsx(ne,{path:"/tools/documents",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(ES,{})})})}),n.jsx(ne,{path:"/tools/qr-flyer",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(IS,{})})})}),n.jsx(ne,{path:"/tools/virtual-tour",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(LS,{})})})}),n.jsx(ne,{path:"/tools/voice-notes",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(DS,{})})})}),n.jsx(ne,{path:"/tools/whatsapp",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(MS,{})})})}),n.jsx(ne,{path:"/tools/neighborhood",element:n.jsx(ae,{children:n.jsx(le,{children:n.jsx(FS,{})})})}),n.jsx(ne,{path:"*",element:n.jsx(xu,{to:"/",replace:!0})})]})}const Y=t=>typeof t=="string",$i=()=>{let t,e;const r=new Promise((i,s)=>{t=i,e=s});return r.resolve=t,r.reject=e,r},Gh=t=>t==null?"":""+t,US=(t,e,r)=>{t.forEach(i=>{e[i]&&(r[i]=e[i])})},qS=/###/g,Kh=t=>t&&t.indexOf("###")>-1?t.replace(qS,"."):t,Jh=t=>!t||Y(t),ls=(t,e,r)=>{const i=Y(e)?e.split("."):e;let s=0;for(;s<i.length-1;){if(Jh(t))return{};const o=Kh(i[s]);!t[o]&&r&&(t[o]=new r),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++s}return Jh(t)?{}:{obj:t,k:Kh(i[s])}},Qh=(t,e,r)=>{const{obj:i,k:s}=ls(t,e,Object);if(i!==void 0||e.length===1){i[s]=r;return}let o=e[e.length-1],a=e.slice(0,e.length-1),d=ls(t,a,Object);for(;d.obj===void 0&&a.length;)o=`${a[a.length-1]}.${o}`,a=a.slice(0,a.length-1),d=ls(t,a,Object),d&&d.obj&&typeof d.obj[`${d.k}.${o}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${o}`]=r},VS=(t,e,r,i)=>{const{obj:s,k:o}=ls(t,e,Object);s[o]=s[o]||[],s[o].push(r)},_a=(t,e)=>{const{obj:r,k:i}=ls(t,e);if(r)return r[i]},HS=(t,e,r)=>{const i=_a(t,r);return i!==void 0?i:_a(e,r)},fy=(t,e,r)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in t?Y(t[i])||t[i]instanceof String||Y(e[i])||e[i]instanceof String?r&&(t[i]=e[i]):fy(t[i],e[i],r):t[i]=e[i]);return t},Mn=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var GS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const KS=t=>Y(t)?t.replace(/[&<>"'\/]/g,e=>GS[e]):t;class JS{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const QS=[" ",",","?","!",";"],YS=new JS(20),XS=(t,e,r)=>{e=e||"",r=r||"";const i=QS.filter(a=>e.indexOf(a)<0&&r.indexOf(a)<0);if(i.length===0)return!0;const s=YS.getRegExp(`(${i.map(a=>a==="?"?"\\?":a).join("|")})`);let o=!s.test(t);if(!o){const a=t.indexOf(r);a>0&&!s.test(t.substring(0,a))&&(o=!0)}return o},xc=function(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const i=e.split(r);let s=t;for(let o=0;o<i.length;){if(!s||typeof s!="object")return;let a,d="";for(let l=o;l<i.length;++l)if(l!==o&&(d+=r),d+=i[l],a=s[d],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<i.length-1)continue;o+=l-o+1;break}s=a}return s},Ca=t=>t&&t.replace("_","-"),ZS={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class za{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,r)}init(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=e||ZS,this.options=r,this.debug=r.debug}log(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.forward(r,"log","",!0)}warn(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.forward(r,"warn","",!0)}error(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.forward(r,"error","")}deprecate(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,i,s){return s&&!this.debug?null:(Y(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new za(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new za(this.logger,e)}}var Xt=new za;class el{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const s=this.observers[i].get(r)||0;this.observers[i].set(r,s+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[d,l]=a;for(let c=0;c<l;c++)d(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[d,l]=a;for(let c=0;c<l;c++)d.apply(d,[e,...i])})}}class Yh extends el{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,a=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;e.indexOf(".")>-1?d=e.split("."):(d=[e,r],i&&(Array.isArray(i)?d.push(...i):Y(i)&&o?d.push(...i.split(o)):d.push(i)));const l=_a(this.data,d);return!l&&!r&&!i&&e.indexOf(".")>-1&&(e=d[0],r=d[1],i=d.slice(2).join(".")),l||!a||!Y(i)?l:xc(this.data&&this.data[e]&&this.data[e][r],i,o)}addResource(e,r,i,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let d=[e,r];i&&(d=d.concat(a?i.split(a):i)),e.indexOf(".")>-1&&(d=e.split("."),s=r,r=d[1]),this.addNamespaces(r),Qh(this.data,d,s),o.silent||this.emit("added",e,r,i,s)}addResources(e,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in i)(Y(i[o])||Array.isArray(i[o]))&&this.addResource(e,r,o,i[o],{silent:!0});s.silent||this.emit("added",e,r,i)}addResourceBundle(e,r,i,s,o){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},d=[e,r];e.indexOf(".")>-1&&(d=e.split("."),s=i,i=r,r=d[1]),this.addNamespaces(r);let l=_a(this.data,d)||{};a.skipCopy||(i=JSON.parse(JSON.stringify(i))),s?fy(l,i,o):l={...l,...i},Qh(this.data,d,l),a.silent||this.emit("added",e,r,i)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,r)}:this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(s=>r[s]&&Object.keys(r[s]).length>0)}toJSON(){return this.data}}var gy={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,r,i,s){return t.forEach(o=>{this.processors[o]&&(e=this.processors[o].process(e,r,i,s))}),e}};const Xh={};class Ra extends el{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),US(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Xt.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const i=this.resolve(e,r);return i&&i.res!==void 0}extractFromKey(e,r){let i=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=r.ns||this.options.defaultNS||[];const a=i&&e.indexOf(i)>-1,d=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!XS(e,i,s);if(a&&!d){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:Y(o)?[o]:o};const c=e.split(i);(i!==s||i===s&&this.options.ns.indexOf(c[0])>-1)&&(o=c.shift()),e=c.join(s)}return{key:e,namespaces:Y(o)?[o]:o}}translate(e,r,i){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:a,namespaces:d}=this.extractFromKey(e[e.length-1],r),l=d[d.length-1],c=r.lng||this.language,u=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(u){const j=r.nsSeparator||this.options.nsSeparator;return s?{res:`${l}${j}${a}`,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${j}${a}`}return s?{res:a,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:a}const h=this.resolve(e,r);let p=h&&h.res;const f=h&&h.usedKey||a,x=h&&h.exactUsedKey||a,y=Object.prototype.toString.apply(p),v=["[object Number]","[object Function]","[object RegExp]"],g=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject,b=!Y(p)&&typeof p!="boolean"&&typeof p!="number";if(m&&p&&b&&v.indexOf(y)<0&&!(Y(g)&&Array.isArray(p))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const j=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,p,{...r,ns:d}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(h.res=j,h.usedParams=this.getUsedParamsDetails(r),h):j}if(o){const j=Array.isArray(p),R=j?[]:{},T=j?x:f;for(const k in p)if(Object.prototype.hasOwnProperty.call(p,k)){const P=`${T}${o}${k}`;R[k]=this.translate(P,{...r,joinArrays:!1,ns:d}),R[k]===P&&(R[k]=p[k])}p=R}}else if(m&&Y(g)&&Array.isArray(p))p=p.join(g),p&&(p=this.extendTranslation(p,e,r,i));else{let j=!1,R=!1;const T=r.count!==void 0&&!Y(r.count),k=Ra.hasDefaultValue(r),P=T?this.pluralResolver.getSuffix(c,r.count,r):"",I=r.ordinal&&T?this.pluralResolver.getSuffix(c,r.count,{ordinal:!1}):"",E=T&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),A=E&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${P}`]||r[`defaultValue${I}`]||r.defaultValue;!this.isValidLookup(p)&&k&&(j=!0,p=A),this.isValidLookup(p)||(R=!0,p=a);const W=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&R?void 0:p,_=k&&A!==p&&this.options.updateMissing;if(R||j||_){if(this.logger.log(_?"updateKey":"missingKey",c,l,a,_?A:p),o){const S=this.resolve(a,{...r,keySeparator:!1});S&&S.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let N=[];const q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&q&&q[0])for(let S=0;S<q.length;S++)N.push(q[S]);else this.options.saveMissingTo==="all"?N=this.languageUtils.toResolveHierarchy(r.lng||this.language):N.push(r.lng||this.language);const z=(S,D,M)=>{const C=k&&M!==p?M:W;this.options.missingKeyHandler?this.options.missingKeyHandler(S,l,D,C,_,r):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(S,l,D,C,_,r),this.emit("missingKey",S,l,D,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?N.forEach(S=>{const D=this.pluralResolver.getSuffixes(S,r);E&&r[`defaultValue${this.options.pluralSeparator}zero`]&&D.indexOf(`${this.options.pluralSeparator}zero`)<0&&D.push(`${this.options.pluralSeparator}zero`),D.forEach(M=>{z([S],a+M,r[`defaultValue${M}`]||A)})}):z(N,a,A))}p=this.extendTranslation(p,e,r,h,i),R&&p===a&&this.options.appendNamespaceToMissingKey&&(p=`${l}:${a}`),(R||j)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,j?p:void 0):p=this.options.parseMissingKeyHandler(p))}return s?(h.res=p,h.usedParams=this.getUsedParamsDetails(r),h):p}extendTranslation(e,r,i,s,o){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const c=Y(e)&&(i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(c){const p=e.match(this.interpolator.nestingRegexp);u=p&&p.length}let h=i.replace&&!Y(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,i.lng||this.language||s.usedLng,i),c){const p=e.match(this.interpolator.nestingRegexp),f=p&&p.length;u<f&&(i.nest=!1)}!i.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(i.lng=this.language||s.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,f=new Array(p),x=0;x<p;x++)f[x]=arguments[x];return o&&o[0]===f[0]&&!i.context?(a.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${r[0]}`),null):a.translate(...f,r)},i)),i.interpolation&&this.interpolator.reset()}const d=i.postProcess||this.options.postProcess,l=Y(d)?[d]:d;return e!=null&&l&&l.length&&i.applyPostProcessor!==!1&&(e=gy.handle(l,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,s,o,a,d;return Y(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(i))return;const c=this.extractFromKey(l,r),u=c.key;s=u;let h=c.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const p=r.count!==void 0&&!Y(r.count),f=p&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),x=r.context!==void 0&&(Y(r.context)||typeof r.context=="number")&&r.context!=="",y=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);h.forEach(v=>{this.isValidLookup(i)||(d=v,!Xh[`${y[0]}-${v}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(d)&&(Xh[`${y[0]}-${v}`]=!0,this.logger.warn(`key "${s}" for languages "${y.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(g=>{if(this.isValidLookup(i))return;a=g;const m=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(m,u,g,v,r);else{let j;p&&(j=this.pluralResolver.getSuffix(g,r.count,r));const R=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(m.push(u+j),r.ordinal&&j.indexOf(T)===0&&m.push(u+j.replace(T,this.options.pluralSeparator)),f&&m.push(u+R)),x){const k=`${u}${this.options.contextSeparator}${r.context}`;m.push(k),p&&(m.push(k+j),r.ordinal&&j.indexOf(T)===0&&m.push(k+j.replace(T,this.options.pluralSeparator)),f&&m.push(k+R))}}let b;for(;b=m.pop();)this.isValidLookup(i)||(o=b,i=this.getResource(g,v,b,r))}))})}),{res:i,usedKey:s,exactUsedKey:o,usedLng:a,usedNS:d}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,r,i,s):this.resourceStore.getResource(e,r,i,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!Y(e.replace);let s=i?e.replace:e;if(i&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!i){s={...s};for(const o of r)delete s[o]}return s}static hasDefaultValue(e){const r="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&r===i.substring(0,r.length)&&e[i]!==void 0)return!0;return!1}}const Hl=t=>t.charAt(0).toUpperCase()+t.slice(1);class Zh{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Xt.create("languageUtils")}getScriptPartFromCode(e){if(e=Ca(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=Ca(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(Y(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let s=Intl.getCanonicalLocales(e)[0];if(s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s)return s}catch{}const r=["hans","hant","latn","cyrl","cans","mong","arab"];let i=e.split("-");return this.options.lowerCaseLng?i=i.map(s=>s.toLowerCase()):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=Hl(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=Hl(i[1].toLowerCase())),r.indexOf(i[2].toLowerCase())>-1&&(i[2]=Hl(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(i=>{if(r)return;const s=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(s))&&(r=s)}),!r&&this.options.supportedLngs&&e.forEach(i=>{if(r)return;const s=this.getLanguagePartFromCode(i);if(this.isSupportedCode(s))return r=s;r=this.options.supportedLngs.find(o=>{if(o===s)return o;if(!(o.indexOf("-")<0&&s.indexOf("-")<0)&&(o.indexOf("-")>0&&s.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===s||o.indexOf(s)===0&&s.length>1))return o})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),Y(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let i=e[r];return i||(i=e[this.getScriptPartFromCode(r)]),i||(i=e[this.formatLanguageCode(r)]),i||(i=e[this.getLanguagePartFromCode(r)]),i||(i=e.default),i||[]}toResolveHierarchy(e,r){const i=this.getFallbackCodes(r||this.options.fallbackLng||[],e),s=[],o=a=>{a&&(this.isSupportedCode(a)?s.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return Y(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Y(e)&&o(this.formatLanguageCode(e)),i.forEach(a=>{s.indexOf(a)<0&&o(this.formatLanguageCode(a))}),s}}let ek=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],tk={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const rk=["v1","v2","v3"],nk=["v4"],ef={zero:0,one:1,two:2,few:3,many:4,other:5},ik=()=>{const t={};return ek.forEach(e=>{e.lngs.forEach(r=>{t[r]={numbers:e.nr,plurals:tk[e.fc]}})}),t};class sk{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=r,this.logger=Xt.create("pluralResolver"),(!this.options.compatibilityJSON||nk.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=ik(),this.pluralRulesCache={}}addRule(e,r){this.rules[e]=r}clearCache(){this.pluralRulesCache={}}getRule(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const i=Ca(e==="dev"?"en":e),s=r.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:i,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let a;try{a=new Intl.PluralRules(i,{type:s})}catch{if(!e.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(l,r)}return this.pluralRulesCache[o]=a,a}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,r);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}getPluralFormsOfKey(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,i).map(s=>`${r}${s}`)}getSuffixes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((s,o)=>ef[s]-ef[o]).map(s=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s}`):i.numbers.map(s=>this.getSuffix(e,s,r)):[]}getSuffix(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,i);return s?this.shouldUseIntlApi()?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${s.select(r)}`:this.getSuffixRetroCompatible(s,r):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,r){const i=e.noAbs?e.plurals(r):e.plurals(Math.abs(r));let s=e.numbers[i];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const o=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}shouldUseIntlApi(){return!rk.includes(this.options.compatibilityJSON)}}const tf=function(t,e,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=HS(t,e,r);return!o&&s&&Y(r)&&(o=xc(t,r,i),o===void 0&&(o=xc(e,r,i))),o},Gl=t=>t.replace(/\$/g,"$$$$");class ok{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Xt.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:i,useRawValueToEscape:s,prefix:o,prefixEscaped:a,suffix:d,suffixEscaped:l,formatSeparator:c,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:p,nestingPrefixEscaped:f,nestingSuffix:x,nestingSuffixEscaped:y,nestingOptionsSeparator:v,maxReplaces:g,alwaysFormat:m}=e.interpolation;this.escape=r!==void 0?r:KS,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?Mn(o):a||"{{",this.suffix=d?Mn(d):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=p?Mn(p):f||Mn("$t("),this.nestingSuffix=x?Mn(x):y||Mn(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=g||1e3,this.alwaysFormat=m!==void 0?m:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,i)=>r&&r.source===i?(r.lastIndex=0,r):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,r,i,s){let o,a,d;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=f=>{if(f.indexOf(this.formatSeparator)<0){const g=tf(r,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(g,void 0,i,{...s,...r,interpolationkey:f}):g}const x=f.split(this.formatSeparator),y=x.shift().trim(),v=x.join(this.formatSeparator).trim();return this.format(tf(r,l,y,this.options.keySeparator,this.options.ignoreJSONStructure),v,i,{...s,...r,interpolationkey:y})};this.resetRegExp();const u=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,h=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>Gl(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?Gl(this.escape(f)):Gl(f)}].forEach(f=>{for(d=0;o=f.regex.exec(e);){const x=o[1].trim();if(a=c(x),a===void 0)if(typeof u=="function"){const v=u(e,o,s);a=Y(v)?v:""}else if(s&&Object.prototype.hasOwnProperty.call(s,x))a="";else if(h){a=o[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),a="";else!Y(a)&&!this.useRawValueToEscape&&(a=Gh(a));const y=f.safeValue(a);if(e=e.replace(o[0],y),h?(f.regex.lastIndex+=a.length,f.regex.lastIndex-=o[0].length):f.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),e}nest(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,o,a;const d=(l,c)=>{const u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;const h=l.split(new RegExp(`${u}[ ]*{`));let p=`{${h[1]}`;l=h[0],p=this.interpolate(p,a);const f=p.match(/'/g),x=p.match(/"/g);(f&&f.length%2===0&&!x||x.length%2!==0)&&(p=p.replace(/'/g,'"'));try{a=JSON.parse(p),c&&(a={...c,...a})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,y),`${l}${u}${p}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;s=this.nestingRegexp.exec(e);){let l=[];a={...i},a=a.replace&&!Y(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let c=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const u=s[1].split(this.formatSeparator).map(h=>h.trim());s[1]=u.shift(),l=u,c=!0}if(o=r(d.call(this,s[1].trim(),a),a),o&&s[0]===e&&!Y(o))return o;Y(o)||(o=Gh(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),c&&(o=l.reduce((u,h)=>this.format(u,h,i.lng,{...i,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const ak=t=>{let e=t.toLowerCase().trim();const r={};if(t.indexOf("(")>-1){const i=t.split("(");e=i[0].toLowerCase().trim();const s=i[1].substring(0,i[1].length-1);e==="currency"&&s.indexOf(":")<0?r.currency||(r.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?r.range||(r.range=s.trim()):s.split(";").forEach(a=>{if(a){const[d,...l]=a.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),u=d.trim();r[u]||(r[u]=c),c==="false"&&(r[u]=!1),c==="true"&&(r[u]=!0),isNaN(c)||(r[u]=parseInt(c,10))}})}return{formatName:e,formatOptions:r}},Bn=t=>{const e={};return(r,i,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const a=i+JSON.stringify(o);let d=e[a];return d||(d=t(Ca(i),s),e[a]=d),d(r)}};class lk{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Xt.create("formatter"),this.options=e,this.formats={number:Bn((r,i)=>{const s=new Intl.NumberFormat(r,{...i});return o=>s.format(o)}),currency:Bn((r,i)=>{const s=new Intl.NumberFormat(r,{...i,style:"currency"});return o=>s.format(o)}),datetime:Bn((r,i)=>{const s=new Intl.DateTimeFormat(r,{...i});return o=>s.format(o)}),relativetime:Bn((r,i)=>{const s=new Intl.RelativeTimeFormat(r,{...i});return o=>s.format(o,i.range||"day")}),list:Bn((r,i)=>{const s=new Intl.ListFormat(r,{...i});return o=>s.format(o)})},this.init(e)}init(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=r.interpolation.formatSeparator||","}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=Bn(r)}format(e,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=r.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(d=>d.indexOf(")")>-1)){const d=o.findIndex(l=>l.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,d)].join(this.formatSeparator)}return o.reduce((d,l)=>{const{formatName:c,formatOptions:u}=ak(l);if(this.formats[c]){let h=d;try{const p=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},f=p.locale||p.lng||s.locale||s.lng||i;h=this.formats[c](d,f,{...u,...s,...p})}catch(p){this.logger.warn(p)}return h}else this.logger.warn(`there was no format function for ${c}`);return d},e)}}const dk=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class ck extends el{constructor(e,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=r,this.services=i,this.languageUtils=i.languageUtils,this.options=s,this.logger=Xt.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(i,s.backend,s)}queueLoad(e,r,i,s){const o={},a={},d={},l={};return e.forEach(c=>{let u=!0;r.forEach(h=>{const p=`${c}|${h}`;!i.reload&&this.store.hasResourceBundle(c,h)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?a[p]===void 0&&(a[p]=!0):(this.state[p]=1,u=!1,a[p]===void 0&&(a[p]=!0),o[p]===void 0&&(o[p]=!0),l[h]===void 0&&(l[h]=!0)))}),u||(d[c]=!0)}),(Object.keys(o).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(a),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(l)}}loaded(e,r,i){const s=e.split("|"),o=s[0],a=s[1];r&&this.emit("failedLoading",o,a,r),!r&&i&&this.store.addResourceBundle(o,a,i,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&i&&(this.state[e]=0);const d={};this.queue.forEach(l=>{VS(l.loaded,[o],a),dk(l,e),r&&l.errors.push(r),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{d[c]||(d[c]={});const u=l.loaded[c];u.length&&u.forEach(h=>{d[c][h]===void 0&&(d[c][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(l=>!l.done)}read(e,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:i,tried:s,wait:o,callback:a});return}this.readingCalls++;const d=(c,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(c&&u&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,i,s+1,o*2,a)},o);return}a(c,u)},l=this.backend[i].bind(this.backend);if(l.length===2){try{const c=l(e,r);c&&typeof c.then=="function"?c.then(u=>d(null,u)).catch(d):d(null,c)}catch(c){d(c)}return}return l(e,r,d)}prepareLoading(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Y(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Y(r)&&(r=[r]);const o=this.queueLoad(e,r,i,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(a=>{this.loadOne(a)})}load(e,r,i){this.prepareLoading(e,r,{},i)}reload(e,r,i){this.prepareLoading(e,r,{reload:!0},i)}loadOne(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=e.split("|"),s=i[0],o=i[1];this.read(s,o,"read",void 0,void 0,(a,d)=>{a&&this.logger.warn(`${r}loading namespace ${o} for language ${s} failed`,a),!a&&d&&this.logger.log(`${r}loaded namespace ${o} for language ${s}`,d),this.loaded(e,a,d)})}saveMissing(e,r,i,s,o){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${i}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend&&this.backend.create){const l={...a,isUpdate:o},c=this.backend.create.bind(this.backend);if(c.length<6)try{let u;c.length===5?u=c(e,r,i,s,l):u=c(e,r,i,s),u&&typeof u.then=="function"?u.then(h=>d(null,h)).catch(d):d(null,u)}catch(u){d(u)}else c(e,r,i,s,d,l)}!e||!e[0]||this.store.addResource(e[0],r,i,s)}}}const rf=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Y(t[1])&&(e.defaultValue=t[1]),Y(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(i=>{e[i]=r[i]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),nf=t=>(Y(t.ns)&&(t.ns=[t.ns]),Y(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Y(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),ko=()=>{},uk=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(r=>{typeof t[r]=="function"&&(t[r]=t[r].bind(t))})};class Os extends el{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=nf(e),this.services={},this.logger=Xt,this.modules={external:[]},uk(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(){var e=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof r=="function"&&(i=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(Y(r.ns)?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const s=rf();this.options={...s,...this.options,...nf(r)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);const o=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Xt.init(o(this.modules.logger),this.options):Xt.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=lk);const h=new Zh(this.options);this.store=new Yh(this.options.resources,this.options);const p=this.services;p.logger=Xt,p.resourceStore=this.store,p.languageUtils=h,p.pluralResolver=new sk(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(p.formatter=o(u),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new ok(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new ck(o(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(f){for(var x=arguments.length,y=new Array(x>1?x-1:0),v=1;v<x;v++)y[v-1]=arguments[v];e.emit(f,...y)}),this.modules.languageDetector&&(p.languageDetector=o(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=o(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new Ra(this.services,this.options),this.translator.on("*",function(f){for(var x=arguments.length,y=new Array(x>1?x-1:0),v=1;v<x;v++)y[v-1]=arguments[v];e.emit(f,...y)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,i||(i=ko),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const l=$i(),c=()=>{const u=(h,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(p),i(h,p)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ko;const s=Y(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const o=[],a=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(c=>{c!=="cimode"&&o.indexOf(c)<0&&o.push(c)})};s?a(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>a(l)),this.options.preload&&this.options.preload.forEach(d=>a(d)),this.services.backendConnector.load(o,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(d)})}else i(null)}reloadResources(e,r,i){const s=$i();return typeof e=="function"&&(i=e,e=void 0),typeof r=="function"&&(i=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),i||(i=ko),this.services.backendConnector.reload(e,r,o=>{s.resolve(),i(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&gy.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let r=0;r<this.languages.length;r++){const i=this.languages[r];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(e,r){var i=this;this.isLanguageChangingTo=e;const s=$i();this.emit("languageChanging",e);const o=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,c)=>{c?(o(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,s.resolve(function(){return i.t(...arguments)}),r&&r(l,function(){return i.t(...arguments)})},d=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=Y(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||o(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,u=>{a(u,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(d):this.services.languageDetector.detect(d):d(e),s}getFixedT(e,r,i){var s=this;const o=function(a,d){let l;if(typeof d!="object"){for(var c=arguments.length,u=new Array(c>2?c-2:0),h=2;h<c;h++)u[h-2]=arguments[h];l=s.options.overloadTranslationOptionHandler([a,d].concat(u))}else l={...d};l.lng=l.lng||o.lng,l.lngs=l.lngs||o.lngs,l.ns=l.ns||o.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||i||o.keyPrefix);const p=s.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(a)?f=a.map(x=>`${l.keyPrefix}${p}${x}`):f=l.keyPrefix?`${l.keyPrefix}${p}${a}`:a,s.t(f,l)};return Y(e)?o.lng=e:o.lngs=e,o.ns=r,o.keyPrefix=i,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=r.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const a=(d,l)=>{const c=this.services.backendConnector.state[`${d}|${l}`];return c===-1||c===0||c===2};if(r.precheck){const d=r.precheck(this,a);if(d!==void 0)return d}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(i,e)&&(!s||a(o,e)))}loadNamespaces(e,r){const i=$i();return this.options.ns?(Y(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{i.resolve(),r&&r(s)}),i):(r&&r(),Promise.resolve())}loadLanguages(e,r){const i=$i();Y(e)&&(e=[e]);const s=this.options.preload||[],o=e.filter(a=>s.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return o.length?(this.options.preload=s.concat(o),this.loadResources(a=>{i.resolve(),r&&r(a)}),i):(r&&r(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services&&this.services.languageUtils||new Zh(rf());return r.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new Os(e,r)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ko;const i=e.forkResourceStore;i&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new Os(s);return(e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(d=>{o[d]=this[d]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i&&(o.store=new Yh(this.store.data,s),o.services.resourceStore=o.store),o.translator=new Ra(o.services,s),o.translator.on("*",function(d){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];o.emit(d,...c)}),o.init(s,r),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ke=Os.createInstance();Ke.createInstance=Os.createInstance;Ke.createInstance;Ke.dir;Ke.init;Ke.loadResources;Ke.reloadResources;Ke.use;Ke.changeLanguage;Ke.getFixedT;Ke.t;Ke.exists;Ke.setDefaultNamespace;Ke.hasLoadedNamespace;Ke.loadNamespaces;Ke.loadLanguages;function pk(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ls(t){"@babel/helpers - typeof";return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ls(t)}function hk(t,e){if(Ls(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(Ls(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function fk(t){var e=hk(t,"string");return Ls(e)=="symbol"?e:e+""}function gk(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,fk(i.key),i)}}function xk(t,e,r){return e&&gk(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}var xy=[],mk=xy.forEach,yk=xy.slice;function vk(t){return mk.call(yk.call(arguments,1),function(e){if(e)for(var r in e)t[r]===void 0&&(t[r]=e[r])}),t}var sf=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,bk=function(e,r,i){var s=i||{};s.path=s.path||"/";var o=encodeURIComponent(r),a="".concat(e,"=").concat(o);if(s.maxAge>0){var d=s.maxAge-0;if(Number.isNaN(d))throw new Error("maxAge should be a Number");a+="; Max-Age=".concat(Math.floor(d))}if(s.domain){if(!sf.test(s.domain))throw new TypeError("option domain is invalid");a+="; Domain=".concat(s.domain)}if(s.path){if(!sf.test(s.path))throw new TypeError("option path is invalid");a+="; Path=".concat(s.path)}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires=".concat(s.expires.toUTCString())}if(s.httpOnly&&(a+="; HttpOnly"),s.secure&&(a+="; Secure"),s.sameSite){var l=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(l){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a},of={create:function(e,r,i,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+i*60*1e3)),s&&(o.domain=s),document.cookie=bk(e,encodeURIComponent(r),o)},read:function(e){for(var r="".concat(e,"="),i=document.cookie.split(";"),s=0;s<i.length;s++){for(var o=i[s];o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(r)===0)return o.substring(r.length,o.length)}return null},remove:function(e){this.create(e,"",-1)}},jk={name:"cookie",lookup:function(e){var r;if(e.lookupCookie&&typeof document<"u"){var i=of.read(e.lookupCookie);i&&(r=i)}return r},cacheUserLanguage:function(e,r){r.lookupCookie&&typeof document<"u"&&of.create(r.lookupCookie,e,r.cookieMinutes,r.cookieDomain,r.cookieOptions)}},wk={name:"querystring",lookup:function(e){var r;if(typeof window<"u"){var i=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));for(var s=i.substring(1),o=s.split("&"),a=0;a<o.length;a++){var d=o[a].indexOf("=");if(d>0){var l=o[a].substring(0,d);l===e.lookupQuerystring&&(r=o[a].substring(d+1))}}}return r}},Fi=null,af=function(){if(Fi!==null)return Fi;try{Fi=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Fi=!1}return Fi},Sk={name:"localStorage",lookup:function(e){var r;if(e.lookupLocalStorage&&af()){var i=window.localStorage.getItem(e.lookupLocalStorage);i&&(r=i)}return r},cacheUserLanguage:function(e,r){r.lookupLocalStorage&&af()&&window.localStorage.setItem(r.lookupLocalStorage,e)}},Wi=null,lf=function(){if(Wi!==null)return Wi;try{Wi=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Wi=!1}return Wi},kk={name:"sessionStorage",lookup:function(e){var r;if(e.lookupSessionStorage&&lf()){var i=window.sessionStorage.getItem(e.lookupSessionStorage);i&&(r=i)}return r},cacheUserLanguage:function(e,r){r.lookupSessionStorage&&lf()&&window.sessionStorage.setItem(r.lookupSessionStorage,e)}},_k={name:"navigator",lookup:function(e){var r=[];if(typeof navigator<"u"){if(navigator.languages)for(var i=0;i<navigator.languages.length;i++)r.push(navigator.languages[i]);navigator.userLanguage&&r.push(navigator.userLanguage),navigator.language&&r.push(navigator.language)}return r.length>0?r:void 0}},Ck={name:"htmlTag",lookup:function(e){var r,i=e.htmlTag||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(r=i.getAttribute("lang")),r}},zk={name:"path",lookup:function(e){var r;if(typeof window<"u"){var i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(i instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof i[e.lookupFromPathIndex]!="string")return;r=i[e.lookupFromPathIndex].replace("/","")}else r=i[0].replace("/","")}return r}},Rk={name:"subdomain",lookup:function(e){var r=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,i=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[r]}},my=!1;try{document.cookie,my=!0}catch{}var yy=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];my||yy.splice(1,1);function Ek(){return{order:yy,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var vy=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};pk(this,t),this.type="languageDetector",this.detectors={},this.init(e,r)}return xk(t,[{key:"init",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=r||{languageUtils:{}},this.options=vk(i,this.options||{},Ek()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(o){return o.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(jk),this.addDetector(wk),this.addDetector(Sk),this.addDetector(kk),this.addDetector(_k),this.addDetector(Ck),this.addDetector(zk),this.addDetector(Rk)}},{key:"addDetector",value:function(r){return this.detectors[r.name]=r,this}},{key:"detect",value:function(r){var i=this;r||(r=this.options.order);var s=[];return r.forEach(function(o){if(i.detectors[o]){var a=i.detectors[o].lookup(i.options);a&&typeof a=="string"&&(a=[a]),a&&(s=s.concat(a))}}),s=s.map(function(o){return i.options.convertDetectedLanguage(o)}),this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}},{key:"cacheUserLanguage",value:function(r,i){var s=this;i||(i=this.options.caches),i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(r)>-1||i.forEach(function(o){s.detectors[o]&&s.detectors[o].cacheUserLanguage(r,s.options)}))}}])}();vy.type="languageDetector";const Tk={save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",create:"Create",search:"Search",loading:"Loading...",error:"Error",success:"Success",confirm:"Confirm",close:"Close",back:"Back",next:"Next",yes:"Yes",no:"No",all:"All",none:"None",copyLink:"Copy link",linkCopied:"Link copied to clipboard"},Ik={dashboard:"Dashboard",listings:"My Listings",leads:"Leads",platforms:"Platforms",tools:"Tools",aiTools:"AI Tools",settings:"Settings",newListing:"New Listing",logout:"Logout",upgradeToPro:"Upgrade to Pro"},Pk={login:"Login",signup:"Sign Up",logout:"Logout",email:"Email",password:"Password",confirmPassword:"Confirm Password",fullName:"Full Name",forgotPassword:"Forgot Password?",resetPassword:"Reset Password",noAccount:"Don't have an account?",hasAccount:"Already have an account?",signupSuccess:"Account created! Check your email to confirm.",loginError:"Invalid email or password",passwordMismatch:"Passwords don't match"},Ak={welcome:"Hello, {{name}}",subtitle:"Here's an overview of your real estate activity",activeListings:"Active Listings",totalViews:"Total Views",newLeads:"New Leads",conversionRate:"Conversion Rate",recentListings:"Recent Listings",recentLeads:"Recent Leads",viewAll:"View all",noListings:"No listings yet",noLeads:"No leads yet",createFirst:"Create your first listing",createFirstDesc:"Publish your first property and broadcast it to all platforms in one click.",quickActions:{createListing:"Create a listing",publishAll:"Publish to all platforms",generateAI:"Generate with AI",autoDescriptions:"Automatic descriptions",viewLeads:"View leads",newToProcess:"{{count}} new to process"}},Ok={title:"My Listings",subtitle:"Manage and publish your properties",newListing:"New Listing",search:"Search listings...",filter:"Filter",gridView:"Grid view",listView:"List view",noListings:"No listings",noResults:"No results",createFirst:"Create your first listing and publish it to all platforms.",tryDifferentFilter:"Try modifying your search filters.",status:{all:"All",active:"Active",draft:"Draft",paused:"Paused",pending:"Pending"},actions:{edit:"Edit",viewPublic:"View public page",copyLink:"Copy link",pause:"Pause",activate:"Activate",publish:"Publish to platforms",delete:"Delete"},deleteConfirm:"Are you sure you want to delete this listing?",views:"views",leads:"leads"},Lk={title:"New Listing",editTitle:"Edit Listing",subtitle:"Fill in the details of your property",basicInfo:"Basic Information",propertyTitle:"Title",propertyTitlePlaceholder:"Beautiful apartment with sea view...",description:"Description",descriptionPlaceholder:"Describe your property...",propertyType:"Property Type",types:{apartment:"Apartment",house:"House",villa:"Villa",land:"Land",commercial:"Commercial"},priceInfo:"Price & Location",price:"Price",priceType:"Price Type",priceTypes:{sale:"For Sale",rent:"For Rent",vacation:"Vacation Rental"},location:"Location",locationPlaceholder:"City, neighborhood...",details:"Details",beds:"Bedrooms",baths:"Bathrooms",area:"Area (m)",features:"Features",featuresPlaceholder:"Select features...",featuresList:{pool:"Pool",garden:"Garden",seaView:"Sea View",parking:"Parking",aircon:"Air Conditioning",furnished:"Furnished",terrace:"Terrace",security:"Security",elevator:"Elevator",storage:"Storage"},images:"Photos",dragDrop:"Drag & drop images here or click to browse",maxSize:"Max 5MB per image",mainImage:"MAIN",platforms:"Platforms",selectPlatforms:"Select platforms to publish",status:"Status",saveDraft:"Save as Draft",publish:"Publish",saving:"Saving...",saved:"Listing saved!",generateWithAI:"Generate with AI"},Dk={title:"Leads",subtitle:"Manage your prospect contacts",search:"Search leads...",noLeads:"No leads yet",noLeadsDesc:"Leads will appear here when prospects contact you",noResults:"No leads found",status:{all:"All",new:"New",contacted:"Contacted",qualified:"Qualified",visited:"Visited",lost:"Lost"},source:"Source",message:"Message",noMessage:"No message",actions:{markContacted:"Mark as Contacted",markQualified:"Mark as Qualified",delete:"Delete"},deleteConfirm:"Are you sure you want to delete this lead?"},Nk={title:"Platforms",subtitle:"Connect your accounts to automatically publish your listings",connected:"Connected",notConnected:"Not connected",connect:"Connect",disconnect:"Disconnect",markActive:"Mark as active",deactivate:"Deactivate",activeListings:"{{count}} active listing(s)",autoConnect:"Automatic Connection",autoConnectDesc:"These platforms support automatic publishing via API",manual:"Real Estate Portals",manualDesc:"These platforms require manual publishing or a commercial partnership",stats:{connected:"Connected platforms",publications:"Active publications",available:"Available platforms"}},Mk={title:"AI Tools",subtitle:"Generate professional descriptions for your listings",generateDescription:"Generate Description",propertyDetails:"Property Details",tone:"Tone",tones:{professional:"Professional",luxury:"Luxury",friendly:"Friendly"},generate:"Generate",generating:"Generating...",result:"Generated Description",copy:"Copy",regenerate:"Regenerate",copied:"Copied!",useInListing:"Use in listing"},Bk={title:"Settings",subtitle:"Manage your account and preferences",tabs:{profile:"Profile",security:"Security",notifications:"Notifications",billing:"Billing"},profile:{title:"Personal Information",fullName:"Full Name",email:"Email",phone:"Phone",company:"Company",website:"Website",save:"Save",saving:"Saving...",saved:"Profile updated"},security:{title:"Change Password",newPassword:"New Password",confirmPassword:"Confirm Password",update:"Update",updating:"Updating...",updated:"Password updated"},notifications:{title:"Notification Preferences",newLead:"New lead",newLeadDesc:"Receive a notification when a prospect contacts you",weeklyReport:"Weekly report",weeklyReportDesc:"Summary of your activity every week",productUpdates:"Product updates",productUpdatesDesc:"New features and improvements"},billing:{title:"Your Subscription",currentPlan:"Current Plan",noPlan:"No active subscription",noPlanDesc:"Choose a plan below to unlock all features",renewalDate:"Renewal on {{date}}",manageSub:"Manage subscription",choosePlan:"Choose a plan",changePlan:"Change plan",currentPlanBadge:"CURRENT",popularBadge:"POPULAR",monthly:"/month",choosePlanBtn:"Choose this plan"}},$k={notFound:"Listing Not Available",notFoundDesc:"This listing doesn't exist or is no longer active.",backHome:"Back to home",interested:"Interested in this property?",contactForm:"Fill out the form and we'll get back to you quickly.",fullName:"Full Name",email:"Email",phone:"Phone",message:"Message",messagePlaceholder:"I'm interested in this property...",send:"Send my request",sending:"Sending...",sent:"Message sent!",sentDesc:"We've received your request and will get back to you very soon.",formDisclaimer:"By submitting this form, you agree to be contacted about this property.",bedrooms:"Bedrooms",bathrooms:"Bathrooms",area:"Area",description:"Description",features:"Features"},Fk={hero:{title:"Automate Your Real Estate Business",subtitle:"Publish to all platforms in one click. Generate descriptions with AI. Convert more leads.",cta:"Start Free Trial",demo:"Watch Demo"},pricing:{title:"Simple, Transparent Pricing",subtitle:"Choose the plan that fits your needs",monthly:"Monthly",yearly:"Yearly",starter:{name:"Starter",desc:"Ideal to get started",cta:"Get Started"},pro:{name:"Pro",desc:"The choice of top agents",cta:"Free 14-Day Trial"},agency:{name:"Agency",desc:"For teams",cta:"Contact Us"}}},Wk={generic:"An error occurred",network:"Network error. Please try again.",unauthorized:"You must be logged in",notFound:"Not found",validation:"Please check the form fields"},Uk={common:Tk,nav:Ik,auth:Pk,dashboard:Ak,listings:Ok,createListing:Lk,leads:Dk,platforms:Nk,aiTools:Mk,settings:Bk,publicListing:$k,landing:Fk,errors:Wk},qk={save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",create:"Creer",search:"Rechercher",loading:"Chargement...",error:"Erreur",success:"Succes",confirm:"Confirmer",close:"Fermer",back:"Retour",next:"Suivant",yes:"Oui",no:"Non",all:"Tout",none:"Aucun",copyLink:"Copier le lien",linkCopied:"Lien copie dans le presse-papier"},Vk={dashboard:"Tableau de bord",listings:"Mes Annonces",leads:"Leads",platforms:"Plateformes",tools:"Outils",aiTools:"Outils IA",settings:"Parametres",newListing:"Nouvelle Annonce",logout:"Deconnexion",upgradeToPro:"Passer a Pro"},Hk={login:"Connexion",signup:"Inscription",logout:"Deconnexion",email:"Email",password:"Mot de passe",confirmPassword:"Confirmer le mot de passe",fullName:"Nom complet",forgotPassword:"Mot de passe oublie ?",resetPassword:"Reinitialiser le mot de passe",noAccount:"Pas encore de compte ?",hasAccount:"Deja un compte ?",signupSuccess:"Compte cree ! Verifiez votre email pour confirmer.",loginError:"Email ou mot de passe invalide",passwordMismatch:"Les mots de passe ne correspondent pas"},Gk={welcome:"Bonjour, {{name}}",subtitle:"Voici un apercu de votre activite immobiliere",activeListings:"Annonces Actives",totalViews:"Vues Totales",newLeads:"Nouveaux Leads",conversionRate:"Taux de Conversion",recentListings:"Annonces Recentes",recentLeads:"Leads Recents",viewAll:"Voir tout",noListings:"Aucune annonce",noLeads:"Aucun lead",createFirst:"Creez votre premiere annonce",createFirstDesc:"Publiez votre premier bien et diffusez-le sur toutes les plateformes en un clic.",quickActions:{createListing:"Creer une annonce",publishAll:"Publier sur toutes les plateformes",generateAI:"Generer avec l'IA",autoDescriptions:"Descriptions automatiques",viewLeads:"Voir les leads",newToProcess:"{{count}} nouveaux a traiter"}},Kk={title:"Mes Annonces",subtitle:"Gerez et publiez vos biens",newListing:"Nouvelle Annonce",search:"Rechercher une annonce...",filter:"Filtrer",gridView:"Vue grille",listView:"Vue liste",noListings:"Aucune annonce",noResults:"Aucun resultat",createFirst:"Creez votre premiere annonce et publiez-la sur toutes les plateformes.",tryDifferentFilter:"Essayez de modifier vos filtres de recherche.",status:{all:"Toutes",active:"Active",draft:"Brouillon",paused:"En pause",pending:"En attente"},actions:{edit:"Modifier",viewPublic:"Voir page publique",copyLink:"Copier le lien",pause:"Mettre en pause",activate:"Activer",publish:"Publier sur plateformes",delete:"Supprimer"},deleteConfirm:"Etes-vous sur de vouloir supprimer cette annonce ?",views:"vues",leads:"leads"},Jk={title:"Nouvelle Annonce",editTitle:"Modifier l'Annonce",subtitle:"Renseignez les details de votre bien",basicInfo:"Informations de base",propertyTitle:"Titre",propertyTitlePlaceholder:"Bel appartement avec vue mer...",description:"Description",descriptionPlaceholder:"Decrivez votre bien...",propertyType:"Type de bien",types:{apartment:"Appartement",house:"Maison",villa:"Villa",land:"Terrain",commercial:"Commercial"},priceInfo:"Prix & Localisation",price:"Prix",priceType:"Type de prix",priceTypes:{sale:"Vente",rent:"Location",vacation:"Location saisonniere"},location:"Localisation",locationPlaceholder:"Ville, quartier...",details:"Details",beds:"Chambres",baths:"Salles de bain",area:"Surface (m)",features:"Equipements",featuresPlaceholder:"Selectionnez les equipements...",featuresList:{pool:"Piscine",garden:"Jardin",seaView:"Vue mer",parking:"Parking",aircon:"Climatisation",furnished:"Meuble",terrace:"Terrasse",security:"Securite",elevator:"Ascenseur",storage:"Rangement"},images:"Photos",dragDrop:"Glissez-deposez des images ici ou cliquez pour parcourir",maxSize:"Max 5 Mo par image",mainImage:"PRINCIPALE",platforms:"Plateformes",selectPlatforms:"Selectionnez les plateformes de publication",status:"Statut",saveDraft:"Enregistrer en brouillon",publish:"Publier",saving:"Enregistrement...",saved:"Annonce enregistree !",generateWithAI:"Generer avec l'IA"},Qk={title:"Leads",subtitle:"Gerez vos contacts prospects",search:"Rechercher un lead...",noLeads:"Aucun lead",noLeadsDesc:"Les leads apparaitront ici quand des prospects vous contacteront",noResults:"Aucun lead trouve",status:{all:"Tous",new:"Nouveau",contacted:"Contacte",qualified:"Qualifie",visited:"Visite",lost:"Perdu"},source:"Source",message:"Message",noMessage:"Aucun message",actions:{markContacted:"Marquer comme contacte",markQualified:"Marquer comme qualifie",delete:"Supprimer"},deleteConfirm:"Etes-vous sur de vouloir supprimer ce lead ?"},Yk={title:"Plateformes",subtitle:"Connectez vos comptes pour publier automatiquement vos annonces",connected:"Connecte",notConnected:"Non connecte",connect:"Connecter",disconnect:"Deconnecter",markActive:"Marquer actif",deactivate:"Desactiver",activeListings:"{{count}} annonce(s) active(s)",autoConnect:"Connexion automatique",autoConnectDesc:"Ces plateformes supportent la publication automatique via API",manual:"Portails immobiliers",manualDesc:"Ces plateformes necessitent une publication manuelle ou un partenariat commercial",stats:{connected:"Plateformes connectees",publications:"Publications actives",available:"Plateformes disponibles"}},Xk={title:"Outils IA",subtitle:"Generez des descriptions professionnelles pour vos annonces",generateDescription:"Generer une description",propertyDetails:"Details du bien",tone:"Ton",tones:{professional:"Professionnel",luxury:"Luxe",friendly:"Convivial"},generate:"Generer",generating:"Generation en cours...",result:"Description generee",copy:"Copier",regenerate:"Regenerer",copied:"Copie !",useInListing:"Utiliser dans l'annonce"},Zk={title:"Parametres",subtitle:"Gerez votre compte et vos preferences",tabs:{profile:"Profil",security:"Securite",notifications:"Notifications",billing:"Facturation"},profile:{title:"Informations personnelles",fullName:"Nom complet",email:"Email",phone:"Telephone",company:"Societe",website:"Site web",save:"Enregistrer",saving:"Enregistrement...",saved:"Profil mis a jour"},security:{title:"Changer le mot de passe",newPassword:"Nouveau mot de passe",confirmPassword:"Confirmer le mot de passe",update:"Mettre a jour",updating:"Mise a jour...",updated:"Mot de passe mis a jour"},notifications:{title:"Preferences de notification",newLead:"Nouveau lead",newLeadDesc:"Recevez une notification quand un prospect vous contacte",weeklyReport:"Rapport hebdomadaire",weeklyReportDesc:"Resume de votre activite chaque semaine",productUpdates:"Mises a jour produit",productUpdatesDesc:"Nouvelles fonctionnalites et ameliorations"},billing:{title:"Votre abonnement",currentPlan:"Plan actuel",noPlan:"Aucun abonnement actif",noPlanDesc:"Choisissez un plan ci-dessous pour debloquer toutes les fonctionnalites",renewalDate:"Renouvellement le {{date}}",manageSub:"Gerer mon abonnement",choosePlan:"Choisir un plan",changePlan:"Changer de plan",currentPlanBadge:"ACTUEL",popularBadge:"POPULAIRE",monthly:"/mois",choosePlanBtn:"Choisir ce plan"}},e4={notFound:"Annonce non disponible",notFoundDesc:"Cette annonce n'existe pas ou n'est plus active.",backHome:"Retour a l'accueil",interested:"Interesse par ce bien ?",contactForm:"Remplissez le formulaire et nous vous recontacterons rapidement.",fullName:"Nom complet",email:"Email",phone:"Telephone",message:"Message",messagePlaceholder:"Je suis interesse par ce bien...",send:"Envoyer ma demande",sending:"Envoi en cours...",sent:"Message envoye !",sentDesc:"Nous avons bien recu votre demande et reviendrons vers vous tres rapidement.",formDisclaimer:"En soumettant ce formulaire, vous acceptez d'etre contacte concernant ce bien.",bedrooms:"Chambres",bathrooms:"Salles de bain",area:"Surface",description:"Description",features:"Equipements"},t4={hero:{title:"Automatisez votre activite immobiliere",subtitle:"Publiez sur toutes les plateformes en un clic. Generez des descriptions avec l'IA. Convertissez plus de leads.",cta:"Essai Gratuit",demo:"Voir la demo"},pricing:{title:"Tarifs simples et transparents",subtitle:"Choisissez le plan qui vous convient",monthly:"Mensuel",yearly:"Annuel",starter:{name:"Starter",desc:"Ideal pour debuter",cta:"Commencer"},pro:{name:"Pro",desc:"Le choix des top agents",cta:"Essai Gratuit 14 jours"},agency:{name:"Agence",desc:"Pour les equipes",cta:"Contactez-nous"}}},r4={generic:"Une erreur est survenue",network:"Erreur reseau. Veuillez reessayer.",unauthorized:"Vous devez etre connecte",notFound:"Non trouve",validation:"Veuillez verifier les champs du formulaire"},n4={common:qk,nav:Vk,auth:Hk,dashboard:Gk,listings:Kk,createListing:Jk,leads:Qk,platforms:Yk,aiTools:Xk,settings:Zk,publicListing:e4,landing:t4,errors:r4};Ke.use(vy).use(Cj).init({resources:{en:{translation:Uk},fr:{translation:n4}},fallbackLng:"fr",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]}});Kl.createRoot(document.getElementById("root")).render(n.jsx(Ta.StrictMode,{children:n.jsx(Vv,{children:n.jsx(fj,{children:n.jsx(WS,{})})})}));export{Ls as _,zS as a,In as c,cf as g,fk as t};
